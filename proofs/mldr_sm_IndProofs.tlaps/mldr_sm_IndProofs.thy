(* automatically generated -- do not edit manually *)
theory mldr_sm_IndProofs imports Constant Zenon begin
ML_command {* writeln ("*** TLAPS PARSED\n"); *}
consts
  "isReal" :: c
  "isa_slas_a" :: "[c,c] => c"
  "isa_bksl_diva" :: "[c,c] => c"
  "isa_perc_a" :: "[c,c] => c"
  "isa_peri_peri_a" :: "[c,c] => c"
  "isInfinity" :: c
  "isa_lbrk_rbrk_a" :: "[c] => c"
  "isa_less_more_a" :: "[c] => c"

lemma ob'118:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition IndAuto suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'144: "(((Term) = (Nat)))"
assumes v'145: "(((Version) = (Nat)))"
assumes v'148: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'158: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
assumes v'159: "((\<exists> s \<in> (Server) : (\<exists> newConfig \<in> ((SUBSET (Server))) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (s))) = (Primary))) & ((ConfigQuorumCheck ((s)))) & ((TermQuorumCheck ((s)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (s))))) \<union> (((fapply ((config), (s))) \\ (newConfig)))))))))) & (((s) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (fapply ((currentTerm), (s)))]))) & ((greater ((newVersion), (fapply ((configVersion), (s)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s)] = (newConfig)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (t))) = (Secondary))) & ((IsNewerConfig ((s), (t)))) & (((newTerm) = (fapply ((configTerm), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (newTerm)]))) & (((newVersion) = (fapply ((configVersion), (s))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(t)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(t)] = (fapply ((config), (s)))]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))))))) | (\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : ((((greater ((fapply ((currentTerm), (s))), (fapply ((currentTerm), (t)))))) & (((newTerm) = (fapply ((currentTerm), (s))))) & ((((a_currentTermhash_primea :: c)) = ([(currentTerm) EXCEPT ![(t)] = (newTerm)]))) & ((((a_statehash_primea :: c)) = ([(state) EXCEPT ![(t)] = (Secondary)])))) & (((((a_configVersionhash_primea :: c)) = (configVersion))) & ((((a_configTermhash_primea :: c)) = (configTerm))) & ((((a_confighash_primea :: c)) = (config)))))))))"
shows "((((a_statehash_primea :: c)) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})])))"(is "PROP ?ob'118")
proof -
ML_command {* writeln "*** TLAPS ENTER 118"; *}
show "PROP ?ob'118"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_d9857c.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_d9857c.znn.out
;; obligation #118
$hyp "v'144" (= Term arith.N)
$hyp "v'145" (= Version
arith.N)
$hyp "v'148" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'158" (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))
$hyp "v'159" (\/ (TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((newConfig) (TLA.bEx Version ((newVersion) (/\ (= (TLA.fapply state s)
Primary) (ConfigQuorumCheck s) (TermQuorumCheck s) (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig (TLA.fapply config s))
(TLA.setminus (TLA.fapply config s) newConfig)))) (TLA.in s newConfig)
(-. (= newConfig (TLA.fapply config s))) (= a_configTermhash_primea
(TLA.except configTerm s (TLA.fapply currentTerm s)))
(arith.lt (TLA.fapply configVersion s) newVersion)
(= a_configVersionhash_primea (TLA.except configVersion s newVersion))
(= a_confighash_primea (TLA.except config s newConfig))
(/\ (= a_currentTermhash_primea currentTerm) (= a_statehash_primea
state)))))))))
(TLA.bEx Server ((s) (TLA.bEx Server ((t) (TLA.bEx Term ((newTerm) (TLA.bEx Version ((newVersion) (/\ (= (TLA.fapply state t)
Secondary) (IsNewerConfig s t) (= newTerm (TLA.fapply configTerm s))
(= a_configTermhash_primea (TLA.except configTerm t newTerm)) (= newVersion
(TLA.fapply configVersion s)) (= a_configVersionhash_primea
(TLA.except configVersion t newVersion)) (= a_confighash_primea
(TLA.except config t (TLA.fapply config s))) (/\ (= a_currentTermhash_primea
currentTerm) (= a_statehash_primea state)))))))))))
(TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) newTerm (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion)))))))))
(TLA.bEx Server ((s) (TLA.bEx Server ((t) (TLA.bEx Term ((newTerm) (/\ (/\ (arith.lt (TLA.fapply currentTerm t)
(TLA.fapply currentTerm s)) (= newTerm (TLA.fapply currentTerm s))
(= a_currentTermhash_primea (TLA.except currentTerm t newTerm))
(= a_statehash_primea (TLA.except state t Secondary)))
(/\ (= a_configVersionhash_primea configVersion) (= a_configTermhash_primea
configTerm) (= a_confighash_primea
config))))))))))
$goal (TLA.in a_statehash_primea
(TLA.FuncSet Server (TLA.set Secondary Primary)))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))" (is "?z_hg&?z_hl")
 using v'158 by blast
 have z_He:"(bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[s])=Primary)&(ConfigQuorumCheck(s)&(TermQuorumCheck(s)&((1=Cardinality(((newConfig \\ (config[s])) \\cup ((config[s]) \\ newConfig))))&((s \\in newConfig)&((newConfig~=(config[s]))&((a_configTermhash_primea=except(configTerm, s, (currentTerm[s])))&(((configVersion[s]) < newVersion)&((a_configVersionhash_primea=except(configVersion, s, newVersion))&((a_confighash_primea=except(config, s, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))|(bEx(Server, (\<lambda>s. bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(s, t)&((newTerm=(configTerm[s]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[s]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[s])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))|(bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))|bEx(Server, (\<lambda>s. bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[s]))&((newTerm=(currentTerm[s]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))))))" (is "?z_hbc|?z_hda")
 using v'159 by blast
 have zenon_L1_: "(~(a_statehash_primea \\in FuncSet(Server, {Secondary, Primary}))) ==> (state \\in FuncSet(Server, {Secondary, Primary})) ==> (a_statehash_primea=state) ==> FALSE" (is "?z_hf ==> ?z_hm ==> ?z_hcy ==> FALSE")
 proof -
  assume z_Hf:"?z_hf" (is "~?z_hgs")
  assume z_Hm:"?z_hm"
  assume z_Hcy:"?z_hcy"
  show FALSE
  proof (rule notE [OF z_Hf])
   have z_Hgt: "(state=a_statehash_primea)"
   by (rule sym [OF z_Hcy])
   have z_Hgs: "?z_hgs"
   by (rule subst [where P="(\<lambda>zenon_Vfff. (zenon_Vfff \\in FuncSet(Server, {Secondary, Primary})))", OF z_Hgt], fact z_Hm)
   thus "?z_hgs" .
  qed
 qed
 assume z_Hf:"(~(a_statehash_primea \\in FuncSet(Server, {Secondary, Primary})))" (is "~?z_hgs")
 have z_Hl: "?z_hl" (is "?z_hm&?z_hs")
 by (rule zenon_and_1 [OF z_Hd])
 have z_Hm: "?z_hm"
 by (rule zenon_and_0 [OF z_Hl])
 have z_Hs: "?z_hs" (is "?z_ht&?z_hx")
 by (rule zenon_and_1 [OF z_Hl])
 have z_Hx: "?z_hx" (is "?z_hy&?z_hba")
 by (rule zenon_and_1 [OF z_Hs])
 have z_Hba: "?z_hba"
 by (rule zenon_and_1 [OF z_Hx])
 show FALSE
 proof (rule zenon_or [OF z_He])
  assume z_Hbc:"?z_hbc"
  have z_Hgx_z_Hbc: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) == ?z_hbc" (is "?z_hgx == _")
  by (unfold bEx_def)
  have z_Hgx: "?z_hgx" (is "\\E x : ?z_hik(x)")
  by (unfold z_Hgx_z_Hbc, fact z_Hbc)
  have z_Hil: "?z_hik((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))" (is "?z_hin&?z_hio")
  by (rule zenon_ex_choose_0 [of "?z_hik", OF z_Hgx])
  have z_Hio: "?z_hio"
  by (rule zenon_and_1 [OF z_Hil])
  have z_Hip_z_Hio: "(\\E x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) == ?z_hio" (is "?z_hip == _")
  by (unfold bEx_def)
  have z_Hip: "?z_hip" (is "\\E x : ?z_hjz(x)")
  by (unfold z_Hip_z_Hio, fact z_Hio)
  have z_Hka: "?z_hjz((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))" (is "?z_hkc&?z_hkd")
  by (rule zenon_ex_choose_0 [of "?z_hjz", OF z_Hip])
  have z_Hkd: "?z_hkd"
  by (rule zenon_and_1 [OF z_Hka])
  have z_Hke_z_Hkd: "(\\E x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality((((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < x)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))) == ?z_hkd" (is "?z_hke == _")
  by (unfold bEx_def)
  have z_Hke: "?z_hke" (is "\\E x : ?z_hld(x)")
  by (unfold z_Hke_z_Hkd, fact z_Hkd)
  have z_Hle: "?z_hld((CHOOSE x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality((((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < x)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))" (is "?z_hlg&?z_hlh")
  by (rule zenon_ex_choose_0 [of "?z_hld", OF z_Hke])
  have z_Hlh: "?z_hlh" (is "?z_hiv&?z_hli")
  by (rule zenon_and_1 [OF z_Hle])
  have z_Hli: "?z_hli" (is "?z_hiy&?z_hlj")
  by (rule zenon_and_1 [OF z_Hlh])
  have z_Hlj: "?z_hlj" (is "?z_hja&?z_hlk")
  by (rule zenon_and_1 [OF z_Hli])
  have z_Hlk: "?z_hlk" (is "?z_hkl&?z_hll")
  by (rule zenon_and_1 [OF z_Hlj])
  have z_Hll: "?z_hll" (is "?z_hkr&?z_hlm")
  by (rule zenon_and_1 [OF z_Hlk])
  have z_Hlm: "?z_hlm" (is "?z_hkt&?z_hln")
  by (rule zenon_and_1 [OF z_Hll])
  have z_Hln: "?z_hln" (is "?z_hjn&?z_hlo")
  by (rule zenon_and_1 [OF z_Hlm])
  have z_Hlo: "?z_hlo" (is "?z_hlp&?z_hlq")
  by (rule zenon_and_1 [OF z_Hln])
  have z_Hlq: "?z_hlq" (is "?z_hlr&?z_hla")
  by (rule zenon_and_1 [OF z_Hlo])
  have z_Hla: "?z_hla" (is "?z_hlb&?z_hcv")
  by (rule zenon_and_1 [OF z_Hlq])
  have z_Hcv: "?z_hcv" (is "?z_hcw&?z_hcy")
  by (rule zenon_and_1 [OF z_Hla])
  have z_Hcy: "?z_hcy"
  by (rule zenon_and_1 [OF z_Hcv])
  show FALSE
  by (rule zenon_L1_ [OF z_Hf z_Hm z_Hcy])
 next
  assume z_Hda:"?z_hda" (is "?z_hdb|?z_hef")
  show FALSE
  proof (rule zenon_or [OF z_Hda])
   assume z_Hdb:"?z_hdb"
   have z_Hls_z_Hdb: "(\\E x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))) == ?z_hdb" (is "?z_hls == _")
   by (unfold bEx_def)
   have z_Hls: "?z_hls" (is "\\E x : ?z_hmn(x)")
   by (unfold z_Hls_z_Hdb, fact z_Hdb)
   have z_Hmo: "?z_hmn((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))" (is "?z_hmq&?z_hmr")
   by (rule zenon_ex_choose_0 [of "?z_hmn", OF z_Hls])
   have z_Hmr: "?z_hmr"
   by (rule zenon_and_1 [OF z_Hmo])
   have z_Hms_z_Hmr: "(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))) == ?z_hmr" (is "?z_hms == _")
   by (unfold bEx_def)
   have z_Hms: "?z_hms" (is "\\E x : ?z_hnq(x)")
   by (unfold z_Hms_z_Hmr, fact z_Hmr)
   have z_Hnr: "?z_hnq((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))" (is "?z_hnt&?z_hnu")
   by (rule zenon_ex_choose_0 [of "?z_hnq", OF z_Hms])
   have z_Hnu: "?z_hnu"
   by (rule zenon_and_1 [OF z_Hnr])
   have z_Hnv_z_Hnu: "(\\E x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))) == ?z_hnu" (is "?z_hnv == _")
   by (unfold bEx_def)
   have z_Hnv: "?z_hnv" (is "\\E x : ?z_hor(x)")
   by (unfold z_Hnv_z_Hnu, fact z_Hnu)
   have z_Hos: "?z_hor((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))" (is "?z_hou&?z_hov")
   by (rule zenon_ex_choose_0 [of "?z_hor", OF z_Hnv])
   have z_Hov: "?z_hov"
   by (rule zenon_and_1 [OF z_Hos])
   have z_How_z_Hov: "(\\E x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&(((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))&((x=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))) == ?z_hov" (is "?z_how == _")
   by (unfold bEx_def)
   have z_How: "?z_how" (is "\\E x : ?z_hpk(x)")
   by (unfold z_How_z_Hov, fact z_Hov)
   have z_Hpl: "?z_hpk((CHOOSE x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&(((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))&((x=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))" (is "?z_hpn&?z_hpo")
   by (rule zenon_ex_choose_0 [of "?z_hpk", OF z_How])
   have z_Hpo: "?z_hpo" (is "?z_hob&?z_hpp")
   by (rule zenon_and_1 [OF z_Hpl])
   have z_Hpp: "?z_hpp" (is "?z_hoe&?z_hpq")
   by (rule zenon_and_1 [OF z_Hpo])
   have z_Hpq: "?z_hpq" (is "?z_hpb&?z_hpr")
   by (rule zenon_and_1 [OF z_Hpp])
   have z_Hpr: "?z_hpr" (is "?z_hpd&?z_hps")
   by (rule zenon_and_1 [OF z_Hpq])
   have z_Hps: "?z_hps" (is "?z_hpt&?z_hpu")
   by (rule zenon_and_1 [OF z_Hpr])
   have z_Hpu: "?z_hpu" (is "?z_hpv&?z_hoo")
   by (rule zenon_and_1 [OF z_Hps])
   have z_Hoo: "?z_hoo" (is "?z_hop&?z_hcv")
   by (rule zenon_and_1 [OF z_Hpu])
   have z_Hcv: "?z_hcv" (is "?z_hcw&?z_hcy")
   by (rule zenon_and_1 [OF z_Hoo])
   have z_Hcy: "?z_hcy"
   by (rule zenon_and_1 [OF z_Hcv])
   show FALSE
   by (rule zenon_L1_ [OF z_Hf z_Hm z_Hcy])
  next
   assume z_Hef:"?z_hef" (is "?z_heg|?z_hfy")
   show FALSE
   proof (rule zenon_or [OF z_Hef])
    assume z_Heg:"?z_heg"
    have z_Hpw_z_Heg: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_heg" (is "?z_hpw == _")
    by (unfold bEx_def)
    have z_Hpw: "?z_hpw" (is "\\E x : ?z_hqy(x)")
    by (unfold z_Hpw_z_Heg, fact z_Heg)
    have z_Hqz: "?z_hqy((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hrb&?z_hrc")
    by (rule zenon_ex_choose_0 [of "?z_hqy", OF z_Hpw])
    have z_Hrc: "?z_hrc"
    by (rule zenon_and_1 [OF z_Hqz])
    have z_Hrd_z_Hrc: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hrc" (is "?z_hrd == _")
    by (unfold bEx_def)
    have z_Hrd: "?z_hrd" (is "\\E x : ?z_hsn(x)")
    by (unfold z_Hrd_z_Hrc, fact z_Hrc)
    have z_Hso: "?z_hsn((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hsq&?z_hsr")
    by (rule zenon_ex_choose_0 [of "?z_hsn", OF z_Hrd])
    have z_Hsr: "?z_hsr"
    by (rule zenon_and_1 [OF z_Hso])
    have z_Hss_z_Hsr: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hsr" (is "?z_hss == _")
    by (unfold bEx_def)
    have z_Hss: "?z_hss" (is "\\E x : ?z_htu(x)")
    by (unfold z_Hss_z_Hsr, fact z_Hsr)
    have z_Htv: "?z_htu((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_htx&?z_hty")
    by (rule zenon_ex_choose_0 [of "?z_htu", OF z_Hss])
    have z_Hty: "?z_hty" (is "?z_htz&?z_hua")
    by (rule zenon_and_1 [OF z_Htv])
    have z_Hua: "?z_hua" (is "?z_hsx&?z_hub")
    by (rule zenon_and_1 [OF z_Hty])
    have z_Hub: "?z_hub" (is "?z_hrq&?z_huc")
    by (rule zenon_and_1 [OF z_Hua])
    have z_Huc: "?z_huc" (is "?z_hta&?z_hud")
    by (rule zenon_and_1 [OF z_Hub])
    have z_Hud: "?z_hud" (is "?z_hue&?z_huf")
    by (rule zenon_and_1 [OF z_Huc])
    have z_Huf: "?z_huf" (is "?z_hug&?z_huh")
    by (rule zenon_and_1 [OF z_Hud])
    have z_Huh: "?z_huh" (is "?z_htm&?z_hui")
    by (rule zenon_and_1 [OF z_Huf])
    have z_Htm: "?z_htm" (is "_=?z_htn")
    by (rule zenon_and_0 [OF z_Huh])
    have z_Hui: "?z_hui" (is "?z_huj&?z_hfv")
    by (rule zenon_and_1 [OF z_Huh])
    have z_Huj: "?z_huj" (is "_=?z_huk")
    by (rule zenon_and_0 [OF z_Hui])
    have z_Hul: "(DOMAIN(configTerm)=Server)" (is "?z_hum=_")
    by (rule zenon_in_funcset_1 [of "configTerm" "Server" "Nat", OF z_Hba])
    show FALSE
    proof (rule zenon_notin_funcset [of "a_statehash_primea" "Server" "{Secondary, Primary}", OF z_Hf])
     assume z_Hun:"(~isAFcn(a_statehash_primea))" (is "~?z_huo")
     have z_Hup: "(~isAFcn(?z_htn))" (is "~?z_huq")
     by (rule subst [where P="(\<lambda>zenon_Vgi. (~isAFcn(zenon_Vgi)))", OF z_Htm z_Hun])
     show FALSE
     by (rule zenon_notisafcn_fcn [of "Server" "(\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hrq&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), Secondary, (state[s_1]))))", OF z_Hup])
    next
     assume z_Huv:"(DOMAIN(a_statehash_primea)~=Server)" (is "?z_huw~=_")
     have z_Hux: "(DOMAIN(?z_htn)~=Server)" (is "?z_huy~=_")
     by (rule subst [where P="(\<lambda>zenon_Vki. (DOMAIN(zenon_Vki)~=Server))", OF z_Htm z_Huv])
     have z_Hvd: "(Server~=Server)"
     by (rule zenon_domain_fcn_0 [of "(\<lambda>zenon_Vji. (zenon_Vji~=Server))" "Server" "(\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hrq&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), Secondary, (state[s_1]))))", OF z_Hux])
     show FALSE
     by (rule zenon_noteq [OF z_Hvd])
    next
     assume z_Hvh:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))" (is "~(\\A x : ?z_hvo(x))")
     have z_Hvp: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))" (is "\\E x : ?z_hvr(x)")
     by (rule zenon_notallex_0 [of "?z_hvo", OF z_Hvh])
     have z_Hvs: "?z_hvr((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "~(?z_hvu=>?z_hvv)")
     by (rule zenon_ex_choose_0 [of "?z_hvr", OF z_Hvp])
     have z_Hvu: "?z_hvu"
     by (rule zenon_notimply_0 [OF z_Hvs])
     have z_Hvw: "(~?z_hvv)"
     by (rule zenon_notimply_1 [OF z_Hvs])
     have z_Hvx: "((a_statehash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))])~=Secondary)" (is "?z_hvy~=_")
     by (rule zenon_notin_addElt_0 [of "?z_hvy" "Secondary" "{Primary}", OF z_Hvw])
     have z_Hwa: "(~(?z_hvy \\in {Primary}))" (is "~?z_hwb")
     by (rule zenon_notin_addElt_1 [of "?z_hvy" "Secondary" "{Primary}", OF z_Hvw])
     have z_Hwc: "(?z_hvy~=Primary)"
     by (rule zenon_notin_addElt_0 [of "?z_hvy" "Primary" "{}", OF z_Hwa])
     have z_Hwe: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))) \\in ?z_hum)" (is "?z_hwe")
     by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))) \\in zenon_Vxc))", OF z_Hul z_Hvu])
     have z_Hwi: "(\\A zenon_Vx:((zenon_Vx \\in Server)=>((state[zenon_Vx]) \\in {Secondary, Primary})))" (is "\\A x : ?z_hwo(x)")
     by (rule zenon_in_funcset_2 [of "state" "Server" "{Secondary, Primary}", OF z_Hm])
     have z_Hwp: "?z_hwo((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "_=>?z_hwq")
     by (rule zenon_all_0 [of "?z_hwo" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))", OF z_Hwi])
     show FALSE
     proof (rule zenon_imply [OF z_Hwp])
      assume z_Hwr:"(~?z_hvu)"
      show FALSE
      by (rule notE [OF z_Hwr z_Hvu])
     next
      assume z_Hwq:"?z_hwq"
      show FALSE
      proof (rule notE [OF z_Hvw])
       have z_Hws: "((state[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))])=?z_hvy)" (is "?z_hwt=_")
       proof (rule zenon_nnpp [of "(?z_hwt=?z_hvy)"])
        assume z_Hwu:"(?z_hwt~=?z_hvy)"
        have z_Hwv: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_huk))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_huk)))&(\\A zenon_Vhj:((a_configTermhash_primea[zenon_Vhj])=(?z_huk[zenon_Vhj]))))" (is "?z_hww&?z_hxd")
        by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_huk", OF z_Huj])
        have z_Hxd: "?z_hxd" (is "\\A x : ?z_hxi(x)")
        by (rule zenon_and_1 [OF z_Hwv])
        have z_Hxj: "?z_hxi((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "?z_hxk=?z_hxl")
        by (rule zenon_all_0 [of "?z_hxi" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))", OF z_Hxd])
        show FALSE
        proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vty. (?z_hxk=zenon_Vty))" "configTerm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))" "(CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hsx&(?z_hrq&(?z_hta&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hrq&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hrq&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_htm&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x))&?z_hfv))))))))))" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))", OF z_Hxj])
         assume z_Hwe:"?z_hwe"
         assume z_Hxp:"((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "?z_hra=?z_hvt")
         assume z_Hxq:"(?z_hxk=(CHOOSE x:((x \\in Term)&((x=((currentTerm[?z_hra]) + 1))&(?z_hsx&(?z_hrq&(?z_hta&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, ?z_hra, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_htm&((a_configTermhash_primea=except(configTerm, ?z_hra, x))&?z_hfv)))))))))))" (is "_=?z_htw")
         have z_Hxr: "(((isAFcn(a_statehash_primea)<=>isAFcn(?z_htn))&(DOMAIN(a_statehash_primea)=DOMAIN(?z_htn)))&(\\A zenon_Vjj:((a_statehash_primea[zenon_Vjj])=(?z_htn[zenon_Vjj]))))" (is "?z_hxs&?z_hxv")
         by (rule zenon_funequal_0 [of "a_statehash_primea" "?z_htn", OF z_Htm])
         have z_Hxv: "?z_hxv" (is "\\A x : ?z_hya(x)")
         by (rule zenon_and_1 [OF z_Hxr])
         have z_Hyb: "?z_hya(?z_hvt)" (is "_=?z_hyc")
         by (rule zenon_all_0 [of "?z_hya" "?z_hvt", OF z_Hxv])
         show FALSE
         proof (rule zenon_fapplyfcn [of "(\<lambda>zenon_Vbi. (?z_hvy=zenon_Vbi))" "Server" "(\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, (state[s_1]))))" "?z_hvt", OF z_Hyb])
          assume z_Hwr:"(~?z_hvu)"
          show FALSE
          by (rule notE [OF z_Hwr z_Hvu])
         next
          assume z_Hyg:"(?z_hvy=cond((?z_hvt=?z_hra), Primary, cond((?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, ?z_hwt)))" (is "_=?z_hyh")
          show FALSE
          proof (rule zenon_ifthenelse [of "(\<lambda>zenon_Vbi. (?z_hvy=zenon_Vbi))" "(?z_hvt=?z_hra)" "Primary" "cond((?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, ?z_hwt)", OF z_Hyg])
           assume z_Hyi:"(?z_hvt=?z_hra)"
           assume z_Hyl:"(?z_hvy=Primary)"
           show FALSE
           by (rule notE [OF z_Hwc z_Hyl])
          next
           assume z_Hym:"(?z_hvt~=?z_hra)"
           assume z_Hyn:"(?z_hvy=cond((?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, ?z_hwt))" (is "_=?z_hyj")
           show FALSE
           by (rule zenon_eqsym [OF z_Hxp z_Hym])
          qed
         qed
        next
         assume z_Hwe:"?z_hwe"
         assume z_Hyo:"((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))~=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "?z_hra~=?z_hvt")
         assume z_Hyp:"(?z_hxk=(configTerm[?z_hvt]))" (is "_=?z_hyq")
         have z_Hxr: "(((isAFcn(a_statehash_primea)<=>isAFcn(?z_htn))&(DOMAIN(a_statehash_primea)=DOMAIN(?z_htn)))&(\\A zenon_Vjj:((a_statehash_primea[zenon_Vjj])=(?z_htn[zenon_Vjj]))))" (is "?z_hxs&?z_hxv")
         by (rule zenon_funequal_0 [of "a_statehash_primea" "?z_htn", OF z_Htm])
         have z_Hxv: "?z_hxv" (is "\\A x : ?z_hya(x)")
         by (rule zenon_and_1 [OF z_Hxr])
         have z_Hyb: "?z_hya(?z_hvt)" (is "_=?z_hyc")
         by (rule zenon_all_0 [of "?z_hya" "?z_hvt", OF z_Hxv])
         show FALSE
         proof (rule zenon_fapplyfcn [of "(\<lambda>zenon_Vbi. (?z_hvy=zenon_Vbi))" "Server" "(\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, (state[s_1]))))" "?z_hvt", OF z_Hyb])
          assume z_Hwr:"(~?z_hvu)"
          show FALSE
          by (rule notE [OF z_Hwr z_Hvu])
         next
          assume z_Hyg:"(?z_hvy=cond((?z_hvt=?z_hra), Primary, cond((?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, ?z_hwt)))" (is "_=?z_hyh")
          show FALSE
          proof (rule zenon_ifthenelse [of "(\<lambda>zenon_Vbi. (?z_hvy=zenon_Vbi))" "(?z_hvt=?z_hra)" "Primary" "cond((?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, ?z_hwt)", OF z_Hyg])
           assume z_Hyi:"(?z_hvt=?z_hra)"
           assume z_Hyl:"(?z_hvy=Primary)"
           show FALSE
           by (rule zenon_eqsym [OF z_Hyi z_Hyo])
          next
           assume z_Hym:"(?z_hvt~=?z_hra)"
           assume z_Hyn:"(?z_hvy=cond((?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))), Secondary, ?z_hwt))" (is "_=?z_hyj")
           show FALSE
           proof (rule zenon_ifthenelse [of "(\<lambda>zenon_Vbi. (?z_hvy=zenon_Vbi))" "(?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv)))))))))))))" "Secondary" "?z_hwt", OF z_Hyn])
            assume z_Hyk:"(?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv)))))))))))))" (is "?z_hyk")
            assume z_Hyr:"(?z_hvy=Secondary)"
            show FALSE
            by (rule notE [OF z_Hvx z_Hyr])
           next
            assume z_Hys:"(~(?z_hvt \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hra]) + 1))&((x \\in Quorums((config[?z_hra])))&(?z_hrq&((?z_hra \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hra, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hra), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hra, newTerm))&?z_hfv))))))))))))))" (is "~?z_hyk")
            assume z_Hyt:"(?z_hvy=?z_hwt)"
            show FALSE
            by (rule zenon_eqsym [OF z_Hyt z_Hwu])
           qed
          qed
         qed
        next
         assume z_Hyu:"(~?z_hwe)"
         show FALSE
         by (rule notE [OF z_Hyu z_Hwe])
        qed
       qed
       have z_Hvv: "?z_hvv"
       by (rule subst [where P="(\<lambda>zenon_Vgff. (zenon_Vgff \\in {Secondary, Primary}))", OF z_Hws], fact z_Hwq)
       thus "?z_hvv" .
      qed
     qed
    qed
   next
    assume z_Hfy:"?z_hfy"
    have z_Hyy_z_Hfy: "(\\E x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))) == ?z_hfy" (is "?z_hyy == _")
    by (unfold bEx_def)
    have z_Hyy: "?z_hyy" (is "\\E x : ?z_hzj(x)")
    by (unfold z_Hyy_z_Hfy, fact z_Hfy)
    have z_Hzk: "?z_hzj((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))))" (is "?z_hzm&?z_hzn")
    by (rule zenon_ex_choose_0 [of "?z_hzj", OF z_Hyy])
    have z_Hzn: "?z_hzn"
    by (rule zenon_and_1 [OF z_Hzk])
    have z_Hzo_z_Hzn: "(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))) == ?z_hzn" (is "?z_hzo == _")
    by (unfold bEx_def)
    have z_Hzo: "?z_hzo" (is "\\E x : ?z_hbad(x)")
    by (unfold z_Hzo_z_Hzn, fact z_Hzn)
    have z_Hbae: "?z_hbad((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))" (is "?z_hbag&?z_hbah")
    by (rule zenon_ex_choose_0 [of "?z_hbad", OF z_Hzo])
    have z_Hbah: "?z_hbah"
    by (rule zenon_and_1 [OF z_Hbae])
    have z_Hbai_z_Hbah: "(\\E x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))) == ?z_hbah" (is "?z_hbai == _")
    by (unfold bEx_def)
    have z_Hbai: "?z_hbai" (is "\\E x : ?z_hbav(x)")
    by (unfold z_Hbai_z_Hbah, fact z_Hbah)
    have z_Hbaw: "?z_hbav((CHOOSE x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))" (is "?z_hbay&?z_hbaz")
    by (rule zenon_ex_choose_0 [of "?z_hbav", OF z_Hbai])
    have z_Hbaz: "?z_hbaz" (is "?z_hbba&?z_hgp")
    by (rule zenon_and_1 [OF z_Hbaw])
    have z_Hbba: "?z_hbba" (is "?z_hbam&?z_hbbb")
    by (rule zenon_and_0 [OF z_Hbaz])
    have z_Hbbb: "?z_hbbb" (is "?z_hbbc&?z_hbbd")
    by (rule zenon_and_1 [OF z_Hbba])
    have z_Hbbd: "?z_hbbd" (is "?z_hbbe&?z_hbat")
    by (rule zenon_and_1 [OF z_Hbbb])
    have z_Hbat: "?z_hbat" (is "_=?z_hbau")
    by (rule zenon_and_1 [OF z_Hbbd])
    have z_Hbbf: "(DOMAIN(state)=Server)" (is "?z_hbbg=_")
    by (rule zenon_in_funcset_1 [of "state" "Server" "{Secondary, Primary}", OF z_Hm])
    show FALSE
    proof (rule zenon_notin_funcset [of "a_statehash_primea" "Server" "{Secondary, Primary}", OF z_Hf])
     assume z_Hun:"(~isAFcn(a_statehash_primea))" (is "~?z_huo")
     have z_Hbbh: "(~isAFcn(?z_hbau))" (is "~?z_hbbi")
     by (rule subst [where P="(\<lambda>zenon_Vgi. (~isAFcn(zenon_Vgi)))", OF z_Hbat z_Hun])
     show FALSE
     by (rule zenon_notisafcn_except [of "state" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))" "Secondary", OF z_Hbbh])
    next
     assume z_Huv:"(DOMAIN(a_statehash_primea)~=Server)" (is "?z_huw~=_")
     have z_Hbbj: "(DOMAIN(?z_hbau)~=Server)" (is "?z_hbbk~=_")
     by (rule subst [where P="(\<lambda>zenon_Vki. (DOMAIN(zenon_Vki)~=Server))", OF z_Hbat z_Huv])
     have z_Hbbl: "(?z_hbbg~=Server)"
     by (rule zenon_domain_except_0 [of "(\<lambda>zenon_Vji. (zenon_Vji~=Server))" "state" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))" "Secondary", OF z_Hbbj])
     show FALSE
     by (rule notE [OF z_Hbbl z_Hbbf])
    next
     assume z_Hvh:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))" (is "~(\\A x : ?z_hvo(x))")
     have z_Hvp: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))" (is "\\E x : ?z_hvr(x)")
     by (rule zenon_notallex_0 [of "?z_hvo", OF z_Hvh])
     have z_Hvs: "?z_hvr((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "~(?z_hvu=>?z_hvv)")
     by (rule zenon_ex_choose_0 [of "?z_hvr", OF z_Hvp])
     have z_Hvu: "?z_hvu"
     by (rule zenon_notimply_0 [OF z_Hvs])
     have z_Hvw: "(~?z_hvv)"
     by (rule zenon_notimply_1 [OF z_Hvs])
     have z_Hvx: "((a_statehash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))])~=Secondary)" (is "?z_hvy~=_")
     by (rule zenon_notin_addElt_0 [of "?z_hvy" "Secondary" "{Primary}", OF z_Hvw])
     have z_Hbbm: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))) \\in ?z_hbbg)" (is "?z_hbbm")
     by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))) \\in zenon_Vxc))", OF z_Hbbf z_Hvu])
     have z_Hwi: "(\\A zenon_Vx:((zenon_Vx \\in Server)=>((state[zenon_Vx]) \\in {Secondary, Primary})))" (is "\\A x : ?z_hwo(x)")
     by (rule zenon_in_funcset_2 [of "state" "Server" "{Secondary, Primary}", OF z_Hm])
     have z_Hwp: "?z_hwo((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "_=>?z_hwq")
     by (rule zenon_all_0 [of "?z_hwo" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))", OF z_Hwi])
     show FALSE
     proof (rule zenon_imply [OF z_Hwp])
      assume z_Hwr:"(~?z_hvu)"
      show FALSE
      by (rule notE [OF z_Hwr z_Hvu])
     next
      assume z_Hwq:"?z_hwq"
      show FALSE
      proof (rule notE [OF z_Hvw])
       have z_Hws: "((state[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))])=?z_hvy)" (is "?z_hwt=_")
       proof (rule zenon_nnpp [of "(?z_hwt=?z_hvy)"])
        assume z_Hwu:"(?z_hwt~=?z_hvy)"
        have z_Hbbn: "(((isAFcn(a_statehash_primea)<=>isAFcn(?z_hbau))&(DOMAIN(a_statehash_primea)=DOMAIN(?z_hbau)))&(\\A zenon_Vsa:((a_statehash_primea[zenon_Vsa])=(?z_hbau[zenon_Vsa]))))" (is "?z_hbbo&?z_hbbr")
        by (rule zenon_funequal_0 [of "a_statehash_primea" "?z_hbau", OF z_Hbat])
        have z_Hbbr: "?z_hbbr" (is "\\A x : ?z_hbbw(x)")
        by (rule zenon_and_1 [OF z_Hbbn])
        have z_Hbbx: "?z_hbbw((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "_=?z_hbby")
        by (rule zenon_all_0 [of "?z_hbbw" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))", OF z_Hbbr])
        show FALSE
        proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vbi. (?z_hvy=zenon_Vbi))" "state" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))" "Secondary" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary}))))", OF z_Hbbx])
         assume z_Hbbm:"?z_hbbm"
         assume z_Hbbz:"((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "?z_hbaf=?z_hvt")
         assume z_Hyr:"(?z_hvy=Secondary)"
         show FALSE
         by (rule notE [OF z_Hvx z_Hyr])
        next
         assume z_Hbbm:"?z_hbbm"
         assume z_Hbca:"((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))~=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_statehash_primea[zenon_Vh]) \\in {Secondary, Primary})))))" (is "?z_hbaf~=?z_hvt")
         assume z_Hyt:"(?z_hvy=?z_hwt)"
         show FALSE
         by (rule zenon_eqsym [OF z_Hyt z_Hwu])
        next
         assume z_Hbcb:"(~?z_hbbm)"
         show FALSE
         by (rule notE [OF z_Hbcb z_Hbbm])
        qed
       qed
       have z_Hvv: "?z_hvv"
       by (rule subst [where P="(\<lambda>zenon_Vgff. (zenon_Vgff \\in {Secondary, Primary}))", OF z_Hws], fact z_Hwq)
       thus "?z_hvv" .
      qed
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 118"; *} qed
lemma ob'117:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition IndAuto suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'144: "(((Term) = (Nat)))"
assumes v'145: "(((Version) = (Nat)))"
assumes v'148: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'158: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
assumes v'159: "((\<exists> s \<in> (Server) : (\<exists> newConfig \<in> ((SUBSET (Server))) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (s))) = (Primary))) & ((ConfigQuorumCheck ((s)))) & ((TermQuorumCheck ((s)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (s))))) \<union> (((fapply ((config), (s))) \\ (newConfig)))))))))) & (((s) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (fapply ((currentTerm), (s)))]))) & ((greater ((newVersion), (fapply ((configVersion), (s)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s)] = (newConfig)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (t))) = (Secondary))) & ((IsNewerConfig ((s), (t)))) & (((newTerm) = (fapply ((configTerm), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (newTerm)]))) & (((newVersion) = (fapply ((configVersion), (s))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(t)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(t)] = (fapply ((config), (s)))]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))))))) | (\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : ((((greater ((fapply ((currentTerm), (s))), (fapply ((currentTerm), (t)))))) & (((newTerm) = (fapply ((currentTerm), (s))))) & ((((a_currentTermhash_primea :: c)) = ([(currentTerm) EXCEPT ![(t)] = (newTerm)]))) & ((((a_statehash_primea :: c)) = ([(state) EXCEPT ![(t)] = (Secondary)])))) & (((((a_configVersionhash_primea :: c)) = (configVersion))) & ((((a_configTermhash_primea :: c)) = (configTerm))) & ((((a_confighash_primea :: c)) = (config)))))))))"
shows "((((a_currentTermhash_primea :: c)) \<in> ([(Server) \<rightarrow> (Nat)])))"(is "PROP ?ob'117")
proof -
ML_command {* writeln "*** TLAPS ENTER 117"; *}
show "PROP ?ob'117"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_61923b.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_61923b.znn.out
;; obligation #117
$hyp "v'144" (= Term arith.N)
$hyp "v'145" (= Version
arith.N)
$hyp "v'148" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'158" (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))
$hyp "v'159" (\/ (TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((newConfig) (TLA.bEx Version ((newVersion) (/\ (= (TLA.fapply state s)
Primary) (ConfigQuorumCheck s) (TermQuorumCheck s) (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig (TLA.fapply config s))
(TLA.setminus (TLA.fapply config s) newConfig)))) (TLA.in s newConfig)
(-. (= newConfig (TLA.fapply config s))) (= a_configTermhash_primea
(TLA.except configTerm s (TLA.fapply currentTerm s)))
(arith.lt (TLA.fapply configVersion s) newVersion)
(= a_configVersionhash_primea (TLA.except configVersion s newVersion))
(= a_confighash_primea (TLA.except config s newConfig))
(/\ (= a_currentTermhash_primea currentTerm) (= a_statehash_primea
state)))))))))
(TLA.bEx Server ((s) (TLA.bEx Server ((t) (TLA.bEx Term ((newTerm) (TLA.bEx Version ((newVersion) (/\ (= (TLA.fapply state t)
Secondary) (IsNewerConfig s t) (= newTerm (TLA.fapply configTerm s))
(= a_configTermhash_primea (TLA.except configTerm t newTerm)) (= newVersion
(TLA.fapply configVersion s)) (= a_configVersionhash_primea
(TLA.except configVersion t newVersion)) (= a_confighash_primea
(TLA.except config t (TLA.fapply config s))) (/\ (= a_currentTermhash_primea
currentTerm) (= a_statehash_primea state)))))))))))
(TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) newTerm (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion)))))))))
(TLA.bEx Server ((s) (TLA.bEx Server ((t) (TLA.bEx Term ((newTerm) (/\ (/\ (arith.lt (TLA.fapply currentTerm t)
(TLA.fapply currentTerm s)) (= newTerm (TLA.fapply currentTerm s))
(= a_currentTermhash_primea (TLA.except currentTerm t newTerm))
(= a_statehash_primea (TLA.except state t Secondary)))
(/\ (= a_configVersionhash_primea configVersion) (= a_configTermhash_primea
configTerm) (= a_confighash_primea
config))))))))))
$goal (TLA.in a_currentTermhash_primea
(TLA.FuncSet Server arith.N))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))" (is "?z_hg&?z_hl")
 using v'158 by blast
 have z_He:"(bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[s])=Primary)&(ConfigQuorumCheck(s)&(TermQuorumCheck(s)&((1=Cardinality(((newConfig \\ (config[s])) \\cup ((config[s]) \\ newConfig))))&((s \\in newConfig)&((newConfig~=(config[s]))&((a_configTermhash_primea=except(configTerm, s, (currentTerm[s])))&(((configVersion[s]) < newVersion)&((a_configVersionhash_primea=except(configVersion, s, newVersion))&((a_confighash_primea=except(config, s, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))|(bEx(Server, (\<lambda>s. bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(s, t)&((newTerm=(configTerm[s]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[s]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[s])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))|(bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))|bEx(Server, (\<lambda>s. bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[s]))&((newTerm=(currentTerm[s]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))))))" (is "?z_hbc|?z_hda")
 using v'159 by blast
 have z_Ha:"(Term=Nat)"
 using v'144 by blast
 have zenon_L1_: "(~(a_currentTermhash_primea \\in FuncSet(Server, Nat))) ==> ?z_hg ==> (a_currentTermhash_primea=currentTerm) ==> FALSE" (is "?z_hf ==> _ ==> ?z_hcw ==> FALSE")
 proof -
  assume z_Hf:"?z_hf" (is "~?z_hgs")
  assume z_Hg:"?z_hg"
  assume z_Hcw:"?z_hcw"
  show FALSE
  proof (rule notE [OF z_Hf])
   have z_Hgt: "(currentTerm=a_currentTermhash_primea)"
   by (rule sym [OF z_Hcw])
   have z_Hgs: "?z_hgs"
   by (rule subst [where P="(\<lambda>zenon_Vtfi. (zenon_Vtfi \\in FuncSet(Server, Nat)))", OF z_Hgt], fact z_Hg)
   thus "?z_hgs" .
  qed
 qed
 have zenon_L2_: "((CHOOSE x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))])) ==> ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in Server) ==> (~((a_currentTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))]) \\in Nat)) ==> ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in DOMAIN(state)) ==> ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in DOMAIN(currentTerm)) ==> (a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), (CHOOSE x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))) ==> (a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)) ==> ?z_hg ==> ((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))])~=(a_currentTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))])) ==> FALSE" (is "?z_hgx ==> ?z_hip ==> ?z_hix ==> ?z_hja ==> ?z_hjc ==> ?z_hje ==> ?z_hin ==> _ ==> ?z_hjg ==> FALSE")
 proof -
  assume z_Hgx:"?z_hgx" (is "?z_hgy=?z_hhp")
  assume z_Hip:"?z_hip"
  assume z_Hix:"?z_hix" (is "~?z_hiy")
  assume z_Hja:"?z_hja"
  assume z_Hjc:"?z_hjc"
  assume z_Hje:"?z_hje" (is "_=?z_hjf")
  assume z_Hin:"?z_hin" (is "_=?z_hio")
  assume z_Hg:"?z_hg"
  assume z_Hjg:"?z_hjg" (is "_~=?z_hiz")
  show FALSE
  proof (rule zenon_em [of "(?z_hiz=?z_hiz)"])
   assume z_Hjh:"(?z_hiz=?z_hiz)"
   show FALSE
   proof (rule notE [OF z_Hjg])
    have z_Hji: "(?z_hiz=?z_hhp)"
    proof (rule zenon_nnpp [of "(?z_hiz=?z_hhp)"])
     assume z_Hjj:"(?z_hiz~=?z_hhp)"
     show FALSE
     proof (rule notE [OF z_Hjj])
      have z_Hjk: "(?z_hgy=?z_hiz)"
      proof (rule zenon_nnpp [of "(?z_hgy=?z_hiz)"])
       assume z_Hjl:"(?z_hgy~=?z_hiz)"
       show FALSE
       proof (rule zenon_em [of "(?z_hiz=?z_hiz)"])
        assume z_Hjh:"(?z_hiz=?z_hiz)"
        show FALSE
        proof (rule notE [OF z_Hjl])
         have z_Hjm: "(?z_hiz=?z_hgy)"
         proof (rule zenon_nnpp [of "(?z_hiz=?z_hgy)"])
          assume z_Hjn:"(?z_hiz~=?z_hgy)"
          have z_Hjo: "(\\A zenon_Vaa:((zenon_Vaa \\in Server)=>((currentTerm[zenon_Vaa]) \\in Nat)))" (is "\\A x : ?z_hju(x)")
          by (rule zenon_in_funcset_2 [of "currentTerm" "Server" "Nat", OF z_Hg])
          have z_Hjv: "?z_hju((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=>?z_hjw")
          by (rule zenon_all_0 [of "?z_hju" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hjo])
          show FALSE
          proof (rule zenon_imply [OF z_Hjv])
           assume z_Hjx:"(~?z_hip)"
           show FALSE
           by (rule notE [OF z_Hjx z_Hip])
          next
           assume z_Hjw:"?z_hjw"
           show FALSE
           proof (rule notE [OF z_Hix])
            have z_Hjy: "((currentTerm[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))])=?z_hiz)" (is "?z_hjz=_")
            proof (rule zenon_nnpp [of "(?z_hjz=?z_hiz)"])
             assume z_Hka:"(?z_hjz~=?z_hiz)"
             have z_Hkb: "(((isAFcn(a_statehash_primea)<=>isAFcn(?z_hio))&(DOMAIN(a_statehash_primea)=DOMAIN(?z_hio)))&(\\A zenon_Vsa:((a_statehash_primea[zenon_Vsa])=(?z_hio[zenon_Vsa]))))" (is "?z_hkc&?z_hkj")
             by (rule zenon_funequal_0 [of "a_statehash_primea" "?z_hio", OF z_Hin])
             have z_Hkj: "?z_hkj" (is "\\A x : ?z_hko(x)")
             by (rule zenon_and_1 [OF z_Hkb])
             have z_Hkp: "?z_hko((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hkq=?z_hkr")
             by (rule zenon_all_0 [of "?z_hko" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hkj])
             show FALSE
             proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vrj. (?z_hkq=zenon_Vrj))" "state" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < ?z_hhp)&((newTerm=?z_hhp)&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))" "Secondary" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hkp])
              assume z_Hja:"?z_hja"
              assume z_Hkv:"((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < ?z_hhp)&((newTerm=?z_hhp)&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hhg=?z_hiq")
              assume z_Hkw:"(?z_hkq=Secondary)"
              have z_Hkx: "(((isAFcn(a_currentTermhash_primea)<=>isAFcn(?z_hjf))&(DOMAIN(a_currentTermhash_primea)=DOMAIN(?z_hjf)))&(\\A zenon_Vua:((a_currentTermhash_primea[zenon_Vua])=(?z_hjf[zenon_Vua]))))" (is "?z_hky&?z_hlf")
              by (rule zenon_funequal_0 [of "a_currentTermhash_primea" "?z_hjf", OF z_Hje])
              have z_Hlf: "?z_hlf" (is "\\A x : ?z_hlk(x)")
              by (rule zenon_and_1 [OF z_Hkx])
              have z_Hll: "?z_hlk(?z_hiq)" (is "_=?z_hlm")
              by (rule zenon_all_0 [of "?z_hlk" "?z_hiq", OF z_Hlf])
              show FALSE
              proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vzv. (?z_hiz=zenon_Vzv))" "currentTerm" "?z_hhg" "?z_hgy" "?z_hiq", OF z_Hll])
               assume z_Hjc:"?z_hjc"
               assume z_Hkv:"(?z_hhg=?z_hiq)"
               assume z_Hjm:"(?z_hiz=?z_hgy)"
               show FALSE
               by (rule notE [OF z_Hjn z_Hjm])
              next
               assume z_Hjc:"?z_hjc"
               assume z_Hlq:"(?z_hhg~=?z_hiq)"
               assume z_Hlr:"(?z_hiz=?z_hjz)"
               show FALSE
               by (rule notE [OF z_Hlq z_Hkv])
              next
               assume z_Hls:"(~?z_hjc)"
               show FALSE
               by (rule notE [OF z_Hls z_Hjc])
              qed
             next
              assume z_Hja:"?z_hja"
              assume z_Hlq:"((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < ?z_hhp)&((newTerm=?z_hhp)&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))~=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hhg~=?z_hiq")
              assume z_Hlt:"(?z_hkq=(state[?z_hiq]))" (is "_=?z_hlu")
              have z_Hkx: "(((isAFcn(a_currentTermhash_primea)<=>isAFcn(?z_hjf))&(DOMAIN(a_currentTermhash_primea)=DOMAIN(?z_hjf)))&(\\A zenon_Vua:((a_currentTermhash_primea[zenon_Vua])=(?z_hjf[zenon_Vua]))))" (is "?z_hky&?z_hlf")
              by (rule zenon_funequal_0 [of "a_currentTermhash_primea" "?z_hjf", OF z_Hje])
              have z_Hlf: "?z_hlf" (is "\\A x : ?z_hlk(x)")
              by (rule zenon_and_1 [OF z_Hkx])
              have z_Hll: "?z_hlk(?z_hiq)" (is "_=?z_hlm")
              by (rule zenon_all_0 [of "?z_hlk" "?z_hiq", OF z_Hlf])
              show FALSE
              proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vzv. (?z_hiz=zenon_Vzv))" "currentTerm" "?z_hhg" "?z_hgy" "?z_hiq", OF z_Hll])
               assume z_Hjc:"?z_hjc"
               assume z_Hkv:"(?z_hhg=?z_hiq)"
               assume z_Hjm:"(?z_hiz=?z_hgy)"
               show FALSE
               by (rule notE [OF z_Hlq z_Hkv])
              next
               assume z_Hjc:"?z_hjc"
               assume z_Hlq:"(?z_hhg~=?z_hiq)"
               assume z_Hlr:"(?z_hiz=?z_hjz)"
               show FALSE
               by (rule zenon_eqsym [OF z_Hlr z_Hka])
              next
               assume z_Hls:"(~?z_hjc)"
               show FALSE
               by (rule notE [OF z_Hls z_Hjc])
              qed
             next
              assume z_Hlv:"(~?z_hja)"
              show FALSE
              by (rule notE [OF z_Hlv z_Hja])
             qed
            qed
            have z_Hiy: "?z_hiy"
            by (rule subst [where P="(\<lambda>zenon_Vufi. (zenon_Vufi \\in Nat))", OF z_Hjy], fact z_Hjw)
            thus "?z_hiy" .
           qed
          qed
         qed
         have z_Hjk: "(?z_hgy=?z_hiz)"
         by (rule subst [where P="(\<lambda>zenon_Vvfi. (zenon_Vvfi=?z_hiz))", OF z_Hjm], fact z_Hjh)
         thus "(?z_hgy=?z_hiz)" .
        qed
       next
        assume z_Hmc:"(?z_hiz~=?z_hiz)"
        show FALSE
        by (rule zenon_noteq [OF z_Hmc])
       qed
      qed
      have z_Hji: "(?z_hiz=?z_hhp)"
      by (rule subst [where P="(\<lambda>zenon_Vwfi. (zenon_Vwfi=?z_hhp))", OF z_Hjk], fact z_Hgx)
      thus "(?z_hiz=?z_hhp)" .
     qed
    qed
    have z_Hmg: "(?z_hhp=?z_hiz)"
    by (rule subst [where P="(\<lambda>zenon_Vvfi. (zenon_Vvfi=?z_hiz))", OF z_Hji], fact z_Hjh)
    thus "(?z_hhp=?z_hiz)" .
   qed
  next
   assume z_Hmc:"(?z_hiz~=?z_hiz)"
   show FALSE
   by (rule zenon_noteq [OF z_Hmc])
  qed
 qed
 assume z_Hf:"(~(a_currentTermhash_primea \\in FuncSet(Server, Nat)))" (is "~?z_hgs")
 have z_Hg: "?z_hg"
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hl: "?z_hl" (is "?z_hm&?z_hs")
 by (rule zenon_and_1 [OF z_Hd])
 have z_Hm: "?z_hm"
 by (rule zenon_and_0 [OF z_Hl])
 show FALSE
 proof (rule zenon_or [OF z_He])
  assume z_Hbc:"?z_hbc"
  have z_Hmh_z_Hbc: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) == ?z_hbc" (is "?z_hmh == _")
  by (unfold bEx_def)
  have z_Hmh: "?z_hmh" (is "\\E x : ?z_hnr(x)")
  by (unfold z_Hmh_z_Hbc, fact z_Hbc)
  have z_Hns: "?z_hnr((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))" (is "?z_hnu&?z_hnv")
  by (rule zenon_ex_choose_0 [of "?z_hnr", OF z_Hmh])
  have z_Hnv: "?z_hnv"
  by (rule zenon_and_1 [OF z_Hns])
  have z_Hnw_z_Hnv: "(\\E x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) == ?z_hnv" (is "?z_hnw == _")
  by (unfold bEx_def)
  have z_Hnw: "?z_hnw" (is "\\E x : ?z_hpg(x)")
  by (unfold z_Hnw_z_Hnv, fact z_Hnv)
  have z_Hph: "?z_hpg((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))" (is "?z_hpj&?z_hpk")
  by (rule zenon_ex_choose_0 [of "?z_hpg", OF z_Hnw])
  have z_Hpk: "?z_hpk"
  by (rule zenon_and_1 [OF z_Hph])
  have z_Hpl_z_Hpk: "(\\E x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality((((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < x)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))) == ?z_hpk" (is "?z_hpl == _")
  by (unfold bEx_def)
  have z_Hpl: "?z_hpl" (is "\\E x : ?z_hqk(x)")
  by (unfold z_Hpl_z_Hpk, fact z_Hpk)
  have z_Hql: "?z_hqk((CHOOSE x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality((((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < x)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))" (is "?z_hqn&?z_hqo")
  by (rule zenon_ex_choose_0 [of "?z_hqk", OF z_Hpl])
  have z_Hqo: "?z_hqo" (is "?z_hoc&?z_hqp")
  by (rule zenon_and_1 [OF z_Hql])
  have z_Hqp: "?z_hqp" (is "?z_hof&?z_hqq")
  by (rule zenon_and_1 [OF z_Hqo])
  have z_Hqq: "?z_hqq" (is "?z_hoh&?z_hqr")
  by (rule zenon_and_1 [OF z_Hqp])
  have z_Hqr: "?z_hqr" (is "?z_hps&?z_hqs")
  by (rule zenon_and_1 [OF z_Hqq])
  have z_Hqs: "?z_hqs" (is "?z_hpy&?z_hqt")
  by (rule zenon_and_1 [OF z_Hqr])
  have z_Hqt: "?z_hqt" (is "?z_hqa&?z_hqu")
  by (rule zenon_and_1 [OF z_Hqs])
  have z_Hqu: "?z_hqu" (is "?z_hou&?z_hqv")
  by (rule zenon_and_1 [OF z_Hqt])
  have z_Hqv: "?z_hqv" (is "?z_hqw&?z_hqx")
  by (rule zenon_and_1 [OF z_Hqu])
  have z_Hqx: "?z_hqx" (is "?z_hqy&?z_hqh")
  by (rule zenon_and_1 [OF z_Hqv])
  have z_Hqh: "?z_hqh" (is "?z_hqi&?z_hcv")
  by (rule zenon_and_1 [OF z_Hqx])
  have z_Hcv: "?z_hcv" (is "?z_hcw&?z_hcy")
  by (rule zenon_and_1 [OF z_Hqh])
  have z_Hcw: "?z_hcw"
  by (rule zenon_and_0 [OF z_Hcv])
  show FALSE
  by (rule zenon_L1_ [OF z_Hf z_Hg z_Hcw])
 next
  assume z_Hda:"?z_hda" (is "?z_hdb|?z_hef")
  show FALSE
  proof (rule zenon_or [OF z_Hda])
   assume z_Hdb:"?z_hdb"
   have z_Hqz_z_Hdb: "(\\E x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))) == ?z_hdb" (is "?z_hqz == _")
   by (unfold bEx_def)
   have z_Hqz: "?z_hqz" (is "\\E x : ?z_hru(x)")
   by (unfold z_Hqz_z_Hdb, fact z_Hdb)
   have z_Hrv: "?z_hru((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))" (is "?z_hrx&?z_hry")
   by (rule zenon_ex_choose_0 [of "?z_hru", OF z_Hqz])
   have z_Hry: "?z_hry"
   by (rule zenon_and_1 [OF z_Hrv])
   have z_Hrz_z_Hry: "(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))) == ?z_hry" (is "?z_hrz == _")
   by (unfold bEx_def)
   have z_Hrz: "?z_hrz" (is "\\E x : ?z_hsx(x)")
   by (unfold z_Hrz_z_Hry, fact z_Hry)
   have z_Hsy: "?z_hsx((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))" (is "?z_hta&?z_htb")
   by (rule zenon_ex_choose_0 [of "?z_hsx", OF z_Hrz])
   have z_Htb: "?z_htb"
   by (rule zenon_and_1 [OF z_Hsy])
   have z_Htc_z_Htb: "(\\E x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))) == ?z_htb" (is "?z_htc == _")
   by (unfold bEx_def)
   have z_Htc: "?z_htc" (is "\\E x : ?z_htx(x)")
   by (unfold z_Htc_z_Htb, fact z_Htb)
   have z_Hty: "?z_htx((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))" (is "?z_hua&?z_hub")
   by (rule zenon_ex_choose_0 [of "?z_htx", OF z_Htc])
   have z_Hub: "?z_hub"
   by (rule zenon_and_1 [OF z_Hty])
   have z_Huc_z_Hub: "(\\E x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&(((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))&((x=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))) == ?z_hub" (is "?z_huc == _")
   by (unfold bEx_def)
   have z_Huc: "?z_huc" (is "\\E x : ?z_huq(x)")
   by (unfold z_Huc_z_Hub, fact z_Hub)
   have z_Hur: "?z_huq((CHOOSE x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&(((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))&((x=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))" (is "?z_hut&?z_huu")
   by (rule zenon_ex_choose_0 [of "?z_huq", OF z_Huc])
   have z_Huu: "?z_huu" (is "?z_hth&?z_huv")
   by (rule zenon_and_1 [OF z_Hur])
   have z_Huv: "?z_huv" (is "?z_htk&?z_huw")
   by (rule zenon_and_1 [OF z_Huu])
   have z_Huw: "?z_huw" (is "?z_huh&?z_hux")
   by (rule zenon_and_1 [OF z_Huv])
   have z_Hux: "?z_hux" (is "?z_huj&?z_huy")
   by (rule zenon_and_1 [OF z_Huw])
   have z_Huy: "?z_huy" (is "?z_huz&?z_hva")
   by (rule zenon_and_1 [OF z_Hux])
   have z_Hva: "?z_hva" (is "?z_hvb&?z_htu")
   by (rule zenon_and_1 [OF z_Huy])
   have z_Htu: "?z_htu" (is "?z_htv&?z_hcv")
   by (rule zenon_and_1 [OF z_Hva])
   have z_Hcv: "?z_hcv" (is "?z_hcw&?z_hcy")
   by (rule zenon_and_1 [OF z_Htu])
   have z_Hcw: "?z_hcw"
   by (rule zenon_and_0 [OF z_Hcv])
   show FALSE
   by (rule zenon_L1_ [OF z_Hf z_Hg z_Hcw])
  next
   assume z_Hef:"?z_hef" (is "?z_heg|?z_hfy")
   show FALSE
   proof (rule zenon_or [OF z_Hef])
    assume z_Heg:"?z_heg"
    have z_Hvc_z_Heg: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_heg" (is "?z_hvc == _")
    by (unfold bEx_def)
    have z_Hvc: "?z_hvc" (is "\\E x : ?z_hwe(x)")
    by (unfold z_Hvc_z_Heg, fact z_Heg)
    have z_Hwf: "?z_hwe((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hwh&?z_hwi")
    by (rule zenon_ex_choose_0 [of "?z_hwe", OF z_Hvc])
    have z_Hwi: "?z_hwi"
    by (rule zenon_and_1 [OF z_Hwf])
    have z_Hwj_z_Hwi: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hwi" (is "?z_hwj == _")
    by (unfold bEx_def)
    have z_Hwj: "?z_hwj" (is "\\E x : ?z_hxt(x)")
    by (unfold z_Hwj_z_Hwi, fact z_Hwi)
    have z_Hxu: "?z_hxt((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hxw&?z_hxx")
    by (rule zenon_ex_choose_0 [of "?z_hxt", OF z_Hwj])
    have z_Hxx: "?z_hxx"
    by (rule zenon_and_1 [OF z_Hxu])
    have z_Hxy_z_Hxx: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hxx" (is "?z_hxy == _")
    by (unfold bEx_def)
    have z_Hxy: "?z_hxy" (is "\\E x : ?z_hza(x)")
    by (unfold z_Hxy_z_Hxx, fact z_Hxx)
    have z_Hzb: "?z_hza((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hzd&?z_hze")
    by (rule zenon_ex_choose_0 [of "?z_hza", OF z_Hxy])
    have z_Hze: "?z_hze" (is "?z_hzf&?z_hzg")
    by (rule zenon_and_1 [OF z_Hzb])
    have z_Hzg: "?z_hzg" (is "?z_hyd&?z_hzh")
    by (rule zenon_and_1 [OF z_Hze])
    have z_Hzh: "?z_hzh" (is "?z_hww&?z_hzi")
    by (rule zenon_and_1 [OF z_Hzg])
    have z_Hzi: "?z_hzi" (is "?z_hyg&?z_hzj")
    by (rule zenon_and_1 [OF z_Hzh])
    have z_Hzj: "?z_hzj" (is "?z_hzk&?z_hzl")
    by (rule zenon_and_1 [OF z_Hzi])
    have z_Hzl: "?z_hzl" (is "?z_hzm&?z_hzn")
    by (rule zenon_and_1 [OF z_Hzj])
    have z_Hzm: "?z_hzm" (is "_=?z_hzo")
    by (rule zenon_and_0 [OF z_Hzl])
    have z_Hzp: "bEx(Nat, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))" (is "?z_hzp")
    by (rule subst [where P="(\<lambda>zenon_Vsfi. bEx(zenon_Vsfi, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))", OF z_Ha z_Hxx])
    have z_Hbag_z_Hzp: "(\\E x:((x \\in Nat)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hzp" (is "?z_hbag == _")
    by (unfold bEx_def)
    have z_Hbag: "?z_hbag" (is "\\E x : ?z_hbaj(x)")
    by (unfold z_Hbag_z_Hzp, fact z_Hzp)
    have z_Hbak: "?z_hbaj((CHOOSE x:((x \\in Nat)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hbam&?z_hban")
    by (rule zenon_ex_choose_0 [of "?z_hbaj", OF z_Hbag])
    have z_Hbam: "?z_hbam"
    by (rule zenon_and_0 [OF z_Hbak])
    have z_Hban: "?z_hban" (is "?z_hbao&?z_hbap")
    by (rule zenon_and_1 [OF z_Hbak])
    have z_Hbap: "?z_hbap" (is "_&?z_hbaq")
    by (rule zenon_and_1 [OF z_Hban])
    have z_Hbaq: "?z_hbaq" (is "_&?z_hbar")
    by (rule zenon_and_1 [OF z_Hbap])
    have z_Hbar: "?z_hbar" (is "_&?z_hbas")
    by (rule zenon_and_1 [OF z_Hbaq])
    have z_Hbas: "?z_hbas" (is "?z_hbat&?z_hbau")
    by (rule zenon_and_1 [OF z_Hbar])
    have z_Hbau: "?z_hbau" (is "?z_hbav&?z_hbaw")
    by (rule zenon_and_1 [OF z_Hbas])
    have z_Hbav: "?z_hbav" (is "_=?z_hbax")
    by (rule zenon_and_0 [OF z_Hbau])
    show FALSE
    proof (rule zenon_notin_funcset [of "a_currentTermhash_primea" "Server" "Nat", OF z_Hf])
     assume z_Hbay:"(~isAFcn(a_currentTermhash_primea))" (is "~?z_hla")
     have z_Hbaz: "(~isAFcn(?z_hzo))" (is "~?z_hbba")
     by (rule subst [where P="(\<lambda>zenon_Vkoa. (~isAFcn(zenon_Vkoa)))", OF z_Hzm z_Hbay])
     show FALSE
     by (rule zenon_notisafcn_fcn [of "Server" "(\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))), (currentTerm[s_1])))", OF z_Hbaz])
    next
     assume z_Hbbh:"(DOMAIN(a_currentTermhash_primea)~=Server)" (is "?z_hld~=_")
     have z_Hbbi: "(DOMAIN(?z_hzo)~=Server)" (is "?z_hbbj~=_")
     by (rule subst [where P="(\<lambda>zenon_Vooa. (DOMAIN(zenon_Vooa)~=Server))", OF z_Hzm z_Hbbh])
     have z_Hbbo: "(Server~=Server)"
     by (rule zenon_domain_fcn_0 [of "(\<lambda>zenon_Vnoa. (zenon_Vnoa~=Server))" "Server" "(\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))), (currentTerm[s_1])))", OF z_Hbbi])
     show FALSE
     by (rule zenon_noteq [OF z_Hbbo])
    next
     assume z_Hbbs:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))" (is "~(\\A x : ?z_hbbu(x))")
     have z_Hbbv: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))" (is "\\E x : ?z_hbbw(x)")
     by (rule zenon_notallex_0 [of "?z_hbbu", OF z_Hbbs])
     have z_Hbbx: "?z_hbbw((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "~(?z_hip=>?z_hiy)")
     by (rule zenon_ex_choose_0 [of "?z_hbbw", OF z_Hbbv])
     have z_Hip: "?z_hip"
     by (rule zenon_notimply_0 [OF z_Hbbx])
     have z_Hix: "(~?z_hiy)"
     by (rule zenon_notimply_1 [OF z_Hbbx])
     have z_Hjo: "(\\A zenon_Vaa:((zenon_Vaa \\in Server)=>((currentTerm[zenon_Vaa]) \\in Nat)))" (is "\\A x : ?z_hju(x)")
     by (rule zenon_in_funcset_2 [of "currentTerm" "Server" "Nat", OF z_Hg])
     have z_Hjv: "?z_hju((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=>?z_hjw")
     by (rule zenon_all_0 [of "?z_hju" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hjo])
     show FALSE
     proof (rule zenon_imply [OF z_Hjv])
      assume z_Hjx:"(~?z_hip)"
      show FALSE
      by (rule notE [OF z_Hjx z_Hip])
     next
      assume z_Hjw:"?z_hjw"
      show FALSE
      proof (rule notE [OF z_Hix])
       have z_Hjy: "((currentTerm[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))])=(a_currentTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))]))" (is "?z_hjz=?z_hiz")
       proof (rule zenon_nnpp [of "(?z_hjz=?z_hiz)"])
        assume z_Hka:"(?z_hjz~=?z_hiz)"
        have z_Hbby: "(((isAFcn(a_currentTermhash_primea)<=>isAFcn(?z_hzo))&(DOMAIN(a_currentTermhash_primea)=DOMAIN(?z_hzo)))&(\\A zenon_Vppa:((a_currentTermhash_primea[zenon_Vppa])=(?z_hzo[zenon_Vppa]))))" (is "?z_hbbz&?z_hbcc")
        by (rule zenon_funequal_0 [of "a_currentTermhash_primea" "?z_hzo", OF z_Hzm])
        have z_Hbcc: "?z_hbcc" (is "\\A x : ?z_hbch(x)")
        by (rule zenon_and_1 [OF z_Hbby])
        have z_Hbci: "(((isAFcn(a_currentTermhash_primea)<=>isAFcn(?z_hbax))&(DOMAIN(a_currentTermhash_primea)=DOMAIN(?z_hbax)))&(\\A zenon_Vpqa:((a_currentTermhash_primea[zenon_Vpqa])=(?z_hbax[zenon_Vpqa]))))" (is "?z_hbcj&?z_hbco")
        by (rule zenon_funequal_0 [of "a_currentTermhash_primea" "?z_hbax", OF z_Hbav])
        have z_Hbco: "?z_hbco" (is "\\A x : ?z_hbct(x)")
        by (rule zenon_and_1 [OF z_Hbci])
        have z_Hbcu: "?z_hbch((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=?z_hbcv")
        by (rule zenon_all_0 [of "?z_hbch" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hbcc])
        show FALSE
        proof (rule zenon_fapplyfcn [of "(\<lambda>zenon_Vzv. (?z_hiz=zenon_Vzv))" "Server" "(\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))), (currentTerm[s_1])))" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hbcu])
         assume z_Hjx:"(~?z_hip)"
         show FALSE
         by (rule notE [OF z_Hjx z_Hip])
        next
         assume z_Hbcw:"(?z_hiz=cond(((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))), ?z_hjz))" (is "_=?z_hbcx")
         show FALSE
         proof (rule zenon_ifthenelse [of "(\<lambda>zenon_Vzv. (?z_hiz=zenon_Vzv))" "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" "(CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))" "?z_hjz", OF z_Hbcw])
          assume z_Hbcy:"((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hbcy")
          assume z_Hbcz:"(?z_hiz=(CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "_=?z_hzc")
          show FALSE
          proof (rule notE [OF z_Hix])
           have z_Hbda: "((CHOOSE x:((x \\in Nat)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(?z_hyd&(?z_hww&(?z_hyg&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))=?z_hiz)" (is "?z_hbal=_")
           proof (rule zenon_nnpp [of "(?z_hbal=?z_hiz)"])
            assume z_Hbdb:"(?z_hbal~=?z_hiz)"
            have z_Hbdc: "?z_hbct((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=?z_hbdd")
            by (rule zenon_all_0 [of "?z_hbct" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hbco])
            show FALSE
            proof (rule zenon_fapplyfcn [of "(\<lambda>zenon_Vzv. (?z_hiz=zenon_Vzv))" "Server" "(\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), ?z_hbal, (currentTerm[s_1])))" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hbdc])
             assume z_Hjx:"(~?z_hip)"
             show FALSE
             by (rule notE [OF z_Hjx z_Hip])
            next
             assume z_Hbdg:"(?z_hiz=cond(?z_hbcy, ?z_hbal, ?z_hjz))" (is "_=?z_hbdh")
             show FALSE
             proof (rule zenon_ifthenelse [of "(\<lambda>zenon_Vzv. (?z_hiz=zenon_Vzv))" "?z_hbcy" "?z_hbal" "?z_hjz", OF z_Hbdg])
              assume z_Hbcy:"?z_hbcy"
              assume z_Hbdi:"(?z_hiz=?z_hbal)"
              show FALSE
              by (rule zenon_eqsym [OF z_Hbdi z_Hbdb])
             next
              assume z_Hbdj:"(~?z_hbcy)"
              assume z_Hlr:"(?z_hiz=?z_hjz)"
              show FALSE
              by (rule notE [OF z_Hbdj z_Hbcy])
             qed
            qed
           qed
           have z_Hiy: "?z_hiy"
           by (rule subst [where P="(\<lambda>zenon_Vufi. (zenon_Vufi \\in Nat))", OF z_Hbda], fact z_Hbam)
           thus "?z_hiy" .
          qed
         next
          assume z_Hbdj:"(~((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(?z_hww&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "~?z_hbcy")
          assume z_Hlr:"(?z_hiz=?z_hjz)"
          show FALSE
          by (rule zenon_eqsym [OF z_Hlr z_Hka])
         qed
        qed
       qed
       have z_Hiy: "?z_hiy"
       by (rule subst [where P="(\<lambda>zenon_Vufi. (zenon_Vufi \\in Nat))", OF z_Hjy], fact z_Hjw)
       thus "?z_hiy" .
      qed
     qed
    qed
   next
    assume z_Hfy:"?z_hfy"
    have z_Hbdk_z_Hfy: "(\\E x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))) == ?z_hfy" (is "?z_hbdk == _")
    by (unfold bEx_def)
    have z_Hbdk: "?z_hbdk" (is "\\E x : ?z_hbdl(x)")
    by (unfold z_Hbdk_z_Hfy, fact z_Hfy)
    have z_Hbdm: "?z_hbdl((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))))" (is "?z_hbdn&?z_hbdo")
    by (rule zenon_ex_choose_0 [of "?z_hbdl", OF z_Hbdk])
    have z_Hbdn: "?z_hbdn"
    by (rule zenon_and_0 [OF z_Hbdm])
    have z_Hbdo: "?z_hbdo"
    by (rule zenon_and_1 [OF z_Hbdm])
    have z_Hbdp_z_Hbdo: "(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))) == ?z_hbdo" (is "?z_hbdp == _")
    by (unfold bEx_def)
    have z_Hbdp: "?z_hbdp" (is "\\E x : ?z_hbdq(x)")
    by (unfold z_Hbdp_z_Hbdo, fact z_Hbdo)
    have z_Hbdr: "?z_hbdq((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))" (is "?z_hbds&?z_hbdt")
    by (rule zenon_ex_choose_0 [of "?z_hbdq", OF z_Hbdp])
    have z_Hbdt: "?z_hbdt"
    by (rule zenon_and_1 [OF z_Hbdr])
    have z_Hbdu_z_Hbdt: "(\\E x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))) == ?z_hbdt" (is "?z_hbdu == _")
    by (unfold bEx_def)
    have z_Hbdu: "?z_hbdu" (is "\\E x : ?z_hbdv(x)")
    by (unfold z_Hbdu_z_Hbdt, fact z_Hbdt)
    have z_Hbdw: "?z_hbdv((CHOOSE x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))" (is "?z_hbdx&?z_hbdy")
    by (rule zenon_ex_choose_0 [of "?z_hbdv", OF z_Hbdu])
    have z_Hbdy: "?z_hbdy" (is "?z_hbdz&?z_hgp")
    by (rule zenon_and_1 [OF z_Hbdw])
    have z_Hbdz: "?z_hbdz" (is "?z_hhe&?z_hbea")
    by (rule zenon_and_0 [OF z_Hbdy])
    have z_Hbea: "?z_hbea" (is "?z_hgx&?z_hbeb")
    by (rule zenon_and_1 [OF z_Hbdz])
    have z_Hgx: "?z_hgx" (is "?z_hgy=?z_hhp")
    by (rule zenon_and_0 [OF z_Hbea])
    have z_Hbeb: "?z_hbeb" (is "?z_hje&?z_hin")
    by (rule zenon_and_1 [OF z_Hbea])
    have z_Hje: "?z_hje" (is "_=?z_hjf")
    by (rule zenon_and_0 [OF z_Hbeb])
    have z_Hin: "?z_hin" (is "_=?z_hio")
    by (rule zenon_and_1 [OF z_Hbeb])
    have z_Hbec: "(DOMAIN(currentTerm)=Server)" (is "?z_hjd=_")
    by (rule zenon_in_funcset_1 [of "currentTerm" "Server" "Nat", OF z_Hg])
    have z_Hbed: "(DOMAIN(state)=Server)" (is "?z_hjb=_")
    by (rule zenon_in_funcset_1 [of "state" "Server" "{Secondary, Primary}", OF z_Hm])
    show FALSE
    proof (rule zenon_notin_funcset [of "a_currentTermhash_primea" "Server" "Nat", OF z_Hf])
     assume z_Hbay:"(~isAFcn(a_currentTermhash_primea))" (is "~?z_hla")
     have z_Hbee: "(~isAFcn(?z_hjf))" (is "~?z_hlb")
     by (rule subst [where P="(\<lambda>zenon_Vkoa. (~isAFcn(zenon_Vkoa)))", OF z_Hje z_Hbay])
     show FALSE
     by (rule zenon_notisafcn_except [of "currentTerm" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < ?z_hhp)&((newTerm=?z_hhp)&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))" "?z_hgy", OF z_Hbee])
    next
     assume z_Hbbh:"(DOMAIN(a_currentTermhash_primea)~=Server)" (is "?z_hld~=_")
     have z_Hbef: "(DOMAIN(?z_hjf)~=Server)" (is "?z_hle~=_")
     by (rule subst [where P="(\<lambda>zenon_Vooa. (DOMAIN(zenon_Vooa)~=Server))", OF z_Hje z_Hbbh])
     have z_Hbeg: "(?z_hjd~=Server)"
     by (rule zenon_domain_except_0 [of "(\<lambda>zenon_Vnoa. (zenon_Vnoa~=Server))" "currentTerm" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < ?z_hhp)&((newTerm=?z_hhp)&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&?z_hgp)))))" "?z_hgy", OF z_Hbef])
     show FALSE
     by (rule notE [OF z_Hbeg z_Hbec])
    next
     assume z_Hbbs:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))" (is "~(\\A x : ?z_hbbu(x))")
     have z_Hbbv: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))" (is "\\E x : ?z_hbbw(x)")
     by (rule zenon_notallex_0 [of "?z_hbbu", OF z_Hbbs])
     have z_Hbbx: "?z_hbbw((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "~(?z_hip=>?z_hiy)")
     by (rule zenon_ex_choose_0 [of "?z_hbbw", OF z_Hbbv])
     have z_Hip: "?z_hip"
     by (rule zenon_notimply_0 [OF z_Hbbx])
     have z_Hix: "(~?z_hiy)"
     by (rule zenon_notimply_1 [OF z_Hbbx])
     have z_Hjc: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hjd)" (is "?z_hjc")
     by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hbec z_Hip])
     have z_Hja: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hjb)" (is "?z_hja")
     by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hbed z_Hip])
     have z_Hjo: "(\\A zenon_Vaa:((zenon_Vaa \\in Server)=>((currentTerm[zenon_Vaa]) \\in Nat)))" (is "\\A x : ?z_hju(x)")
     by (rule zenon_in_funcset_2 [of "currentTerm" "Server" "Nat", OF z_Hg])
     have z_Hbek: "?z_hju((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp))))))))" (is "_=>?z_hbel")
     by (rule zenon_all_0 [of "?z_hju" "(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&?z_hgp)))))))", OF z_Hjo])
     show FALSE
     proof (rule zenon_imply [OF z_Hbek])
      assume z_Hbem:"(~?z_hbdn)"
      show FALSE
      by (rule notE [OF z_Hbem z_Hbdn])
     next
      assume z_Hbel:"?z_hbel"
      show FALSE
      proof (rule notE [OF z_Hix])
       have z_Hmg: "(?z_hhp=(a_currentTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_currentTermhash_primea[zenon_Vh]) \\in Nat))))]))" (is "_=?z_hiz")
       proof (rule zenon_nnpp [of "(?z_hhp=?z_hiz)"])
        assume z_Hjg:"(?z_hhp~=?z_hiz)"
        show FALSE
        by (rule zenon_L2_ [OF z_Hgx z_Hip z_Hix z_Hja z_Hjc z_Hje z_Hin z_Hg z_Hjg])
       qed
       have z_Hiy: "?z_hiy"
       by (rule subst [where P="(\<lambda>zenon_Vufi. (zenon_Vufi \\in Nat))", OF z_Hmg], fact z_Hbel)
       thus "?z_hiy" .
      qed
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 117"; *} qed
lemma ob'120:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition IndAuto suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'144: "(((Term) = (Nat)))"
assumes v'145: "(((Version) = (Nat)))"
assumes v'148: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'158: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
assumes v'159: "((\<exists> s \<in> (Server) : (\<exists> newConfig \<in> ((SUBSET (Server))) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (s))) = (Primary))) & ((ConfigQuorumCheck ((s)))) & ((TermQuorumCheck ((s)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (s))))) \<union> (((fapply ((config), (s))) \\ (newConfig)))))))))) & (((s) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (fapply ((currentTerm), (s)))]))) & ((greater ((newVersion), (fapply ((configVersion), (s)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s)] = (newConfig)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (t))) = (Secondary))) & ((IsNewerConfig ((s), (t)))) & (((newTerm) = (fapply ((configTerm), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (newTerm)]))) & (((newVersion) = (fapply ((configVersion), (s))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(t)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(t)] = (fapply ((config), (s)))]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))))))) | (\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : ((((greater ((fapply ((currentTerm), (s))), (fapply ((currentTerm), (t)))))) & (((newTerm) = (fapply ((currentTerm), (s))))) & ((((a_currentTermhash_primea :: c)) = ([(currentTerm) EXCEPT ![(t)] = (newTerm)]))) & ((((a_statehash_primea :: c)) = ([(state) EXCEPT ![(t)] = (Secondary)])))) & (((((a_configVersionhash_primea :: c)) = (configVersion))) & ((((a_configTermhash_primea :: c)) = (configTerm))) & ((((a_confighash_primea :: c)) = (config)))))))))"
shows "((((a_configVersionhash_primea :: c)) \<in> ([(Server) \<rightarrow> (Nat)])))"(is "PROP ?ob'120")
proof -
ML_command {* writeln "*** TLAPS ENTER 120"; *}
show "PROP ?ob'120"
using assms by auto
ML_command {* writeln "*** TLAPS EXIT 120"; *} qed
lemma ob'119:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition IndAuto suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'144: "(((Term) = (Nat)))"
assumes v'145: "(((Version) = (Nat)))"
assumes v'148: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'158: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
assumes v'159: "((\<exists> s \<in> (Server) : (\<exists> newConfig \<in> ((SUBSET (Server))) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (s))) = (Primary))) & ((ConfigQuorumCheck ((s)))) & ((TermQuorumCheck ((s)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (s))))) \<union> (((fapply ((config), (s))) \\ (newConfig)))))))))) & (((s) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (fapply ((currentTerm), (s)))]))) & ((greater ((newVersion), (fapply ((configVersion), (s)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s)] = (newConfig)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (t))) = (Secondary))) & ((IsNewerConfig ((s), (t)))) & (((newTerm) = (fapply ((configTerm), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (newTerm)]))) & (((newVersion) = (fapply ((configVersion), (s))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(t)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(t)] = (fapply ((config), (s)))]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))))))) | (\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : ((((greater ((fapply ((currentTerm), (s))), (fapply ((currentTerm), (t)))))) & (((newTerm) = (fapply ((currentTerm), (s))))) & ((((a_currentTermhash_primea :: c)) = ([(currentTerm) EXCEPT ![(t)] = (newTerm)]))) & ((((a_statehash_primea :: c)) = ([(state) EXCEPT ![(t)] = (Secondary)])))) & (((((a_configVersionhash_primea :: c)) = (configVersion))) & ((((a_configTermhash_primea :: c)) = (configTerm))) & ((((a_confighash_primea :: c)) = (config)))))))))"
shows "((((a_confighash_primea :: c)) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))])))"(is "PROP ?ob'119")
proof -
ML_command {* writeln "*** TLAPS ENTER 119"; *}
show "PROP ?ob'119"
using assms by auto
ML_command {* writeln "*** TLAPS EXIT 119"; *} qed
lemma ob'121:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition IndAuto suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'144: "(((Term) = (Nat)))"
assumes v'145: "(((Version) = (Nat)))"
assumes v'148: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'158: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
assumes v'159: "((\<exists> s \<in> (Server) : (\<exists> newConfig \<in> ((SUBSET (Server))) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (s))) = (Primary))) & ((ConfigQuorumCheck ((s)))) & ((TermQuorumCheck ((s)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (s))))) \<union> (((fapply ((config), (s))) \\ (newConfig)))))))))) & (((s) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (fapply ((currentTerm), (s)))]))) & ((greater ((newVersion), (fapply ((configVersion), (s)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s)] = (newConfig)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : (\<exists> newVersion \<in> (Version) : ((((fapply ((state), (t))) = (Secondary))) & ((IsNewerConfig ((s), (t)))) & (((newTerm) = (fapply ((configTerm), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (newTerm)]))) & (((newVersion) = (fapply ((configVersion), (s))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(t)] = (newVersion)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(t)] = (fapply ((config), (s)))]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))))))) | (\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))) | (\<exists> s \<in> (Server) : (\<exists> t \<in> (Server) : (\<exists> newTerm \<in> (Term) : ((((greater ((fapply ((currentTerm), (s))), (fapply ((currentTerm), (t)))))) & (((newTerm) = (fapply ((currentTerm), (s))))) & ((((a_currentTermhash_primea :: c)) = ([(currentTerm) EXCEPT ![(t)] = (newTerm)]))) & ((((a_statehash_primea :: c)) = ([(state) EXCEPT ![(t)] = (Secondary)])))) & (((((a_configVersionhash_primea :: c)) = (configVersion))) & ((((a_configTermhash_primea :: c)) = (configTerm))) & ((((a_confighash_primea :: c)) = (config)))))))))"
shows "((((a_configTermhash_primea :: c)) \<in> ([(Server) \<rightarrow> (Nat)])))"(is "PROP ?ob'121")
proof -
ML_command {* writeln "*** TLAPS ENTER 121"; *}
show "PROP ?ob'121"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_50fafe.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_50fafe.znn.out
;; obligation #121
$hyp "v'144" (= Term arith.N)
$hyp "v'145" (= Version
arith.N)
$hyp "v'148" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'158" (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))
$hyp "v'159" (\/ (TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((newConfig) (TLA.bEx Version ((newVersion) (/\ (= (TLA.fapply state s)
Primary) (ConfigQuorumCheck s) (TermQuorumCheck s) (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig (TLA.fapply config s))
(TLA.setminus (TLA.fapply config s) newConfig)))) (TLA.in s newConfig)
(-. (= newConfig (TLA.fapply config s))) (= a_configTermhash_primea
(TLA.except configTerm s (TLA.fapply currentTerm s)))
(arith.lt (TLA.fapply configVersion s) newVersion)
(= a_configVersionhash_primea (TLA.except configVersion s newVersion))
(= a_confighash_primea (TLA.except config s newConfig))
(/\ (= a_currentTermhash_primea currentTerm) (= a_statehash_primea
state)))))))))
(TLA.bEx Server ((s) (TLA.bEx Server ((t) (TLA.bEx Term ((newTerm) (TLA.bEx Version ((newVersion) (/\ (= (TLA.fapply state t)
Secondary) (IsNewerConfig s t) (= newTerm (TLA.fapply configTerm s))
(= a_configTermhash_primea (TLA.except configTerm t newTerm)) (= newVersion
(TLA.fapply configVersion s)) (= a_configVersionhash_primea
(TLA.except configVersion t newVersion)) (= a_confighash_primea
(TLA.except config t (TLA.fapply config s))) (/\ (= a_currentTermhash_primea
currentTerm) (= a_statehash_primea state)))))))))))
(TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) newTerm (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion)))))))))
(TLA.bEx Server ((s) (TLA.bEx Server ((t) (TLA.bEx Term ((newTerm) (/\ (/\ (arith.lt (TLA.fapply currentTerm t)
(TLA.fapply currentTerm s)) (= newTerm (TLA.fapply currentTerm s))
(= a_currentTermhash_primea (TLA.except currentTerm t newTerm))
(= a_statehash_primea (TLA.except state t Secondary)))
(/\ (= a_configVersionhash_primea configVersion) (= a_configTermhash_primea
configTerm) (= a_confighash_primea
config))))))))))
$goal (TLA.in a_configTermhash_primea
(TLA.FuncSet Server arith.N))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))" (is "?z_hg&?z_hl")
 using v'158 by blast
 have z_He:"(bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[s])=Primary)&(ConfigQuorumCheck(s)&(TermQuorumCheck(s)&((1=Cardinality(((newConfig \\ (config[s])) \\cup ((config[s]) \\ newConfig))))&((s \\in newConfig)&((newConfig~=(config[s]))&((a_configTermhash_primea=except(configTerm, s, (currentTerm[s])))&(((configVersion[s]) < newVersion)&((a_configVersionhash_primea=except(configVersion, s, newVersion))&((a_confighash_primea=except(config, s, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))|(bEx(Server, (\<lambda>s. bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(s, t)&((newTerm=(configTerm[s]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[s]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[s])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))|(bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))|bEx(Server, (\<lambda>s. bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[s]))&((newTerm=(currentTerm[s]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))))))" (is "?z_hbc|?z_hda")
 using v'159 by blast
 have z_Ha:"(Term=Nat)"
 using v'144 by blast
 assume z_Hf:"(~(a_configTermhash_primea \\in FuncSet(Server, Nat)))" (is "~?z_hgs")
 have z_Hg: "?z_hg"
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hl: "?z_hl" (is "?z_hm&?z_hs")
 by (rule zenon_and_1 [OF z_Hd])
 have z_Hs: "?z_hs" (is "?z_ht&?z_hx")
 by (rule zenon_and_1 [OF z_Hl])
 have z_Ht: "?z_ht"
 by (rule zenon_and_0 [OF z_Hs])
 have z_Hx: "?z_hx" (is "?z_hy&?z_hba")
 by (rule zenon_and_1 [OF z_Hs])
 have z_Hba: "?z_hba"
 by (rule zenon_and_1 [OF z_Hx])
 show FALSE
 proof (rule zenon_or [OF z_He])
  assume z_Hbc:"?z_hbc"
  have z_Hgt_z_Hbc: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) == ?z_hbc" (is "?z_hgt == _")
  by (unfold bEx_def)
  have z_Hgt: "?z_hgt" (is "\\E x : ?z_hig(x)")
  by (unfold z_Hgt_z_Hbc, fact z_Hbc)
  have z_Hih: "?z_hig((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))" (is "?z_hij&?z_hik")
  by (rule zenon_ex_choose_0 [of "?z_hig", OF z_Hgt])
  have z_Hik: "?z_hik"
  by (rule zenon_and_1 [OF z_Hih])
  have z_Hil_z_Hik: "(\\E x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) == ?z_hik" (is "?z_hil == _")
  by (unfold bEx_def)
  have z_Hil: "?z_hil" (is "\\E x : ?z_hjv(x)")
  by (unfold z_Hil_z_Hik, fact z_Hik)
  have z_Hjw: "?z_hjv((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))" (is "?z_hjy&?z_hjz")
  by (rule zenon_ex_choose_0 [of "?z_hjv", OF z_Hil])
  have z_Hjz: "?z_hjz"
  by (rule zenon_and_1 [OF z_Hjw])
  have z_Hka_z_Hjz: "(\\E x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality((((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < x)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))) == ?z_hjz" (is "?z_hka == _")
  by (unfold bEx_def)
  have z_Hka: "?z_hka" (is "\\E x : ?z_hkz(x)")
  by (unfold z_Hka_z_Hjz, fact z_Hjz)
  have z_Hla: "?z_hkz((CHOOSE x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality((((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))) \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < x)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])=Primary)&(ConfigQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&(TermQuorumCheck((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))))&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), (currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))])))&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))), x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))" (is "?z_hlc&?z_hld")
  by (rule zenon_ex_choose_0 [of "?z_hkz", OF z_Hka])
  have z_Hld: "?z_hld" (is "?z_hir&?z_hle")
  by (rule zenon_and_1 [OF z_Hla])
  have z_Hle: "?z_hle" (is "?z_hiu&?z_hlf")
  by (rule zenon_and_1 [OF z_Hld])
  have z_Hlf: "?z_hlf" (is "?z_hiw&?z_hlg")
  by (rule zenon_and_1 [OF z_Hle])
  have z_Hlg: "?z_hlg" (is "?z_hkh&?z_hlh")
  by (rule zenon_and_1 [OF z_Hlf])
  have z_Hlh: "?z_hlh" (is "?z_hkn&?z_hli")
  by (rule zenon_and_1 [OF z_Hlg])
  have z_Hli: "?z_hli" (is "?z_hkp&?z_hlj")
  by (rule zenon_and_1 [OF z_Hlh])
  have z_Hlj: "?z_hlj" (is "?z_hjj&?z_hlk")
  by (rule zenon_and_1 [OF z_Hli])
  have z_Hjj: "?z_hjj" (is "_=?z_hjk")
  by (rule zenon_and_0 [OF z_Hlj])
  have z_Hlk: "?z_hlk" (is "?z_hll&?z_hlm")
  by (rule zenon_and_1 [OF z_Hlj])
  have z_Hlm: "?z_hlm" (is "?z_hln&?z_hkw")
  by (rule zenon_and_1 [OF z_Hlk])
  have z_Hkw: "?z_hkw" (is "?z_hkx&?z_hcv")
  by (rule zenon_and_1 [OF z_Hlm])
  have z_Hkx: "?z_hkx" (is "_=?z_hky")
  by (rule zenon_and_0 [OF z_Hkw])
  have z_Hlo: "(DOMAIN(config)=Server)" (is "?z_hlp=_")
  by (rule zenon_in_funcset_1 [of "config" "Server" "SUBSET(Server)", OF z_Ht])
  have z_Hlq: "(DOMAIN(configTerm)=Server)" (is "?z_hlr=_")
  by (rule zenon_in_funcset_1 [of "configTerm" "Server" "Nat", OF z_Hba])
  show FALSE
  proof (rule zenon_notin_funcset [of "a_configTermhash_primea" "Server" "Nat", OF z_Hf])
   assume z_Hls:"(~isAFcn(a_configTermhash_primea))" (is "~?z_hlt")
   have z_Hlu: "(~isAFcn(?z_hjk))" (is "~?z_hlv")
   by (rule subst [where P="(\<lambda>zenon_Vrud. (~isAFcn(zenon_Vrud)))", OF z_Hjj z_Hls])
   show FALSE
   by (rule zenon_notisafcn_except [of "configTerm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))" "(currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))])", OF z_Hlu])
  next
   assume z_Hma:"(DOMAIN(a_configTermhash_primea)~=Server)" (is "?z_hmb~=_")
   have z_Hmc: "(DOMAIN(?z_hjk)~=Server)" (is "?z_hmd~=_")
   by (rule subst [where P="(\<lambda>zenon_Vvud. (DOMAIN(zenon_Vvud)~=Server))", OF z_Hjj z_Hma])
   have z_Hmi: "(?z_hlr~=Server)"
   by (rule zenon_domain_except_0 [of "(\<lambda>zenon_Vuud. (zenon_Vuud~=Server))" "configTerm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))" "(currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))])", OF z_Hmc])
   show FALSE
   by (rule notE [OF z_Hmi z_Hlq])
  next
   assume z_Hmm:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))" (is "~(\\A x : ?z_hmt(x))")
   have z_Hmu: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))" (is "\\E x : ?z_hmw(x)")
   by (rule zenon_notallex_0 [of "?z_hmt", OF z_Hmm])
   have z_Hmx: "?z_hmw((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "~(?z_hmz=>?z_hna)")
   by (rule zenon_ex_choose_0 [of "?z_hmw", OF z_Hmu])
   have z_Hmz: "?z_hmz"
   by (rule zenon_notimply_0 [OF z_Hmx])
   have z_Hnb: "(~?z_hna)"
   by (rule zenon_notimply_1 [OF z_Hmx])
   have z_Hnc: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hlp)" (is "?z_hnc")
   by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hlo z_Hmz])
   have z_Hng: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hlr)" (is "?z_hng")
   by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hlq z_Hmz])
   have z_Hnh: "(\\A zenon_Vo:((zenon_Vo \\in Server)=>((configTerm[zenon_Vo]) \\in Nat)))" (is "\\A x : ?z_hnn(x)")
   by (rule zenon_in_funcset_2 [of "configTerm" "Server" "Nat", OF z_Hba])
   have z_Hno: "?z_hnn((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=>?z_hnp")
   by (rule zenon_all_0 [of "?z_hnn" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hnh])
   show FALSE
   proof (rule zenon_imply [OF z_Hno])
    assume z_Hnq:"(~?z_hmz)"
    show FALSE
    by (rule notE [OF z_Hnq z_Hmz])
   next
    assume z_Hnp:"?z_hnp"
    show FALSE
    proof (rule notE [OF z_Hnb])
     have z_Hnr: "((configTerm[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))])=(a_configTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))]))" (is "?z_hns=?z_hnt")
     proof (rule zenon_nnpp [of "(?z_hns=?z_hnt)"])
      assume z_Hnu:"(?z_hns~=?z_hnt)"
      have z_Hnv: "(\\A zenon_Vaa:((zenon_Vaa \\in Server)=>((currentTerm[zenon_Vaa]) \\in Nat)))" (is "\\A x : ?z_hob(x)")
      by (rule zenon_in_funcset_2 [of "currentTerm" "Server" "Nat", OF z_Hg])
      have z_Hoc: "?z_hob((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=>?z_hod")
      by (rule zenon_all_0 [of "?z_hob" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hnv])
      show FALSE
      proof (rule zenon_imply [OF z_Hoc])
       assume z_Hnq:"(~?z_hmz)"
       show FALSE
       by (rule notE [OF z_Hnq z_Hmz])
      next
       assume z_Hod:"?z_hod"
       show FALSE
       proof (rule notE [OF z_Hnb])
        have z_Hoe: "((currentTerm[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))])=?z_hnt)" (is "?z_hof=_")
        proof (rule zenon_nnpp [of "(?z_hof=?z_hnt)"])
         assume z_Hog:"(?z_hof~=?z_hnt)"
         have z_Hoh: "(((isAFcn(a_confighash_primea)<=>isAFcn(?z_hky))&(DOMAIN(a_confighash_primea)=DOMAIN(?z_hky)))&(\\A zenon_Vpxe:((a_confighash_primea[zenon_Vpxe])=(?z_hky[zenon_Vpxe]))))" (is "?z_hoi&?z_hop")
         by (rule zenon_funequal_0 [of "a_confighash_primea" "?z_hky", OF z_Hkx])
         have z_Hop: "?z_hop" (is "\\A x : ?z_hou(x)")
         by (rule zenon_and_1 [OF z_Hoh])
         have z_Hov: "?z_hou((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_how=?z_hox")
         by (rule zenon_all_0 [of "?z_hou" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hop])
         show FALSE
         proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vwfe. (?z_how=zenon_Vwfe))" "config" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (?z_hir&(?z_hiu&(?z_hiw&((1=Cardinality(((x \\ (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))])) \\cup ((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))]) \\ x))))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv)))))))))))))))) \\in x)&((x~=(config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))]))&(?z_hjj&(((configVersion[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))]) < newVersion)&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv)))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv)))))))))))))))), x))&?z_hcv))))))))))))))" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hov])
          assume z_Hnc:"?z_hnc"
          assume z_Hpb:"((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hii=?z_hmy")
          assume z_Hpc:"(?z_how=(CHOOSE x:((x \\in SUBSET(Server))&bEx(Version, (\<lambda>newVersion. (?z_hir&(?z_hiu&(?z_hiw&((1=Cardinality(((x \\ (config[?z_hii])) \\cup ((config[?z_hii]) \\ x))))&((?z_hii \\in x)&((x~=(config[?z_hii]))&(?z_hjj&(((configVersion[?z_hii]) < newVersion)&((a_configVersionhash_primea=except(configVersion, ?z_hii, newVersion))&((a_confighash_primea=except(config, ?z_hii, x))&?z_hcv)))))))))))))))" (is "_=?z_hjx")
          have z_Hpd: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_hjk))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_hjk)))&(\\A zenon_Vuxe:((a_configTermhash_primea[zenon_Vuxe])=(?z_hjk[zenon_Vuxe]))))" (is "?z_hpe&?z_hph")
          by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_hjk", OF z_Hjj])
          have z_Hph: "?z_hph" (is "\\A x : ?z_hpm(x)")
          by (rule zenon_and_1 [OF z_Hpd])
          have z_Hpn: "?z_hpm(?z_hmy)" (is "_=?z_hpo")
          by (rule zenon_all_0 [of "?z_hpm" "?z_hmy", OF z_Hph])
          show FALSE
          proof (rule zenon_em [of "(?z_hnt=?z_hnt)"])
           assume z_Hpp:"(?z_hnt=?z_hnt)"
           show FALSE
           proof (rule notE [OF z_Hog])
            have z_Hpq: "(?z_hnt=?z_hof)"
            proof (rule zenon_nnpp [of "(?z_hnt=?z_hof)"])
             assume z_Hpr:"(?z_hnt~=?z_hof)"
             show FALSE
             proof (rule notE [OF z_Hpr])
              have z_Hps: "(?z_hpo=?z_hof)"
              proof (rule zenon_nnpp [of "(?z_hpo=?z_hof)"])
               assume z_Hpt:"(?z_hpo~=?z_hof)"
               show FALSE
               proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vfia. (zenon_Vfia~=?z_hof))" "configTerm" "?z_hii" "(currentTerm[?z_hii])" "?z_hmy", OF z_Hpt])
               assume z_Hng:"?z_hng"
               assume z_Hpb:"(?z_hii=?z_hmy)"
               assume z_Hpx:"((currentTerm[?z_hii])~=?z_hof)" (is "?z_hjl~=_")
               show FALSE
               proof (rule zenon_noteq [of "?z_hof"])
               have z_Hpy: "(?z_hof~=?z_hof)"
               by (rule subst [where P="(\<lambda>zenon_Vnfl. ((currentTerm[zenon_Vnfl])~=?z_hof))", OF z_Hpb], fact z_Hpx)
               thus "(?z_hof~=?z_hof)" .
               qed
               next
               assume z_Hng:"?z_hng"
               assume z_Hqd:"(?z_hii~=?z_hmy)"
               assume z_Hqe:"(?z_hns~=?z_hof)"
               show FALSE
               by (rule notE [OF z_Hqd z_Hpb])
               next
               assume z_Hqf:"(~?z_hng)"
               show FALSE
               by (rule notE [OF z_Hqf z_Hng])
               qed
              qed
              have z_Hpq: "(?z_hnt=?z_hof)"
              by (rule subst [where P="(\<lambda>zenon_Vww. (?z_hnt=zenon_Vww))", OF z_Hps], fact z_Hpn)
              thus "(?z_hnt=?z_hof)" .
             qed
            qed
            have z_Hoe: "(?z_hof=?z_hnt)"
            by (rule subst [where P="(\<lambda>zenon_Vpfl. (zenon_Vpfl=?z_hnt))", OF z_Hpq], fact z_Hpp)
            thus "(?z_hof=?z_hnt)" .
           qed
          next
           assume z_Hqm:"(?z_hnt~=?z_hnt)"
           show FALSE
           by (rule zenon_noteq [OF z_Hqm])
          qed
         next
          assume z_Hnc:"?z_hnc"
          assume z_Hqd:"((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>newConfig. bEx(Version, (\<lambda>newVersion. (((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((1=Cardinality(((newConfig \\ (config[x])) \\cup ((config[x]) \\ newConfig))))&((x \\in newConfig)&((newConfig~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < newVersion)&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, newConfig))&?z_hcv))))))))))))))))~=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hii~=?z_hmy")
          assume z_Hqn:"(?z_how=(config[?z_hmy]))" (is "_=?z_hqo")
          have z_Hpd: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_hjk))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_hjk)))&(\\A zenon_Vuxe:((a_configTermhash_primea[zenon_Vuxe])=(?z_hjk[zenon_Vuxe]))))" (is "?z_hpe&?z_hph")
          by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_hjk", OF z_Hjj])
          have z_Hph: "?z_hph" (is "\\A x : ?z_hpm(x)")
          by (rule zenon_and_1 [OF z_Hpd])
          have z_Hpn: "?z_hpm(?z_hmy)" (is "_=?z_hpo")
          by (rule zenon_all_0 [of "?z_hpm" "?z_hmy", OF z_Hph])
          show FALSE
          proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vww. (?z_hnt=zenon_Vww))" "configTerm" "?z_hii" "(currentTerm[?z_hii])" "?z_hmy", OF z_Hpn])
           assume z_Hng:"?z_hng"
           assume z_Hpb:"(?z_hii=?z_hmy)"
           assume z_Hqp:"(?z_hnt=(currentTerm[?z_hii]))" (is "_=?z_hjl")
           show FALSE
           by (rule notE [OF z_Hqd z_Hpb])
          next
           assume z_Hng:"?z_hng"
           assume z_Hqd:"(?z_hii~=?z_hmy)"
           assume z_Hqq:"(?z_hnt=?z_hns)"
           show FALSE
           by (rule zenon_eqsym [OF z_Hqq z_Hnu])
          next
           assume z_Hqf:"(~?z_hng)"
           show FALSE
           by (rule notE [OF z_Hqf z_Hng])
          qed
         next
          assume z_Hqr:"(~?z_hnc)"
          show FALSE
          by (rule notE [OF z_Hqr z_Hnc])
         qed
        qed
        have z_Hna: "?z_hna"
        by (rule subst [where P="(\<lambda>zenon_Vqfl. (zenon_Vqfl \\in Nat))", OF z_Hoe], fact z_Hod)
        thus "?z_hna" .
       qed
      qed
     qed
     have z_Hna: "?z_hna"
     by (rule subst [where P="(\<lambda>zenon_Vqfl. (zenon_Vqfl \\in Nat))", OF z_Hnr], fact z_Hnp)
     thus "?z_hna" .
    qed
   qed
  qed
 next
  assume z_Hda:"?z_hda" (is "?z_hdb|?z_hef")
  show FALSE
  proof (rule zenon_or [OF z_Hda])
   assume z_Hdb:"?z_hdb"
   have z_Hqv_z_Hdb: "(\\E x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))) == ?z_hdb" (is "?z_hqv == _")
   by (unfold bEx_def)
   have z_Hqv: "?z_hqv" (is "\\E x : ?z_hrq(x)")
   by (unfold z_Hqv_z_Hdb, fact z_Hdb)
   have z_Hrr: "?z_hrq((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))))" (is "?z_hrt&?z_hru")
   by (rule zenon_ex_choose_0 [of "?z_hrq", OF z_Hqv])
   have z_Hrt: "?z_hrt"
   by (rule zenon_and_0 [OF z_Hrr])
   have z_Hru: "?z_hru"
   by (rule zenon_and_1 [OF z_Hrr])
   have z_Hrv_z_Hru: "(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))) == ?z_hru" (is "?z_hrv == _")
   by (unfold bEx_def)
   have z_Hrv: "?z_hrv" (is "\\E x : ?z_hst(x)")
   by (unfold z_Hrv_z_Hru, fact z_Hru)
   have z_Hsu: "?z_hst((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))" (is "?z_hsw&?z_hsx")
   by (rule zenon_ex_choose_0 [of "?z_hst", OF z_Hrv])
   have z_Hsx: "?z_hsx"
   by (rule zenon_and_1 [OF z_Hsu])
   have z_Hsy_z_Hsx: "(\\E x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))) == ?z_hsx" (is "?z_hsy == _")
   by (unfold bEx_def)
   have z_Hsy: "?z_hsy" (is "\\E x : ?z_htu(x)")
   by (unfold z_Hsy_z_Hsx, fact z_Hsx)
   have z_Htv: "?z_htu((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))" (is "?z_htx&?z_hty")
   by (rule zenon_ex_choose_0 [of "?z_htu", OF z_Hsy])
   have z_Hty: "?z_hty"
   by (rule zenon_and_1 [OF z_Htv])
   have z_Htz_z_Hty: "(\\E x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&(((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))&((x=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))) == ?z_hty" (is "?z_htz == _")
   by (unfold bEx_def)
   have z_Htz: "?z_htz" (is "\\E x : ?z_hun(x)")
   by (unfold z_Htz_z_Hty, fact z_Hty)
   have z_Huo: "?z_hun((CHOOSE x:((x \\in Version)&(((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&(((CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (CHOOSE x:((x \\in Term)&bEx(Version, (\<lambda>newVersion. (((state[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))&((x=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), newVersion))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))&((x=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), x))&((a_confighash_primea=except(config, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))))), x)&((newTerm=(configTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))))), (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state)))))))))))))))))])))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))" (is "?z_huq&?z_hur")
   by (rule zenon_ex_choose_0 [of "?z_hun", OF z_Htz])
   have z_Hur: "?z_hur" (is "?z_hte&?z_hus")
   by (rule zenon_and_1 [OF z_Huo])
   have z_Hus: "?z_hus" (is "?z_hth&?z_hut")
   by (rule zenon_and_1 [OF z_Hur])
   have z_Hut: "?z_hut" (is "?z_hue&?z_huu")
   by (rule zenon_and_1 [OF z_Hus])
   have z_Hue: "?z_hue" (is "?z_htw=?z_hsh")
   by (rule zenon_and_0 [OF z_Hut])
   have z_Huu: "?z_huu" (is "?z_hug&?z_huv")
   by (rule zenon_and_1 [OF z_Hut])
   have z_Hug: "?z_hug" (is "_=?z_huh")
   by (rule zenon_and_0 [OF z_Huu])
   have z_Huv: "?z_huv" (is "?z_huw&?z_hux")
   by (rule zenon_and_1 [OF z_Huu])
   have z_Hux: "?z_hux" (is "?z_huy&?z_htr")
   by (rule zenon_and_1 [OF z_Huv])
   have z_Htr: "?z_htr" (is "?z_hts&?z_hcv")
   by (rule zenon_and_1 [OF z_Hux])
   have z_Hts: "?z_hts" (is "_=?z_htt")
   by (rule zenon_and_0 [OF z_Htr])
   have z_Hlo: "(DOMAIN(config)=Server)" (is "?z_hlp=_")
   by (rule zenon_in_funcset_1 [of "config" "Server" "SUBSET(Server)", OF z_Ht])
   have z_Hlq: "(DOMAIN(configTerm)=Server)" (is "?z_hlr=_")
   by (rule zenon_in_funcset_1 [of "configTerm" "Server" "Nat", OF z_Hba])
   show FALSE
   proof (rule zenon_notin_funcset [of "a_configTermhash_primea" "Server" "Nat", OF z_Hf])
    assume z_Hls:"(~isAFcn(a_configTermhash_primea))" (is "~?z_hlt")
    have z_Huz: "(~isAFcn(?z_huh))" (is "~?z_hva")
    by (rule subst [where P="(\<lambda>zenon_Vrud. (~isAFcn(zenon_Vrud)))", OF z_Hug z_Hls])
    show FALSE
    by (rule zenon_notisafcn_except [of "configTerm" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv))))))))))))))), x)&((newTerm=?z_hsh)&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))])))&?z_hcv)))))))))))))" "?z_htw", OF z_Huz])
   next
    assume z_Hma:"(DOMAIN(a_configTermhash_primea)~=Server)" (is "?z_hmb~=_")
    have z_Hvb: "(DOMAIN(?z_huh)~=Server)" (is "?z_hvc~=_")
    by (rule subst [where P="(\<lambda>zenon_Vvud. (DOMAIN(zenon_Vvud)~=Server))", OF z_Hug z_Hma])
    have z_Hmi: "(?z_hlr~=Server)"
    by (rule zenon_domain_except_0 [of "(\<lambda>zenon_Vuud. (zenon_Vuud~=Server))" "configTerm" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv))))))))))))))), x)&((newTerm=?z_hsh)&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))])))&?z_hcv)))))))))))))" "?z_htw", OF z_Hvb])
    show FALSE
    by (rule notE [OF z_Hmi z_Hlq])
   next
    assume z_Hmm:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))" (is "~(\\A x : ?z_hmt(x))")
    have z_Hmu: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))" (is "\\E x : ?z_hmw(x)")
    by (rule zenon_notallex_0 [of "?z_hmt", OF z_Hmm])
    have z_Hmx: "?z_hmw((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "~(?z_hmz=>?z_hna)")
    by (rule zenon_ex_choose_0 [of "?z_hmw", OF z_Hmu])
    have z_Hmz: "?z_hmz"
    by (rule zenon_notimply_0 [OF z_Hmx])
    have z_Hnb: "(~?z_hna)"
    by (rule zenon_notimply_1 [OF z_Hmx])
    have z_Hnc: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hlp)" (is "?z_hnc")
    by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hlo z_Hmz])
    have z_Hng: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hlr)" (is "?z_hng")
    by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hlq z_Hmz])
    have z_Hnh: "(\\A zenon_Vo:((zenon_Vo \\in Server)=>((configTerm[zenon_Vo]) \\in Nat)))" (is "\\A x : ?z_hnn(x)")
    by (rule zenon_in_funcset_2 [of "configTerm" "Server" "Nat", OF z_Hba])
    have z_Hno: "?z_hnn((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=>?z_hnp")
    by (rule zenon_all_0 [of "?z_hnn" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hnh])
    show FALSE
    proof (rule zenon_imply [OF z_Hno])
     assume z_Hnq:"(~?z_hmz)"
     show FALSE
     by (rule notE [OF z_Hnq z_Hmz])
    next
     assume z_Hnp:"?z_hnp"
     show FALSE
     proof (rule notE [OF z_Hnb])
      have z_Hnr: "((configTerm[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))])=(a_configTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))]))" (is "?z_hns=?z_hnt")
      proof (rule zenon_nnpp [of "(?z_hns=?z_hnt)"])
       assume z_Hnu:"(?z_hns~=?z_hnt)"
       have z_Hvd: "?z_hnn((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv))))))))))))))))" (is "_=>?z_hve")
       by (rule zenon_all_0 [of "?z_hnn" "(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))", OF z_Hnh])
       show FALSE
       proof (rule zenon_imply [OF z_Hvd])
        assume z_Hvf:"(~?z_hrt)"
        show FALSE
        by (rule notE [OF z_Hvf z_Hrt])
       next
        assume z_Hve:"?z_hve"
        show FALSE
        proof (rule notE [OF z_Hnb])
         have z_Hvg: "(?z_hsh=?z_hnt)"
         proof (rule zenon_nnpp [of "(?z_hsh=?z_hnt)"])
          assume z_Hvh:"(?z_hsh~=?z_hnt)"
          have z_Hvi: "(((isAFcn(a_confighash_primea)<=>isAFcn(?z_htt))&(DOMAIN(a_confighash_primea)=DOMAIN(?z_htt)))&(\\A zenon_Vuvd:((a_confighash_primea[zenon_Vuvd])=(?z_htt[zenon_Vuvd]))))" (is "?z_hvj&?z_hvo")
          by (rule zenon_funequal_0 [of "a_confighash_primea" "?z_htt", OF z_Hts])
          have z_Hvo: "?z_hvo" (is "\\A x : ?z_hvt(x)")
          by (rule zenon_and_1 [OF z_Hvi])
          have z_Hvu: "?z_hvt((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_how=?z_hvv")
          by (rule zenon_all_0 [of "?z_hvt" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hvo])
          show FALSE
          proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vwfe. (?z_how=zenon_Vwfe))" "config" "(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv))))))))))))))), x)&((newTerm=?z_hsh)&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))])))&?z_hcv)))))))))))))" "(config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))])" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hvu])
           assume z_Hnc:"?z_hnc"
           assume z_Hvw:"((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv))))))))))))))), x)&((newTerm=?z_hsh)&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))])))&?z_hcv)))))))))))))=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hsv=?z_hmy")
           assume z_Hvx:"(?z_how=(config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))]))" (is "_=?z_hss")
           have z_Hvy: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_huh))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_huh)))&(\\A zenon_Vzvd:((a_configTermhash_primea[zenon_Vzvd])=(?z_huh[zenon_Vzvd]))))" (is "?z_hvz&?z_hwc")
           by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_huh", OF z_Hug])
           have z_Hwc: "?z_hwc" (is "\\A x : ?z_hwh(x)")
           by (rule zenon_and_1 [OF z_Hvy])
           have z_Hwi: "?z_hwh(?z_hmy)" (is "_=?z_hwj")
           by (rule zenon_all_0 [of "?z_hwh" "?z_hmy", OF z_Hwc])
           show FALSE
           proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vww. (?z_hnt=zenon_Vww))" "configTerm" "?z_hsv" "?z_htw" "?z_hmy", OF z_Hwi])
            assume z_Hng:"?z_hng"
            assume z_Hvw:"(?z_hsv=?z_hmy)"
            assume z_Hwk:"(?z_hnt=?z_htw)"
            show FALSE
            proof (rule zenon_em [of "(?z_hnt=?z_hnt)"])
             assume z_Hpp:"(?z_hnt=?z_hnt)"
             show FALSE
             proof (rule notE [OF z_Hvh])
              have z_Hwl: "(?z_hnt=?z_hsh)"
              proof (rule zenon_nnpp [of "(?z_hnt=?z_hsh)"])
               assume z_Hwm:"(?z_hnt~=?z_hsh)"
               show FALSE
               proof (rule notE [OF z_Hwm])
               have z_Hwn: "(?z_htw=?z_hnt)"
               by (rule sym [OF z_Hwk])
               have z_Hwl: "(?z_hnt=?z_hsh)"
               by (rule subst [where P="(\<lambda>zenon_Vsfl. (zenon_Vsfl=?z_hsh))", OF z_Hwn], fact z_Hue)
               thus "(?z_hnt=?z_hsh)" .
               qed
              qed
              have z_Hvg: "(?z_hsh=?z_hnt)"
              by (rule subst [where P="(\<lambda>zenon_Vpfl. (zenon_Vpfl=?z_hnt))", OF z_Hwl], fact z_Hpp)
              thus "(?z_hsh=?z_hnt)" .
             qed
            next
             assume z_Hqm:"(?z_hnt~=?z_hnt)"
             show FALSE
             by (rule zenon_noteq [OF z_Hqm])
            qed
           next
            assume z_Hng:"?z_hng"
            assume z_Hwr:"(?z_hsv~=?z_hmy)"
            assume z_Hqq:"(?z_hnt=?z_hns)"
            show FALSE
            by (rule notE [OF z_Hwr z_Hvw])
           next
            assume z_Hqf:"(~?z_hng)"
            show FALSE
            by (rule notE [OF z_Hqf z_Hng])
           qed
          next
           assume z_Hnc:"?z_hnc"
           assume z_Hwr:"((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[x])=Secondary)&(IsNewerConfig((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv))))))))))))))), x)&((newTerm=?z_hsh)&((a_configTermhash_primea=except(configTerm, x, newTerm))&((newVersion=(configVersion[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))]))&((a_configVersionhash_primea=except(configVersion, x, newVersion))&((a_confighash_primea=except(config, x, (config[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. bEx(Version, (\<lambda>newVersion. (((state[t])=Secondary)&(IsNewerConfig(x, t)&((newTerm=(configTerm[x]))&((a_configTermhash_primea=except(configTerm, t, newTerm))&((newVersion=(configVersion[x]))&((a_configVersionhash_primea=except(configVersion, t, newVersion))&((a_confighash_primea=except(config, t, (config[x])))&?z_hcv)))))))))))))))])))&?z_hcv)))))))))))))~=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hsv~=?z_hmy")
           assume z_Hqn:"(?z_how=(config[?z_hmy]))" (is "_=?z_hqo")
           have z_Hvy: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_huh))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_huh)))&(\\A zenon_Vzvd:((a_configTermhash_primea[zenon_Vzvd])=(?z_huh[zenon_Vzvd]))))" (is "?z_hvz&?z_hwc")
           by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_huh", OF z_Hug])
           have z_Hwc: "?z_hwc" (is "\\A x : ?z_hwh(x)")
           by (rule zenon_and_1 [OF z_Hvy])
           have z_Hwi: "?z_hwh(?z_hmy)" (is "_=?z_hwj")
           by (rule zenon_all_0 [of "?z_hwh" "?z_hmy", OF z_Hwc])
           show FALSE
           proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vww. (?z_hnt=zenon_Vww))" "configTerm" "?z_hsv" "?z_htw" "?z_hmy", OF z_Hwi])
            assume z_Hng:"?z_hng"
            assume z_Hvw:"(?z_hsv=?z_hmy)"
            assume z_Hwk:"(?z_hnt=?z_htw)"
            show FALSE
            by (rule notE [OF z_Hwr z_Hvw])
           next
            assume z_Hng:"?z_hng"
            assume z_Hwr:"(?z_hsv~=?z_hmy)"
            assume z_Hqq:"(?z_hnt=?z_hns)"
            show FALSE
            by (rule zenon_eqsym [OF z_Hqq z_Hnu])
           next
            assume z_Hqf:"(~?z_hng)"
            show FALSE
            by (rule notE [OF z_Hqf z_Hng])
           qed
          next
           assume z_Hqr:"(~?z_hnc)"
           show FALSE
           by (rule notE [OF z_Hqr z_Hnc])
          qed
         qed
         have z_Hna: "?z_hna"
         by (rule subst [where P="(\<lambda>zenon_Vqfl. (zenon_Vqfl \\in Nat))", OF z_Hvg], fact z_Hve)
         thus "?z_hna" .
        qed
       qed
      qed
      have z_Hna: "?z_hna"
      by (rule subst [where P="(\<lambda>zenon_Vqfl. (zenon_Vqfl \\in Nat))", OF z_Hnr], fact z_Hnp)
      thus "?z_hna" .
     qed
    qed
   qed
  next
   assume z_Hef:"?z_hef" (is "?z_heg|?z_hfy")
   show FALSE
   proof (rule zenon_or [OF z_Hef])
    assume z_Heg:"?z_heg"
    have z_Hws_z_Heg: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_heg" (is "?z_hws == _")
    by (unfold bEx_def)
    have z_Hws: "?z_hws" (is "\\E x : ?z_hxu(x)")
    by (unfold z_Hws_z_Heg, fact z_Heg)
    have z_Hxv: "?z_hxu((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hxx&?z_hxy")
    by (rule zenon_ex_choose_0 [of "?z_hxu", OF z_Hws])
    have z_Hxy: "?z_hxy"
    by (rule zenon_and_1 [OF z_Hxv])
    have z_Hxz_z_Hxy: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hxy" (is "?z_hxz == _")
    by (unfold bEx_def)
    have z_Hxz: "?z_hxz" (is "\\E x : ?z_hzj(x)")
    by (unfold z_Hxz_z_Hxy, fact z_Hxy)
    have z_Hzk: "?z_hzj((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hzm&?z_hzn")
    by (rule zenon_ex_choose_0 [of "?z_hzj", OF z_Hxz])
    have z_Hzn: "?z_hzn"
    by (rule zenon_and_1 [OF z_Hzk])
    have z_Hzo_z_Hzn: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hzn" (is "?z_hzo == _")
    by (unfold bEx_def)
    have z_Hzo: "?z_hzo" (is "\\E x : ?z_hbaq(x)")
    by (unfold z_Hzo_z_Hzn, fact z_Hzn)
    have z_Hbar: "?z_hbaq((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hbat&?z_hbau")
    by (rule zenon_ex_choose_0 [of "?z_hbaq", OF z_Hzo])
    have z_Hbau: "?z_hbau" (is "?z_hbav&?z_hbaw")
    by (rule zenon_and_1 [OF z_Hbar])
    have z_Hbaw: "?z_hbaw" (is "?z_hzt&?z_hbax")
    by (rule zenon_and_1 [OF z_Hbau])
    have z_Hbax: "?z_hbax" (is "?z_hym&?z_hbay")
    by (rule zenon_and_1 [OF z_Hbaw])
    have z_Hbay: "?z_hbay" (is "?z_hzw&?z_hbaz")
    by (rule zenon_and_1 [OF z_Hbax])
    have z_Hbaz: "?z_hbaz" (is "?z_hbba&?z_hbbb")
    by (rule zenon_and_1 [OF z_Hbay])
    have z_Hbbb: "?z_hbbb" (is "?z_hbbc&?z_hbbd")
    by (rule zenon_and_1 [OF z_Hbaz])
    have z_Hbbd: "?z_hbbd" (is "?z_hbai&?z_hbbe")
    by (rule zenon_and_1 [OF z_Hbbb])
    have z_Hbbe: "?z_hbbe" (is "?z_hbbf&?z_hfv")
    by (rule zenon_and_1 [OF z_Hbbd])
    have z_Hbbf: "?z_hbbf" (is "_=?z_hbbg")
    by (rule zenon_and_0 [OF z_Hbbe])
    have z_Hbbh: "bEx(Nat, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), newTerm, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))" (is "?z_hbbh")
    by (rule subst [where P="(\<lambda>zenon_Vmfl. bEx(zenon_Vmfl, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), newTerm, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))", OF z_Ha z_Hzn])
    have z_Hbby_z_Hbbh: "(\\E x:((x \\in Nat)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x))&?z_hfv)))))))))) == ?z_hbbh" (is "?z_hbby == _")
    by (unfold bEx_def)
    have z_Hbby: "?z_hbby" (is "\\E x : ?z_hbcb(x)")
    by (unfold z_Hbby_z_Hbbh, fact z_Hbbh)
    have z_Hbcc: "?z_hbcb((CHOOSE x:((x \\in Nat)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x))&?z_hfv)))))))))))" (is "?z_hbce&?z_hbcf")
    by (rule zenon_ex_choose_0 [of "?z_hbcb", OF z_Hbby])
    have z_Hbce: "?z_hbce"
    by (rule zenon_and_0 [OF z_Hbcc])
    have z_Hbcf: "?z_hbcf" (is "?z_hbcg&?z_hbch")
    by (rule zenon_and_1 [OF z_Hbcc])
    have z_Hbch: "?z_hbch" (is "_&?z_hbci")
    by (rule zenon_and_1 [OF z_Hbcf])
    have z_Hbci: "?z_hbci" (is "_&?z_hbcj")
    by (rule zenon_and_1 [OF z_Hbch])
    have z_Hbcj: "?z_hbcj" (is "_&?z_hbck")
    by (rule zenon_and_1 [OF z_Hbci])
    have z_Hbck: "?z_hbck" (is "?z_hbcl&?z_hbcm")
    by (rule zenon_and_1 [OF z_Hbcj])
    have z_Hbcm: "?z_hbcm" (is "?z_hbcn&?z_hbco")
    by (rule zenon_and_1 [OF z_Hbck])
    have z_Hbco: "?z_hbco" (is "_&?z_hbcp")
    by (rule zenon_and_1 [OF z_Hbcm])
    have z_Hbcp: "?z_hbcp" (is "?z_hbcq&_")
    by (rule zenon_and_1 [OF z_Hbco])
    have z_Hbcq: "?z_hbcq" (is "_=?z_hbcr")
    by (rule zenon_and_0 [OF z_Hbcp])
    have z_Hlq: "(DOMAIN(configTerm)=Server)" (is "?z_hlr=_")
    by (rule zenon_in_funcset_1 [of "configTerm" "Server" "Nat", OF z_Hba])
    show FALSE
    proof (rule zenon_notin_funcset [of "a_configTermhash_primea" "Server" "Nat", OF z_Hf])
     assume z_Hls:"(~isAFcn(a_configTermhash_primea))" (is "~?z_hlt")
     have z_Hbcs: "(~isAFcn(?z_hbbg))" (is "~?z_hbct")
     by (rule subst [where P="(\<lambda>zenon_Vrud. (~isAFcn(zenon_Vrud)))", OF z_Hbbf z_Hls])
     show FALSE
     by (rule zenon_notisafcn_except [of "configTerm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))" "(CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x))&?z_hfv))))))))))", OF z_Hbcs])
    next
     assume z_Hma:"(DOMAIN(a_configTermhash_primea)~=Server)" (is "?z_hmb~=_")
     have z_Hbcu: "(DOMAIN(?z_hbbg)~=Server)" (is "?z_hbcv~=_")
     by (rule subst [where P="(\<lambda>zenon_Vvud. (DOMAIN(zenon_Vvud)~=Server))", OF z_Hbbf z_Hma])
     have z_Hmi: "(?z_hlr~=Server)"
     by (rule zenon_domain_except_0 [of "(\<lambda>zenon_Vuud. (zenon_Vuud~=Server))" "configTerm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))" "(CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x))&?z_hfv))))))))))", OF z_Hbcu])
     show FALSE
     by (rule notE [OF z_Hmi z_Hlq])
    next
     assume z_Hmm:"(~(\\A zenon_Vh:((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))" (is "~(\\A x : ?z_hmt(x))")
     have z_Hmu: "(\\E zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))" (is "\\E x : ?z_hmw(x)")
     by (rule zenon_notallex_0 [of "?z_hmt", OF z_Hmm])
     have z_Hmx: "?z_hmw((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "~(?z_hmz=>?z_hna)")
     by (rule zenon_ex_choose_0 [of "?z_hmw", OF z_Hmu])
     have z_Hmz: "?z_hmz"
     by (rule zenon_notimply_0 [OF z_Hmx])
     have z_Hnb: "(~?z_hna)"
     by (rule zenon_notimply_1 [OF z_Hmx])
     have z_Hng: "((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in ?z_hlr)" (is "?z_hng")
     by (rule ssubst [where P="(\<lambda>zenon_Vxc. ((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))) \\in zenon_Vxc))", OF z_Hlq z_Hmz])
     have z_Hnh: "(\\A zenon_Vo:((zenon_Vo \\in Server)=>((configTerm[zenon_Vo]) \\in Nat)))" (is "\\A x : ?z_hnn(x)")
     by (rule zenon_in_funcset_2 [of "configTerm" "Server" "Nat", OF z_Hba])
     have z_Hno: "?z_hnn((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=>?z_hnp")
     by (rule zenon_all_0 [of "?z_hnn" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hnh])
     show FALSE
     proof (rule zenon_imply [OF z_Hno])
      assume z_Hnq:"(~?z_hmz)"
      show FALSE
      by (rule notE [OF z_Hnq z_Hmz])
     next
      assume z_Hnp:"?z_hnp"
      show FALSE
      proof (rule notE [OF z_Hnb])
       have z_Hnr: "((configTerm[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))])=(a_configTermhash_primea[(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))]))" (is "?z_hns=?z_hnt")
       proof (rule zenon_nnpp [of "(?z_hns=?z_hnt)"])
        assume z_Hnu:"(?z_hns~=?z_hnt)"
        have z_Hbcw: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_hbbg))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_hbbg)))&(\\A zenon_Vdf:((a_configTermhash_primea[zenon_Vdf])=(?z_hbbg[zenon_Vdf]))))" (is "?z_hbcx&?z_hbda")
        by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_hbbg", OF z_Hbbf])
        have z_Hbda: "?z_hbda" (is "\\A x : ?z_hbdf(x)")
        by (rule zenon_and_1 [OF z_Hbcw])
        have z_Hbdg: "?z_hbdf((CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "_=?z_hbdh")
        by (rule zenon_all_0 [of "?z_hbdf" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hbda])
        show FALSE
        proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vww. (?z_hnt=zenon_Vww))" "configTerm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))" "(CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))])))&(?z_hym&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv)))))))))))))), x))&?z_hfv))))))))))" "(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat))))", OF z_Hbdg])
         assume z_Hng:"?z_hng"
         assume z_Hbdi:"((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hxw=?z_hmy")
         assume z_Hbdj:"(?z_hnt=(CHOOSE x:((x \\in Term)&((x=((currentTerm[?z_hxw]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hxw]) + 1))&((x \\in Quorums((config[?z_hxw])))&(?z_hym&((?z_hxw \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hxw, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hxw), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hxw, newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, ?z_hxw, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hxw]) + 1))&((x \\in Quorums((config[?z_hxw])))&(?z_hym&((?z_hxw \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hxw, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hxw), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hxw, newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, ?z_hxw, x))&?z_hfv)))))))))))" (is "_=?z_hbas")
         have z_Hbdk: "(((isAFcn(a_configTermhash_primea)<=>isAFcn(?z_hbcr))&(DOMAIN(a_configTermhash_primea)=DOMAIN(?z_hbcr)))&(\\A zenon_Vfg:((a_configTermhash_primea[zenon_Vfg])=(?z_hbcr[zenon_Vfg]))))" (is "?z_hbdl&?z_hbdq")
         by (rule zenon_funequal_0 [of "a_configTermhash_primea" "?z_hbcr", OF z_Hbcq])
         have z_Hbdq: "?z_hbdq" (is "\\A x : ?z_hbdv(x)")
         by (rule zenon_and_1 [OF z_Hbdk])
         have z_Hbdw: "?z_hbdv(?z_hmy)" (is "_=?z_hbdx")
         by (rule zenon_all_0 [of "?z_hbdv" "?z_hmy", OF z_Hbdq])
         show FALSE
         proof (rule zenon_fapplyexcept [of "(\<lambda>zenon_Vww. (?z_hnt=zenon_Vww))" "configTerm" "?z_hxw" "(CHOOSE x:((x \\in Nat)&((x=((currentTerm[?z_hxw]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hxw]) + 1))&((x \\in Quorums((config[?z_hxw])))&(?z_hym&((?z_hxw \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hxw, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hxw), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hxw, newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, ?z_hxw, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hxw]) + 1))&((x \\in Quorums((config[?z_hxw])))&(?z_hym&((?z_hxw \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hxw, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hxw), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hxw, newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, ?z_hxw, x))&?z_hfv))))))))))" "?z_hmy", OF z_Hbdw])
          assume z_Hng:"?z_hng"
          assume z_Hbdi:"(?z_hxw=?z_hmy)"
          assume z_Hbdy:"(?z_hnt=(CHOOSE x:((x \\in Nat)&((x=((currentTerm[?z_hxw]) + 1))&(?z_hzt&(?z_hym&(?z_hzw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hxw]) + 1))&((x \\in Quorums((config[?z_hxw])))&(?z_hym&((?z_hxw \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hxw, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hxw), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hxw, newTerm))&?z_hfv)))))))))))), (\<lambda>v. CanVoteForConfig(v, ?z_hxw, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[?z_hxw]) + 1))&((x \\in Quorums((config[?z_hxw])))&(?z_hym&((?z_hxw \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, ?z_hxw, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=?z_hxw), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, ?z_hxw, newTerm))&?z_hfv))))))))))))), x, (currentTerm[s_1])))))&(?z_hbai&((a_configTermhash_primea=except(configTerm, ?z_hxw, x))&?z_hfv)))))))))))" (is "_=?z_hbcd")
          show FALSE
          proof (rule notE [OF z_Hnb])
           have z_Hbdz: "(?z_hbcd=?z_hnt)"
           by (rule sym [OF z_Hbdy])
           have z_Hna: "?z_hna"
           by (rule subst [where P="(\<lambda>zenon_Vqfl. (zenon_Vqfl \\in Nat))", OF z_Hbdz], fact z_Hbce)
           thus "?z_hna" .
          qed
         next
          assume z_Hng:"?z_hng"
          assume z_Hbea:"(?z_hxw~=?z_hmy)"
          assume z_Hqq:"(?z_hnt=?z_hns)"
          show FALSE
          by (rule notE [OF z_Hbea z_Hbdi])
         next
          assume z_Hqf:"(~?z_hng)"
          show FALSE
          by (rule notE [OF z_Hqf z_Hng])
         qed
        next
         assume z_Hng:"?z_hng"
         assume z_Hbea:"((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hfv))))))))))))))~=(CHOOSE zenon_Vh:(~((zenon_Vh \\in Server)=>((a_configTermhash_primea[zenon_Vh]) \\in Nat)))))" (is "?z_hxw~=?z_hmy")
         assume z_Hqq:"(?z_hnt=?z_hns)"
         show FALSE
         by (rule zenon_eqsym [OF z_Hqq z_Hnu])
        next
         assume z_Hqf:"(~?z_hng)"
         show FALSE
         by (rule notE [OF z_Hqf z_Hng])
        qed
       qed
       have z_Hna: "?z_hna"
       by (rule subst [where P="(\<lambda>zenon_Vqfl. (zenon_Vqfl \\in Nat))", OF z_Hnr], fact z_Hnp)
       thus "?z_hna" .
      qed
     qed
    qed
   next
    assume z_Hfy:"?z_hfy"
    have z_Hbeb_z_Hfy: "(\\E x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))) == ?z_hfy" (is "?z_hbeb == _")
    by (unfold bEx_def)
    have z_Hbeb: "?z_hbeb" (is "\\E x : ?z_hbem(x)")
    by (unfold z_Hbeb_z_Hfy, fact z_Hfy)
    have z_Hben: "?z_hbem((CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))))" (is "?z_hbep&?z_hbeq")
    by (rule zenon_ex_choose_0 [of "?z_hbem", OF z_Hbeb])
    have z_Hbeq: "?z_hbeq"
    by (rule zenon_and_1 [OF z_Hben])
    have z_Hber_z_Hbeq: "(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))) == ?z_hbeq" (is "?z_hber == _")
    by (unfold bEx_def)
    have z_Hber: "?z_hber" (is "\\E x : ?z_hbfg(x)")
    by (unfold z_Hber_z_Hbeq, fact z_Hbeq)
    have z_Hbfh: "?z_hbfg((CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))))" (is "?z_hbfj&?z_hbfk")
    by (rule zenon_ex_choose_0 [of "?z_hbfg", OF z_Hber])
    have z_Hbfk: "?z_hbfk"
    by (rule zenon_and_1 [OF z_Hbfh])
    have z_Hbfl_z_Hbfk: "(\\E x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))) == ?z_hbfk" (is "?z_hbfl == _")
    by (unfold bEx_def)
    have z_Hbfl: "?z_hbfl" (is "\\E x : ?z_hbfy(x)")
    by (unfold z_Hbfl_z_Hbfk, fact z_Hbfk)
    have z_Hbfz: "?z_hbfy((CHOOSE x:((x \\in Term)&((((currentTerm[(CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((x=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), x))&(a_statehash_primea=except(state, (CHOOSE x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. ((((currentTerm[x]) < (currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((newTerm=(currentTerm[(CHOOSE x:((x \\in Server)&bEx(Server, (\<lambda>t. bEx(Term, (\<lambda>newTerm. ((((currentTerm[t]) < (currentTerm[x]))&((newTerm=(currentTerm[x]))&((a_currentTermhash_primea=except(currentTerm, t, newTerm))&(a_statehash_primea=except(state, t, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config))))))))))]))&((a_currentTermhash_primea=except(currentTerm, x, newTerm))&(a_statehash_primea=except(state, x, Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))), Secondary)))))&((a_configVersionhash_primea=configVersion)&((a_configTermhash_primea=configTerm)&(a_confighash_primea=config)))))))" (is "?z_hbgb&?z_hbgc")
    by (rule zenon_ex_choose_0 [of "?z_hbfy", OF z_Hbfl])
    have z_Hbgc: "?z_hbgc" (is "?z_hbgd&?z_hgp")
    by (rule zenon_and_1 [OF z_Hbfz])
    have z_Hgp: "?z_hgp" (is "?z_hfx&?z_hgq")
    by (rule zenon_and_1 [OF z_Hbgc])
    have z_Hgq: "?z_hgq" (is "?z_hgr&?z_hfw")
    by (rule zenon_and_1 [OF z_Hgp])
    have z_Hgr: "?z_hgr"
    by (rule zenon_and_0 [OF z_Hgq])
    show FALSE
    proof (rule notE [OF z_Hf])
     have z_Hbge: "(configTerm=a_configTermhash_primea)"
     by (rule sym [OF z_Hgr])
     have z_Hgs: "?z_hgs"
     by (rule subst [where P="(\<lambda>zenon_Vyfl. (zenon_Vyfl \\in FuncSet(Server, Nat)))", OF z_Hbge], fact z_Hba)
     thus "?z_hgs" .
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 121"; *} qed
lemma ob'183:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTermsExpr suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition ReconfigAction suppressed *)
(* usable definition SendConfigAction suppressed *)
(* usable definition BecomeLeaderAction suppressed *)
(* usable definition UpdateTermsAction suppressed *)
(* usable definition Next suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition IndAuto suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'157: "(((Term) = (Nat)))"
assumes v'158: "(((Version) = (Nat)))"
assumes v'161: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'177: "(IndAuto)"
assumes v'178: "(Next)"
fixes s
assumes s_in : "(s \<in> (Server))"
assumes v'195: "(\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nv \<in> (Term) : ((((((nv) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nv), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))) \<and> ((((nv) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nv), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))))"
assumes v'196: "(((IndAuto) \<Longrightarrow> (\<And> s_1 :: c. s_1 \<in> (Server) \<Longrightarrow> (\<And> Q :: c. Q \<in> ((Quorums ((fapply ((config), (s_1)))))) \<Longrightarrow> (\<And> nv :: c. nv \<in> (Nat) \<Longrightarrow> (((((nv) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s_1), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q))), (nv), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))) \<Longrightarrow> (\<forall> t \<in> (Server) : ((geq ((fapply ((currentTerm), (s_1))), (fapply ((configTerm), (t)))))))))))))"
shows "((geq ((fapply ((currentTerm), (s))), (fapply ((configTerm), (s))))))"(is "PROP ?ob'183")
proof -
ML_command {* writeln "*** TLAPS ENTER 183"; *}
show "PROP ?ob'183"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_64092e.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_64092e.znn.out
;; obligation #183
$hyp "v'157" (= Term arith.N)
$hyp "v'158" (= Version
arith.N)
$hyp "v'161" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'177" IndAuto
$hyp "v'178" Next
$hyp "s_in" (TLA.in s Server)
$hyp "v'195" (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nv) (/\ (/\ (= nv
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nv))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nv (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nv)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion))) (/\ (= nv
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nv))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nv (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nv)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))))))))
$hyp "v'196" (=> IndAuto (TLA.bAll Server ((s_1) (TLA.bAll (Quorums (TLA.fapply config s_1)) ((Q) (TLA.bAll arith.N ((nv) (=> (/\ (= nv
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q) (TLA.bAll Q ((v) (CanVoteForConfig v s_1 nv)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q) nv (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 nv)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))) (TLA.bAll Server ((t) (arith.le (TLA.fapply configTerm t)
(TLA.fapply currentTerm s_1))))))))))))
$goal (arith.le (TLA.fapply configTerm s)
(TLA.fapply currentTerm s))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Ha:"(Term=Nat)"
 using v'157 by blast
 have z_Hg:"bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hg")
 using v'195 by blast
 have z_Hh:"(IndAuto=>bAll(Server, (\<lambda>s_1. bAll(Quorums((config[s_1])), (\<lambda>Q. bAll(Nat, (\<lambda>nv. (((nv=((currentTerm[s_1]) + 1))&((Q \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s_1, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[s_1]))))))))))))" (is "_=>?z_hcu")
 using v'196 by blast
 have z_Hf:"(s \\in Server)" (is "?z_hf")
 using s_in by blast
 have z_Hd:"IndAuto"
 using v'177 by blast
 have zenon_L1_: "bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[s])))) ==> (~((configTerm[s]) <= (currentTerm[s]))) ==> ?z_hf ==> FALSE" (is "?z_hei ==> ?z_hi ==> _ ==> FALSE")
 proof -
  assume z_Hei:"?z_hei"
  assume z_Hi:"?z_hi" (is "~?z_hel")
  assume z_Hf:"?z_hf"
  have z_Hen_z_Hei: "(\\A x:((x \\in Server)=>((configTerm[x]) <= (currentTerm[s])))) == ?z_hei" (is "?z_hen == _")
  by (unfold bAll_def)
  have z_Hen: "?z_hen" (is "\\A x : ?z_het(x)")
  by (unfold z_Hen_z_Hei, fact z_Hei)
  have z_Heu: "?z_het(s)"
  by (rule zenon_all_0 [of "?z_het" "s", OF z_Hen])
  show FALSE
  proof (rule zenon_imply [OF z_Heu])
   assume z_Hev:"(~?z_hf)"
   show FALSE
   by (rule notE [OF z_Hev z_Hf])
  next
   assume z_Hel:"?z_hel"
   show FALSE
   by (rule notE [OF z_Hi z_Hel])
  qed
 qed
 assume z_Hi:"(~((configTerm[s]) <= (currentTerm[s])))" (is "~?z_hel")
 have z_Hew_z_Hg: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) == ?z_hg" (is "?z_hew == _")
 by (unfold bEx_def)
 have z_Hew: "?z_hew" (is "\\E x : ?z_hfw(x)")
 by (unfold z_Hew_z_Hg, fact z_Hg)
 have z_Hfx: "?z_hfw((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hfz&?z_hga")
 by (rule zenon_ex_choose_0 [of "?z_hfw", OF z_Hew])
 have z_Hga: "?z_hga"
 by (rule zenon_and_1 [OF z_Hfx])
 have z_Hgb_z_Hga: "(\\E x:((x \\in Term)&(((x=((currentTerm[s]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((x=((currentTerm[s]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))) == ?z_hga" (is "?z_hgb == _")
 by (unfold bEx_def)
 have z_Hgb: "?z_hgb" (is "\\E x : ?z_hhf(x)")
 by (unfold z_Hgb_z_Hga, fact z_Hga)
 have z_Hhg: "?z_hhf((CHOOSE x:((x \\in Term)&(((x=((currentTerm[s]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((x=((currentTerm[s]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))&((nv=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))" (is "?z_hhi&?z_hhj")
 by (rule zenon_ex_choose_0 [of "?z_hhf", OF z_Hgb])
 have z_Hhi: "?z_hhi"
 by (rule zenon_and_0 [OF z_Hhg])
 have z_Hhj: "?z_hhj" (is "?z_hhk&_")
 by (rule zenon_and_1 [OF z_Hhg])
 have z_Hhk: "?z_hhk" (is "?z_hhl&?z_hhm")
 by (rule zenon_and_0 [OF z_Hhj])
 have z_Hhk: "?z_hhk"
 by (rule zenon_and_1 [OF z_Hhj])
 have z_Hhl: "?z_hhl" (is "?z_hhh=?z_hu")
 by (rule zenon_and_0 [OF z_Hhk])
 have z_Hhm: "?z_hhm" (is "?z_hgi&?z_hhn")
 by (rule zenon_and_1 [OF z_Hhk])
 have z_Hgi: "?z_hgi"
 by (rule zenon_and_0 [OF z_Hhm])
 have z_Hhn: "?z_hhn" (is "?z_hbg&?z_hho")
 by (rule zenon_and_1 [OF z_Hhm])
 have z_Hbg: "?z_hbg"
 by (rule zenon_and_0 [OF z_Hhn])
 have z_Hho: "?z_hho" (is "?z_hgl&?z_hhp")
 by (rule zenon_and_1 [OF z_Hhn])
 have z_Hgl: "?z_hgl"
 by (rule zenon_and_0 [OF z_Hho])
 have z_Hhp: "?z_hhp" (is "?z_hhq&?z_hhr")
 by (rule zenon_and_1 [OF z_Hho])
 have z_Hhq: "?z_hhq"
 by (rule zenon_and_0 [OF z_Hhp])
 have z_Hhr: "?z_hhr" (is "?z_hhs&?z_hht")
 by (rule zenon_and_1 [OF z_Hhp])
 have z_Hhs: "?z_hhs" (is "_=?z_hhu")
 by (rule zenon_and_0 [OF z_Hhr])
 have z_Hht: "?z_hht" (is "?z_hgx&?z_hhv")
 by (rule zenon_and_1 [OF z_Hhr])
 have z_Hgx: "?z_hgx" (is "_=?z_hgy")
 by (rule zenon_and_0 [OF z_Hht])
 have z_Hhv: "?z_hhv" (is "?z_hhw&?z_hco")
 by (rule zenon_and_1 [OF z_Hht])
 have z_Hhw: "?z_hhw" (is "_=?z_hhx")
 by (rule zenon_and_0 [OF z_Hhv])
 have z_Hco: "?z_hco" (is "?z_hcp&?z_hcr")
 by (rule zenon_and_1 [OF z_Hhv])
 have z_Hcp: "?z_hcp"
 by (rule zenon_and_0 [OF z_Hco])
 have z_Hcr: "?z_hcr"
 by (rule zenon_and_1 [OF z_Hco])
 show FALSE
 proof (rule zenon_imply [OF z_Hh])
  assume z_Hhy:"(~IndAuto)"
  show FALSE
  by (rule notE [OF z_Hhy z_Hd])
 next
  assume z_Hcu:"?z_hcu"
  have z_Hhz_z_Hcu: "(\\A x:((x \\in Server)=>bAll(Quorums((config[x])), (\<lambda>Q. bAll(Nat, (\<lambda>nv. (((nv=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, nv))&?z_hco))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[x]))))))))))) == ?z_hcu" (is "?z_hhz == _")
  by (unfold bAll_def)
  have z_Hhz: "?z_hhz" (is "\\A x : ?z_hjj(x)")
  by (unfold z_Hhz_z_Hcu, fact z_Hcu)
  have z_Hjk: "(?z_hhh \\in Nat)" (is "?z_hjk")
  by (rule subst [where P="(\<lambda>zenon_Vpa. (?z_hhh \\in zenon_Vpa))", OF z_Ha z_Hhi])
  have z_Hjo: "?z_hjj(s)" (is "_=>?z_hjp")
  by (rule zenon_all_0 [of "?z_hjj" "s", OF z_Hhz])
  show FALSE
  proof (rule zenon_imply [OF z_Hjo])
   assume z_Hev:"(~?z_hf)"
   show FALSE
   by (rule notE [OF z_Hev z_Hf])
  next
   assume z_Hjp:"?z_hjp"
   have z_Hjq_z_Hjp: "(\\A x:((x \\in Quorums((config[s])))=>bAll(Nat, (\<lambda>nv. (((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[s]))))))))) == ?z_hjp" (is "?z_hjq == _")
   by (unfold bAll_def)
   have z_Hjq: "?z_hjq" (is "\\A x : ?z_hjv(x)")
   by (unfold z_Hjq_z_Hjp, fact z_Hjp)
   have z_Hjw: "?z_hjv((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))&((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))))))))" (is "_=>?z_hjx")
   by (rule zenon_all_0 [of "?z_hjv" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))&((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco)))))))))))))", OF z_Hjq])
   show FALSE
   proof (rule zenon_imply [OF z_Hjw])
    assume z_Hjy:"(~?z_hgi)"
    show FALSE
    by (rule notE [OF z_Hjy z_Hgi])
   next
    assume z_Hjx:"?z_hjx"
    have z_Hjz_z_Hjx: "(\\A x:((x \\in Nat)=>(((x=?z_hu)&(?z_hgi&(?z_hbg&(?z_hgl&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))&((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nv. (((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco))))))))&((nv=?z_hu)&((x \\in Quorums((config[s])))&(?z_hbg&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hco)))))))))))))), x, (currentTerm[s_1])))))&(?z_hgx&((a_configTermhash_primea=except(configTerm, s, x))&?z_hco))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[s]))))))) == ?z_hjx" (is "?z_hjz == _")
    by (unfold bAll_def)
    have z_Hjz: "?z_hjz" (is "\\A x : ?z_hkd(x)")
    by (unfold z_Hjz_z_Hjx, fact z_Hjx)
    have z_Hke: "?z_hkd(?z_hhh)" (is "_=>?z_hkf")
    by (rule zenon_all_0 [of "?z_hkd" "?z_hhh", OF z_Hjz])
    show FALSE
    proof (rule zenon_imply [OF z_Hke])
     assume z_Hkg:"(~?z_hjk)"
     show FALSE
     by (rule notE [OF z_Hkg z_Hjk])
    next
     assume z_Hkf:"?z_hkf" (is "_=>?z_hei")
     show FALSE
     proof (rule zenon_imply [OF z_Hkf])
      assume z_Hkh:"(~?z_hhk)"
      show FALSE
      proof (rule zenon_notand [OF z_Hkh])
       assume z_Hki:"(?z_hhh~=?z_hu)"
       show FALSE
       by (rule notE [OF z_Hki z_Hhl])
      next
       assume z_Hkj:"(~?z_hhm)"
       show FALSE
       proof (rule zenon_notand [OF z_Hkj])
        assume z_Hjy:"(~?z_hgi)"
        show FALSE
        by (rule notE [OF z_Hjy z_Hgi])
       next
        assume z_Hkk:"(~?z_hhn)"
        show FALSE
        proof (rule zenon_notand [OF z_Hkk])
         assume z_Hkl:"(~?z_hbg)"
         show FALSE
         by (rule notE [OF z_Hkl z_Hbg])
        next
         assume z_Hkm:"(~?z_hho)"
         show FALSE
         proof (rule zenon_notand [OF z_Hkm])
          assume z_Hkn:"(~?z_hgl)"
          show FALSE
          by (rule notE [OF z_Hkn z_Hgl])
         next
          assume z_Hko:"(~?z_hhp)"
          show FALSE
          proof (rule zenon_notand [OF z_Hko])
           assume z_Hkp:"(~?z_hhq)"
           show FALSE
           by (rule notE [OF z_Hkp z_Hhq])
          next
           assume z_Hkq:"(~?z_hhr)"
           show FALSE
           proof (rule zenon_notand [OF z_Hkq])
            assume z_Hkr:"(a_currentTermhash_primea~=?z_hhu)"
            show FALSE
            by (rule notE [OF z_Hkr z_Hhs])
           next
            assume z_Hks:"(~?z_hht)"
            show FALSE
            proof (rule zenon_notand [OF z_Hks])
             assume z_Hkt:"(a_statehash_primea~=?z_hgy)"
             show FALSE
             by (rule notE [OF z_Hkt z_Hgx])
            next
             assume z_Hku:"(~?z_hhv)"
             show FALSE
             proof (rule zenon_notand [OF z_Hku])
              assume z_Hkv:"(a_configTermhash_primea~=?z_hhx)"
              show FALSE
              by (rule notE [OF z_Hkv z_Hhw])
             next
              assume z_Hkw:"(~?z_hco)"
              show FALSE
              proof (rule zenon_notand [OF z_Hkw])
               assume z_Hkx:"(a_confighash_primea~=config)"
               show FALSE
               by (rule notE [OF z_Hkx z_Hcp])
              next
               assume z_Hky:"(a_configVersionhash_primea~=configVersion)"
               show FALSE
               by (rule notE [OF z_Hky z_Hcr])
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hei:"?z_hei"
      show FALSE
      by (rule zenon_L1_ [OF z_Hei z_Hi z_Hf])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 183"; *} qed
lemma ob'375:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTermsExpr suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition BecomeLeader suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition ReconfigAction suppressed *)
(* usable definition SendConfigAction suppressed *)
(* usable definition BecomeLeaderAction suppressed *)
(* usable definition UpdateTermsAction suppressed *)
(* usable definition Next suppressed *)
(* usable definition OnePrimaryPerTerm suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'153: "(((Term) = (Nat)))"
assumes v'154: "(((Version) = (Nat)))"
assumes v'157: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
assumes v'184: "((TypeOK) & (Safety) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : ((((QuorumsOverlap ((fapply ((config), (i))), (fapply ((config), (j)))))) \<or> ((((ConfigDisabled ((i)))) \<or> ((((ConfigDisabled ((j)))) \<and> (TRUE))))))))) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (((((fapply ((config), (i))) = (fapply ((config), (j))))) \<or> ((((IsNewerConfig ((j), (i)))) \<or> ((((IsNewerConfig ((i), (j)))) \<and> (TRUE))))))))) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (((((fapply ((configTerm), (j))) = (fapply ((currentTerm), (j))))) \<or> ((((~ (((fapply ((state), (j))) = (Primary))))) \<and> (TRUE))))))))"
fixes p
assumes p_in : "(p \<in> (Server))"
fixes newConfig
assumes newConfig_in : "(newConfig \<in> ((SUBSET (Server))))"
fixes nv
assumes nv_in : "(nv \<in> (Version))"
assumes v'188: "(((ConfigQuorumCheck ((p)))) & ((TermQuorumCheck ((p)))) & (((p) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (p))))) & ((greater ((nv), (fapply ((configVersion), (p)))))))"
assumes v'189: "(((fapply ((state), (p))) = (Primary)))"
assumes v'190: "((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (p))))) \<union> (((fapply ((config), (p))) \\ (newConfig))))))))))"
assumes v'191: "((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (fapply ((currentTerm), (p)))])))"
assumes v'192: "((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(p)] = (nv)])))"
assumes v'193: "((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(p)] = (newConfig)])))"
assumes v'194: "((((a_currentTermhash_primea :: c)) = (currentTerm)))"
assumes v'195: "((((a_statehash_primea :: c)) = (state)))"
assumes v'196: "((((TypeOK) & (Safety) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : ((((QuorumsOverlap ((fapply ((config), (i))), (fapply ((config), (j)))))) \<or> ((((ConfigDisabled ((i)))) \<or> ((((ConfigDisabled ((j)))) \<and> (TRUE))))))))) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (((((fapply ((config), (i))) = (fapply ((config), (j))))) \<or> ((((IsNewerConfig ((j), (i)))) \<or> ((((IsNewerConfig ((i), (j)))) \<and> (TRUE))))))))) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (((((fapply ((configTerm), (j))) = (fapply ((currentTerm), (j))))) \<or> ((((~ (((fapply ((state), (j))) = (Primary))))) \<and> (TRUE)))))))) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<And> newConfig_1 :: c. newConfig_1 \<in> ((SUBSET (Server))) \<Longrightarrow> (\<And> nv_1 :: c. nv_1 \<in> (Version) \<Longrightarrow> (((((fapply ((state), (s))) = (Primary))) & ((ConfigQuorumCheck ((s)))) & ((TermQuorumCheck ((s)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig_1) \\ (fapply ((config), (s))))) \<union> (((fapply ((config), (s))) \\ (newConfig_1)))))))))) & (((s) \<in> (newConfig_1))) & (((newConfig_1) \<noteq> (fapply ((config), (s))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (fapply ((currentTerm), (s)))]))) & ((greater ((nv_1), (fapply ((configVersion), (s)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s)] = (nv_1)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s)] = (newConfig_1)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))) \<Longrightarrow> (\<forall> t \<in> (Server) : ((geq ((fapply ((currentTerm), (s))), (fapply ((configTerm), (t)))))))))))))"
shows "(\<forall> n \<in> (Server) : ((geq ((fapply ((configTerm), (p))), (fapply ((configTerm), (n)))))))"(is "PROP ?ob'375")
proof -
ML_command {* writeln "*** TLAPS ENTER 375"; *}
show "PROP ?ob'375"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_c19df5.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_c19df5.znn.out
;; obligation #375
$hyp "v'153" (= Term arith.N)
$hyp "v'154" (= Version
arith.N)
$hyp "v'157" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'184" (/\ TypeOK Safety
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (\/ (QuorumsOverlap (TLA.fapply config i)
(TLA.fapply config j)) (\/ (ConfigDisabled i) (/\ (ConfigDisabled j)
T.)))))))
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (\/ (= (TLA.fapply config i)
(TLA.fapply config j)) (\/ (IsNewerConfig j i) (/\ (IsNewerConfig i j)
T.))))))) a_Inv3915unde_1unde_1unde_defa a_Inv3246unde_1unde_2unde_defa
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (\/ (= (TLA.fapply configTerm j)
(TLA.fapply currentTerm j)) (/\ (-. (= (TLA.fapply state j) Primary))
T.)))))))
$hyp "p_in" (TLA.in p Server)
$hyp "newConfig_in" (TLA.in newConfig (TLA.SUBSET Server))
$hyp "nv_in" (TLA.in nv Version)
$hyp "v'188" (/\ (ConfigQuorumCheck p) (TermQuorumCheck p) (TLA.in p
newConfig) (-. (= newConfig (TLA.fapply config p)))
(arith.lt (TLA.fapply configVersion p)
nv))
$hyp "v'189" (= (TLA.fapply state p)
Primary)
$hyp "v'190" (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig (TLA.fapply config p))
(TLA.setminus (TLA.fapply config p)
newConfig))))
$hyp "v'191" (= a_configTermhash_primea
(TLA.except configTerm p (TLA.fapply currentTerm p)))
$hyp "v'192" (= a_configVersionhash_primea
(TLA.except configVersion p nv))
$hyp "v'193" (= a_confighash_primea
(TLA.except config p newConfig))
$hyp "v'194" (= a_currentTermhash_primea
currentTerm)
$hyp "v'195" (= a_statehash_primea state)
$hyp "v'196" (=> (/\ TypeOK Safety
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (\/ (QuorumsOverlap (TLA.fapply config i)
(TLA.fapply config j)) (\/ (ConfigDisabled i) (/\ (ConfigDisabled j)
T.)))))))
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (\/ (= (TLA.fapply config i)
(TLA.fapply config j)) (\/ (IsNewerConfig j i) (/\ (IsNewerConfig i j)
T.))))))) a_Inv3915unde_1unde_1unde_defa a_Inv3246unde_1unde_2unde_defa
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (\/ (= (TLA.fapply configTerm j)
(TLA.fapply currentTerm j)) (/\ (-. (= (TLA.fapply state j) Primary))
T.))))))) (TLA.bAll Server ((s) (TLA.bAll (TLA.SUBSET Server) ((newConfig_1) (TLA.bAll Version ((nv_1) (=> (/\ (= (TLA.fapply state s)
Primary) (ConfigQuorumCheck s) (TermQuorumCheck s) (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig_1 (TLA.fapply config s))
(TLA.setminus (TLA.fapply config s) newConfig_1)))) (TLA.in s newConfig_1)
(-. (= newConfig_1 (TLA.fapply config s))) (= a_configTermhash_primea
(TLA.except configTerm s (TLA.fapply currentTerm s)))
(arith.lt (TLA.fapply configVersion s) nv_1) (= a_configVersionhash_primea
(TLA.except configVersion s nv_1)) (= a_confighash_primea
(TLA.except config s newConfig_1)) (/\ (= a_currentTermhash_primea
currentTerm) (= a_statehash_primea
state))) (TLA.bAll Server ((t) (arith.le (TLA.fapply configTerm t)
(TLA.fapply currentTerm s))))))))))))
$goal (TLA.bAll Server ((n) (arith.le (TLA.fapply configTerm n)
(TLA.fapply configTerm p))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"(TypeOK&(Safety&(bAll(Server, (\<lambda>i. bAll(Server, (\<lambda>j. (QuorumsOverlap((config[i]), (config[j]))|(ConfigDisabled(i)|(ConfigDisabled(j)&TRUE)))))))&(bAll(Server, (\<lambda>i. bAll(Server, (\<lambda>j. (((config[i])=(config[j]))|(IsNewerConfig(j, i)|(IsNewerConfig(i, j)&TRUE)))))))&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&bAll(Server, (\<lambda>i. bAll(Server, (\<lambda>j. (((configTerm[j])=(currentTerm[j]))|(((state[j])~=Primary)&TRUE))))))))))))" (is "_&?z_hs")
 using v'184 by blast
 have z_Hb:"(Version=Nat)"
 using v'154 by blast
 have z_Hi:"((state[p])=Primary)" (is "?z_hcs=_")
 using v'189 by blast
 have z_Hk:"(a_configTermhash_primea=except(configTerm, p, (currentTerm[p])))" (is "_=?z_hcv")
 using v'191 by blast
 have z_Hl:"(a_configVersionhash_primea=except(configVersion, p, nv))" (is "_=?z_hcy")
 using v'192 by blast
 have z_Hm:"(a_confighash_primea=except(config, p, newConfig))" (is "_=?z_hdc")
 using v'193 by blast
 have z_Hn:"(a_currentTermhash_primea=currentTerm)"
 using v'194 by blast
 have z_Ho:"(a_statehash_primea=state)"
 using v'195 by blast
 have z_Hg:"(nv \\in Version)" (is "?z_hg")
 using nv_in by blast
 have z_Hf:"(newConfig \\in SUBSET(Server))" (is "?z_hf")
 using newConfig_in by blast
 have z_Hj:"(1=Cardinality(((newConfig \\ (config[p])) \\cup ((config[p]) \\ newConfig))))" (is "?z_hdh=?z_hdi")
 using v'190 by blast
 have z_He:"(p \\in Server)" (is "?z_he")
 using p_in by blast
 have z_Hp:"((TypeOK&?z_hs)=>bAll(Server, (\<lambda>s. bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Version, (\<lambda>nv_1. ((((state[s])=Primary)&(ConfigQuorumCheck(s)&(TermQuorumCheck(s)&((?z_hdh=Cardinality(((newConfig_1 \\ (config[s])) \\cup ((config[s]) \\ newConfig_1))))&((s \\in newConfig_1)&((newConfig_1~=(config[s]))&((a_configTermhash_primea=except(configTerm, s, (currentTerm[s])))&(((configVersion[s]) < nv_1)&((a_configVersionhash_primea=except(configVersion, s, nv_1))&((a_confighash_primea=except(config, s, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[s]))))))))))))" (is "?z_hd=>?z_hdn")
 using v'196 by blast
 have z_Hh:"(ConfigQuorumCheck(p)&(TermQuorumCheck(p)&((p \\in newConfig)&((newConfig~=(config[p]))&((configVersion[p]) < nv)))))" (is "?z_hfi&?z_hfj")
 using v'188 by blast
 have zenon_L1_: "(?z_hcs=Primary) ==> (?z_hcs~=Primary) ==> FALSE" (is "?z_hi ==> ?z_hfr ==> FALSE")
 proof -
  assume z_Hi:"?z_hi"
  assume z_Hfr:"?z_hfr"
  show FALSE
  by (rule notE [OF z_Hfr z_Hi])
 qed
 have zenon_L2_: "(a_currentTermhash_primea=currentTerm) ==> (a_currentTermhash_primea~=currentTerm) ==> FALSE" (is "?z_hn ==> ?z_hfs ==> FALSE")
 proof -
  assume z_Hn:"?z_hn"
  assume z_Hfs:"?z_hfs"
  show FALSE
  by (rule notE [OF z_Hfs z_Hn])
 qed
 have zenon_L3_: "(a_statehash_primea=state) ==> (a_statehash_primea~=state) ==> FALSE" (is "?z_ho ==> ?z_hft ==> FALSE")
 proof -
  assume z_Ho:"?z_ho"
  assume z_Hft:"?z_hft"
  show FALSE
  by (rule notE [OF z_Hft z_Ho])
 qed
 have zenon_L4_: "(?z_hcs=Primary) ==> (\\A x:((x \\in Server)=>(((configTerm[x])=(currentTerm[x]))|(((state[x])~=Primary)&TRUE)))) ==> ?z_he ==> ((currentTerm[p])~=(configTerm[p])) ==> FALSE" (is "?z_hi ==> ?z_hfu ==> _ ==> ?z_hgf ==> FALSE")
 proof -
  assume z_Hi:"?z_hi"
  assume z_Hfu:"?z_hfu" (is "\\A x : ?z_hgh(x)")
  assume z_He:"?z_he"
  assume z_Hgf:"?z_hgf" (is "?z_hcw~=?z_hgg")
  have z_Hgi: "?z_hgh(p)" (is "_=>?z_hgj")
  by (rule zenon_all_0 [of "?z_hgh" "p", OF z_Hfu])
  show FALSE
  proof (rule zenon_imply [OF z_Hgi])
   assume z_Hgk:"(~?z_he)"
   show FALSE
   by (rule notE [OF z_Hgk z_He])
  next
   assume z_Hgj:"?z_hgj" (is "?z_hgl|?z_hgm")
   show FALSE
   proof (rule zenon_or [OF z_Hgj])
    assume z_Hgl:"?z_hgl"
    show FALSE
    by (rule zenon_eqsym [OF z_Hgl z_Hgf])
   next
    assume z_Hgm:"?z_hgm" (is "?z_hfr&?z_hbl")
    have z_Hfr: "?z_hfr"
    by (rule zenon_and_0 [OF z_Hgm])
    show FALSE
    by (rule notE [OF z_Hfr z_Hi])
   qed
  qed
 qed
 have zenon_L5_: "(?z_hcs=Primary) ==> bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[p])))) ==> (\\A x:((x \\in Server)=>(((configTerm[x])=(currentTerm[x]))|(((state[x])~=Primary)&TRUE)))) ==> ?z_he ==> (~((configTerm[(CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p])))))]) <= (configTerm[p]))) ==> ((CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p]))))) \\in Server) ==> FALSE" (is "?z_hi ==> ?z_hgn ==> ?z_hfu ==> _ ==> ?z_hgq ==> ?z_hgx ==> FALSE")
 proof -
  assume z_Hi:"?z_hi"
  assume z_Hgn:"?z_hgn"
  assume z_Hfu:"?z_hfu" (is "\\A x : ?z_hgh(x)")
  assume z_He:"?z_he"
  assume z_Hgq:"?z_hgq" (is "~?z_hgr")
  assume z_Hgx:"?z_hgx"
  have z_Hgy_z_Hgn: "(\\A x:((x \\in Server)=>((configTerm[x]) <= (currentTerm[p])))) == ?z_hgn" (is "?z_hgy == _")
  by (unfold bAll_def)
  have z_Hgy: "?z_hgy" (is "\\A x : ?z_hhb(x)")
  by (unfold z_Hgy_z_Hgn, fact z_Hgn)
  have z_Hhc: "?z_hhb((CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p]))))))" (is "_=>?z_hhd")
  by (rule zenon_all_0 [of "?z_hhb" "(CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p])))))", OF z_Hgy])
  show FALSE
  proof (rule zenon_imply [OF z_Hhc])
   assume z_Hhe:"(~?z_hgx)"
   show FALSE
   by (rule notE [OF z_Hhe z_Hgx])
  next
   assume z_Hhd:"?z_hhd"
   show FALSE
   proof (rule notE [OF z_Hgq])
    have z_Hhf: "((currentTerm[p])=(configTerm[p]))" (is "?z_hcw=?z_hgg")
    proof (rule zenon_nnpp [of "(?z_hcw=?z_hgg)"])
     assume z_Hgf:"(?z_hcw~=?z_hgg)"
     show FALSE
     by (rule zenon_L4_ [OF z_Hi z_Hfu z_He z_Hgf])
    qed
    have z_Hgr: "?z_hgr"
    by (rule subst [where P="(\<lambda>zenon_Vvj. ((configTerm[(CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= ?z_hgg))))]) <= zenon_Vvj))", OF z_Hhf], fact z_Hhd)
    thus "?z_hgr" .
   qed
  qed
 qed
 have zenon_L6_: "(Version=Nat) ==> (?z_hcs=Primary) ==> (a_configTermhash_primea=?z_hcv) ==> (a_configVersionhash_primea=?z_hcy) ==> (a_confighash_primea=?z_hdc) ==> (a_currentTermhash_primea=currentTerm) ==> (a_statehash_primea=state) ==> bAll(Server, (\<lambda>j. (((configTerm[j])=(currentTerm[j]))|(((state[j])~=Primary)&TRUE)))) ==> (\\A x:((x \\in Server)=>bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Version, (\<lambda>nv_1. ((((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((?z_hdh=Cardinality(((newConfig_1 \\ (config[x])) \\cup ((config[x]) \\ newConfig_1))))&((x \\in newConfig_1)&((newConfig_1~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < nv_1)&((a_configVersionhash_primea=except(configVersion, x, nv_1))&((a_confighash_primea=except(config, x, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[x]))))))))))) ==> ?z_he ==> ((CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p]))))) \\in Server) ==> (~((configTerm[(CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p])))))]) <= (configTerm[p]))) ==> ((configVersion[p]) < nv) ==> (newConfig~=(config[p])) ==> (p \\in newConfig) ==> (?z_hdh=?z_hdi) ==> TermQuorumCheck(p) ==> ?z_hfi ==> ?z_hf ==> ?z_hg ==> FALSE" (is "?z_hb ==> ?z_hi ==> ?z_hk ==> ?z_hl ==> ?z_hm ==> ?z_hn ==> ?z_ho ==> ?z_hcd ==> ?z_hhj ==> _ ==> ?z_hgx ==> ?z_hgq ==> ?z_hfp ==> ?z_hfo ==> ?z_hfm ==> ?z_hj ==> ?z_hfk ==> _ ==> _ ==> _ ==> FALSE")
 proof -
  assume z_Hb:"?z_hb"
  assume z_Hi:"?z_hi"
  assume z_Hk:"?z_hk"
  assume z_Hl:"?z_hl"
  assume z_Hm:"?z_hm"
  assume z_Hn:"?z_hn"
  assume z_Ho:"?z_ho"
  assume z_Hcd:"?z_hcd"
  assume z_Hhj:"?z_hhj" (is "\\A x : ?z_hiw(x)")
  assume z_He:"?z_he"
  assume z_Hgx:"?z_hgx"
  assume z_Hgq:"?z_hgq" (is "~?z_hgr")
  assume z_Hfp:"?z_hfp"
  assume z_Hfo:"?z_hfo" (is "_~=?z_hdl")
  assume z_Hfm:"?z_hfm"
  assume z_Hj:"?z_hj"
  assume z_Hfk:"?z_hfk"
  assume z_Hfi:"?z_hfi"
  assume z_Hf:"?z_hf"
  assume z_Hg:"?z_hg"
  have z_Hfu_z_Hcd: "(\\A x:((x \\in Server)=>(((configTerm[x])=(currentTerm[x]))|(((state[x])~=Primary)&TRUE)))) == ?z_hcd" (is "?z_hfu == _")
  by (unfold bAll_def)
  have z_Hfu: "?z_hfu" (is "\\A x : ?z_hgh(x)")
  by (unfold z_Hfu_z_Hcd, fact z_Hcd)
  have z_Hix: "(nv \\in Nat)" (is "?z_hix")
  by (rule subst [where P="(\<lambda>zenon_Vk. (nv \\in zenon_Vk))", OF z_Hb z_Hg])
  have z_Hjb: "?z_hiw(p)" (is "_=>?z_hjc")
  by (rule zenon_all_0 [of "?z_hiw" "p", OF z_Hhj])
  show FALSE
  proof (rule zenon_imply [OF z_Hjb])
   assume z_Hgk:"(~?z_he)"
   show FALSE
   by (rule notE [OF z_Hgk z_He])
  next
   assume z_Hjc:"?z_hjc"
   have z_Hjd_z_Hjc: "(\\A x:((x \\in SUBSET(Server))=>bAll(Version, (\<lambda>nv_1. ((?z_hi&(?z_hfi&(?z_hfk&((?z_hdh=Cardinality(((x \\ ?z_hdl) \\cup (?z_hdl \\ x))))&((p \\in x)&((x~=?z_hdl)&(?z_hk&(((configVersion[p]) < nv_1)&((a_configVersionhash_primea=except(configVersion, p, nv_1))&((a_confighash_primea=except(config, p, x))&(?z_hn&?z_ho)))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[p]))))))))) == ?z_hjc" (is "?z_hjd == _")
   by (unfold bAll_def)
   have z_Hjd: "?z_hjd" (is "\\A x : ?z_hkf(x)")
   by (unfold z_Hjd_z_Hjc, fact z_Hjc)
   have z_Hkg: "?z_hkf(newConfig)" (is "_=>?z_hkh")
   by (rule zenon_all_0 [of "?z_hkf" "newConfig", OF z_Hjd])
   show FALSE
   proof (rule zenon_imply [OF z_Hkg])
    assume z_Hki:"(~?z_hf)"
    show FALSE
    by (rule notE [OF z_Hki z_Hf])
   next
    assume z_Hkh:"?z_hkh"
    have z_Hkj: "bAll(Nat, (\<lambda>nv_1. ((?z_hi&(?z_hfi&(?z_hfk&(?z_hj&(?z_hfm&(?z_hfo&(?z_hk&(((configVersion[p]) < nv_1)&((a_configVersionhash_primea=except(configVersion, p, nv_1))&(?z_hm&(?z_hn&?z_ho)))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[p])))))))" (is "?z_hkj")
    by (rule subst [where P="(\<lambda>zenon_Vzf. bAll(zenon_Vzf, (\<lambda>nv_1. ((?z_hi&(?z_hfi&(?z_hfk&(?z_hj&(?z_hfm&(?z_hfo&(?z_hk&(((configVersion[p]) < nv_1)&((a_configVersionhash_primea=except(configVersion, p, nv_1))&(?z_hm&(?z_hn&?z_ho)))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[p]))))))))", OF z_Hb z_Hkh])
    have z_Hkz_z_Hkj: "(\\A x:((x \\in Nat)=>((?z_hi&(?z_hfi&(?z_hfk&(?z_hj&(?z_hfm&(?z_hfo&(?z_hk&(((configVersion[p]) < x)&((a_configVersionhash_primea=except(configVersion, p, x))&(?z_hm&(?z_hn&?z_ho)))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[p]))))))) == ?z_hkj" (is "?z_hkz == _")
    by (unfold bAll_def)
    have z_Hkz: "?z_hkz" (is "\\A x : ?z_hlp(x)")
    by (unfold z_Hkz_z_Hkj, fact z_Hkj)
    have z_Hlq: "?z_hlp(nv)" (is "_=>?z_hlr")
    by (rule zenon_all_0 [of "?z_hlp" "nv", OF z_Hkz])
    show FALSE
    proof (rule zenon_imply [OF z_Hlq])
     assume z_Hls:"(~?z_hix)"
     show FALSE
     by (rule notE [OF z_Hls z_Hix])
    next
     assume z_Hlr:"?z_hlr" (is "?z_hlt=>?z_hgn")
     show FALSE
     proof (rule zenon_imply [OF z_Hlr])
      assume z_Hlu:"(~?z_hlt)" (is "~(_&?z_hlv)")
      show FALSE
      proof (rule zenon_notand [OF z_Hlu])
       assume z_Hfr:"(?z_hcs~=Primary)"
       show FALSE
       by (rule notE [OF z_Hfr z_Hi])
      next
       assume z_Hlw:"(~?z_hlv)" (is "~(_&?z_hlx)")
       show FALSE
       proof (rule zenon_notand [OF z_Hlw])
        assume z_Hly:"(~?z_hfi)"
        show FALSE
        by (rule notE [OF z_Hly z_Hfi])
       next
        assume z_Hlz:"(~?z_hlx)" (is "~(_&?z_hma)")
        show FALSE
        proof (rule zenon_notand [OF z_Hlz])
         assume z_Hmb:"(~?z_hfk)"
         show FALSE
         by (rule notE [OF z_Hmb z_Hfk])
        next
         assume z_Hmc:"(~?z_hma)" (is "~(_&?z_hmd)")
         show FALSE
         proof (rule zenon_notand [OF z_Hmc])
          assume z_Hme:"(?z_hdh~=?z_hdi)"
          show FALSE
          by (rule notE [OF z_Hme z_Hj])
         next
          assume z_Hmf:"(~?z_hmd)" (is "~(_&?z_hmg)")
          show FALSE
          proof (rule zenon_notand [OF z_Hmf])
           assume z_Hmh:"(~?z_hfm)"
           show FALSE
           by (rule notE [OF z_Hmh z_Hfm])
          next
           assume z_Hmi:"(~?z_hmg)" (is "~(_&?z_hmj)")
           show FALSE
           proof (rule zenon_notand [OF z_Hmi])
            assume z_Hmk:"(~?z_hfo)" (is "~~?z_hml")
            show FALSE
            by (rule notE [OF z_Hmk z_Hfo])
           next
            assume z_Hmm:"(~?z_hmj)" (is "~(_&?z_hmn)")
            show FALSE
            proof (rule zenon_notand [OF z_Hmm])
             assume z_Hmo:"(a_configTermhash_primea~=?z_hcv)"
             show FALSE
             by (rule notE [OF z_Hmo z_Hk])
            next
             assume z_Hmp:"(~?z_hmn)" (is "~(_&?z_hmq)")
             show FALSE
             proof (rule zenon_notand [OF z_Hmp])
              assume z_Hmr:"(~?z_hfp)"
              show FALSE
              by (rule notE [OF z_Hmr z_Hfp])
             next
              assume z_Hms:"(~?z_hmq)" (is "~(_&?z_hkv)")
              show FALSE
              proof (rule zenon_notand [OF z_Hms])
               assume z_Hmt:"(a_configVersionhash_primea~=?z_hcy)"
               show FALSE
               by (rule notE [OF z_Hmt z_Hl])
              next
               assume z_Hmu:"(~?z_hkv)" (is "~(_&?z_hfc)")
               show FALSE
               proof (rule zenon_notand [OF z_Hmu])
               assume z_Hmv:"(a_confighash_primea~=?z_hdc)"
               show FALSE
               by (rule notE [OF z_Hmv z_Hm])
               next
               assume z_Hmw:"(~?z_hfc)"
               show FALSE
               proof (rule zenon_notand [OF z_Hmw])
               assume z_Hfs:"(a_currentTermhash_primea~=currentTerm)"
               show FALSE
               by (rule notE [OF z_Hfs z_Hn])
               next
               assume z_Hft:"(a_statehash_primea~=state)"
               show FALSE
               by (rule notE [OF z_Hft z_Ho])
               qed
               qed
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hgn:"?z_hgn"
      show FALSE
      by (rule zenon_L5_ [OF z_Hi z_Hgn z_Hfu z_He z_Hgq z_Hgx])
     qed
    qed
   qed
  qed
 qed
 assume z_Hq:"(~bAll(Server, (\<lambda>n. ((configTerm[n]) <= (configTerm[p])))))" (is "~?z_hmx")
 have z_Hr: "TypeOK"
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hs: "?z_hs" (is "_&?z_hu")
 by (rule zenon_and_1 [OF z_Hd])
 have z_Ht: "Safety"
 by (rule zenon_and_0 [OF z_Hs])
 have z_Hu: "?z_hu" (is "?z_hv&?z_hbm")
 by (rule zenon_and_1 [OF z_Hs])
 have z_Hv: "?z_hv"
 by (rule zenon_and_0 [OF z_Hu])
 have z_Hbm: "?z_hbm" (is "?z_hbn&?z_hbx")
 by (rule zenon_and_1 [OF z_Hu])
 have z_Hbn: "?z_hbn"
 by (rule zenon_and_0 [OF z_Hbm])
 have z_Hbx: "?z_hbx" (is "_&?z_hbz")
 by (rule zenon_and_1 [OF z_Hbm])
 have z_Hby: "a_Inv3915unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hbx])
 have z_Hbz: "?z_hbz" (is "_&?z_hcb")
 by (rule zenon_and_1 [OF z_Hbx])
 have z_Hca: "a_Inv3246unde_1unde_2unde_defa"
 by (rule zenon_and_0 [OF z_Hbz])
 have z_Hcb: "?z_hcb"
 by (rule zenon_and_1 [OF z_Hbz])
 have z_Hnc_z_Hcb: "(\\A x:((x \\in Server)=>bAll(Server, (\<lambda>j. (((configTerm[j])=(currentTerm[j]))|(((state[j])~=Primary)&TRUE)))))) == ?z_hcb" (is "?z_hnc == _")
 by (unfold bAll_def)
 have z_Hnc: "?z_hnc" (is "\\A x : ?z_hne(x)")
 by (unfold z_Hnc_z_Hcb, fact z_Hcb)
 have z_Hfi: "?z_hfi"
 by (rule zenon_and_0 [OF z_Hh])
 have z_Hfj: "?z_hfj" (is "?z_hfk&?z_hfl")
 by (rule zenon_and_1 [OF z_Hh])
 have z_Hfk: "?z_hfk"
 by (rule zenon_and_0 [OF z_Hfj])
 have z_Hfl: "?z_hfl" (is "?z_hfm&?z_hfn")
 by (rule zenon_and_1 [OF z_Hfj])
 have z_Hfm: "?z_hfm"
 by (rule zenon_and_0 [OF z_Hfl])
 have z_Hfn: "?z_hfn" (is "?z_hfo&?z_hfp")
 by (rule zenon_and_1 [OF z_Hfl])
 have z_Hfo: "?z_hfo" (is "_~=?z_hdl")
 by (rule zenon_and_0 [OF z_Hfn])
 have z_Hfp: "?z_hfp"
 by (rule zenon_and_1 [OF z_Hfn])
 have z_Hnf_z_Hq: "(~(\\A x:((x \\in Server)=>((configTerm[x]) <= (configTerm[p]))))) == (~?z_hmx)" (is "?z_hnf == ?z_hq")
 by (unfold bAll_def)
 have z_Hnf: "?z_hnf" (is "~(\\A x : ?z_hnh(x))")
 by (unfold z_Hnf_z_Hq, fact z_Hq)
 have z_Hni: "(\\E x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p])))))" (is "\\E x : ?z_hnj(x)")
 by (rule zenon_notallex_0 [of "?z_hnh", OF z_Hnf])
 have z_Hnk: "?z_hnj((CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p]))))))" (is "~(?z_hgx=>?z_hgr)")
 by (rule zenon_ex_choose_0 [of "?z_hnj", OF z_Hni])
 have z_Hgx: "?z_hgx"
 by (rule zenon_notimply_0 [OF z_Hnk])
 have z_Hgq: "(~?z_hgr)"
 by (rule zenon_notimply_1 [OF z_Hnk])
 show FALSE
 proof (rule zenon_imply [OF z_Hp])
  assume z_Hnl:"(~?z_hd)"
  show FALSE
  proof (rule zenon_notand [OF z_Hnl])
   assume z_Hnm:"(~TypeOK)"
   show FALSE
   by (rule notE [OF z_Hnm z_Hr])
  next
   assume z_Hnn:"(~?z_hs)"
   show FALSE
   proof (rule zenon_notand [OF z_Hnn])
    assume z_Hno:"(~Safety)"
    show FALSE
    by (rule notE [OF z_Hno z_Ht])
   next
    assume z_Hnp:"(~?z_hu)"
    show FALSE
    proof (rule zenon_notand [OF z_Hnp])
     assume z_Hnq:"(~?z_hv)"
     show FALSE
     by (rule notE [OF z_Hnq z_Hv])
    next
     assume z_Hnr:"(~?z_hbm)"
     show FALSE
     proof (rule zenon_notand [OF z_Hnr])
      assume z_Hns:"(~?z_hbn)"
      show FALSE
      by (rule notE [OF z_Hns z_Hbn])
     next
      assume z_Hnt:"(~?z_hbx)"
      show FALSE
      proof (rule zenon_notand [OF z_Hnt])
       assume z_Hnu:"(~a_Inv3915unde_1unde_1unde_defa)"
       show FALSE
       by (rule notE [OF z_Hnu z_Hby])
      next
       assume z_Hnv:"(~?z_hbz)"
       show FALSE
       proof (rule zenon_notand [OF z_Hnv])
        assume z_Hnw:"(~a_Inv3246unde_1unde_2unde_defa)"
        show FALSE
        by (rule notE [OF z_Hnw z_Hca])
       next
        assume z_Hnx:"(~?z_hcb)"
        show FALSE
        by (rule notE [OF z_Hnx z_Hcb])
       qed
      qed
     qed
    qed
   qed
  qed
 next
  assume z_Hdn:"?z_hdn"
  have z_Hhj_z_Hdn: "(\\A x:((x \\in Server)=>bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Version, (\<lambda>nv_1. ((((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((?z_hdh=Cardinality(((newConfig_1 \\ (config[x])) \\cup ((config[x]) \\ newConfig_1))))&((x \\in newConfig_1)&((newConfig_1~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < nv_1)&((a_configVersionhash_primea=except(configVersion, x, nv_1))&((a_confighash_primea=except(config, x, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t. ((configTerm[t]) <= (currentTerm[x]))))))))))) == ?z_hdn" (is "?z_hhj == _")
  by (unfold bAll_def)
  have z_Hhj: "?z_hhj" (is "\\A x : ?z_hiw(x)")
  by (unfold z_Hhj_z_Hdn, fact z_Hdn)
  have z_Hny: "?z_hne((CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p]))))))" (is "_=>?z_hcd")
  by (rule zenon_all_0 [of "?z_hne" "(CHOOSE x:(~((x \\in Server)=>((configTerm[x]) <= (configTerm[p])))))", OF z_Hnc])
  show FALSE
  proof (rule zenon_imply [OF z_Hny])
   assume z_Hhe:"(~?z_hgx)"
   show FALSE
   by (rule notE [OF z_Hhe z_Hgx])
  next
   assume z_Hcd:"?z_hcd"
   show FALSE
   by (rule zenon_L6_ [OF z_Hb z_Hi z_Hk z_Hl z_Hm z_Hn z_Ho z_Hcd z_Hhj z_He z_Hgx z_Hgq z_Hfp z_Hfo z_Hfm z_Hj z_Hfk z_Hfi z_Hf z_Hg])
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 375"; *} qed
lemma ob'515:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'190: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'193: "(((Server) \<noteq> ({})))"
assumes v'194: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'195: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'196: "(((Primary) \<noteq> (Secondary)))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (Server))"
assumes v'224: "(((\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nts \<in> (Term) : ((((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))) \<Longrightarrow> (FALSE)))"
assumes v'225: "(((\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nt \<in> (Term) : ((((nt) = ((arith_add ((fapply ((currentTerm), (t))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (t)))))))) & (((t) \<in> (fapply ((config), (t))))) & (((t) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (t), (nt))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nt), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (t))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (nt)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))) \<Longrightarrow> (FALSE)))"
assumes v'226: "(((TypeOK) \<Longrightarrow> (\<And> s_1 :: c. s_1 \<in> (Server) \<Longrightarrow> ((((Quorums ((fapply ((config), (s_1)))))) \<subseteq> ((SUBSET (Server))))))))"
assumes v'227: "(\<exists> s_1 \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s_1), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
assumes v'228: "((\<exists> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (\<exists> nts \<in> (Term) : ((((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))) | (\<exists> Q \<in> ((Quorums ((fapply ((config), (t)))))) : (\<exists> ntt \<in> (Term) : ((((ntt) = ((arith_add ((fapply ((currentTerm), (t))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (t)))))))) & (((t) \<in> (fapply ((config), (t))))) & (((t) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (t), (ntt))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (ntt), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (t))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (ntt)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
shows "(FALSE)"(is "PROP ?ob'515")
proof -
ML_command {* writeln "*** TLAPS ENTER 515"; *}
show "PROP ?ob'515"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_55223f.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_55223f.znn.out
;; obligation #515
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'190" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'193" (-. (= Server
TLA.emptyset))
$hyp "v'194" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'195" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'196" (-. (= Primary
Secondary))
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t Server)
$hyp "v'224" (=> (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nts) (/\ (= nts
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nts))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nts)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))))))) F.)
$hyp "v'225" (=> (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nt) (/\ (= nt
(arith.add (TLA.fapply currentTerm t) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config t))) (TLA.in t (TLA.fapply config t)) (TLA.in t
Q) (TLA.bAll Q ((v) (CanVoteForConfig v t nt))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nt (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 t) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm t nt)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))))))) F.)
$hyp "v'226" (=> TypeOK (TLA.bAll Server ((s_1) (TLA.subseteq (Quorums (TLA.fapply config s_1))
(TLA.SUBSET Server)))))
$hyp "v'227" (TLA.bEx Server ((s_1) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q) (TLA.bAll Q ((v) (CanVoteForConfig v s_1 newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q) newTerm (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$hyp "v'228" (\/ (TLA.bEx (Quorums (TLA.fapply config s)) ((Q) (TLA.bEx Term ((nts) (/\ (= nts
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nts))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nts)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion)))))))
(TLA.bEx (Quorums (TLA.fapply config t)) ((Q) (TLA.bEx Term ((ntt) (/\ (= ntt
(arith.add (TLA.fapply currentTerm t) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config t))) (TLA.in t (TLA.fapply config t)) (TLA.in t
Q) (TLA.bAll Q ((v) (CanVoteForConfig v t ntt))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) ntt (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 t) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm t ntt)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))))))))
$goal F.
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((TypeOK&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hq&_")
 using v'190 by blast
 have z_Hk:"(bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))=>FALSE)" (is "?z_hbe=>?z_hdo")
 using v'224 by blast
 have z_Hl:"(bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((Q \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))=>?z_hdo)" (is "?z_hdp=>_")
 using v'225 by blast
 have z_Hm:"(TypeOK=>bAll(Server, (\<lambda>s_1. (Quorums((config[s_1])) \\subseteq SUBSET(Server)))))" (is "_=>?z_hez")
 using v'226 by blast
 have z_Ho:"(bEx(Quorums((config[s])), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))|bEx(Quorums((config[t])), (\<lambda>Q. bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((Q \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hfe|?z_hff")
 using v'228 by blast
 have z_Hj:"(t \\in Server)" (is "?z_hj")
 using t_in by blast
 have z_Hi:"(s \\in Server)" (is "?z_hi")
 using s_in by blast
 assume z_Hp:"(~?z_hdo)"
 have z_Hq: "?z_hq" (is "_&?z_hs")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hr: "TypeOK"
 by (rule zenon_and_0 [OF z_Hq])
 show FALSE
 proof (rule zenon_imply [OF z_Hk])
  assume z_Hfg:"(~?z_hbe)"
  have z_Hfh_z_Hfg: "(~(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) == (~?z_hbe)" (is "?z_hfh == ?z_hfg")
  by (unfold bEx_def)
  have z_Hfh: "?z_hfh" (is "~(\\E x : ?z_hgi(x))")
  by (unfold z_Hfh_z_Hfg, fact z_Hfg)
  show FALSE
  proof (rule zenon_imply [OF z_Hl])
   assume z_Hgj:"(~?z_hdp)"
   have z_Hgk_z_Hgj: "(~(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) == (~?z_hdp)" (is "?z_hgk == ?z_hgj")
   by (unfold bEx_def)
   have z_Hgk: "?z_hgk" (is "~(\\E x : ?z_hhh(x))")
   by (unfold z_Hgk_z_Hgj, fact z_Hgj)
   show FALSE
   proof (rule zenon_imply [OF z_Hm])
    assume z_Hhi:"(~TypeOK)"
    show FALSE
    by (rule notE [OF z_Hhi z_Hr])
   next
    assume z_Hez:"?z_hez"
    have z_Hhj_z_Hez: "(\\A x:((x \\in Server)=>(Quorums((config[x])) \\subseteq SUBSET(Server)))) == ?z_hez" (is "?z_hhj == _")
    by (unfold bAll_def)
    have z_Hhj: "?z_hhj" (is "\\A x : ?z_hhp(x)")
    by (unfold z_Hhj_z_Hez, fact z_Hez)
    show FALSE
    proof (rule zenon_or [OF z_Ho])
     assume z_Hfe:"?z_hfe"
     have z_Hhq_z_Hfe: "(\\E x:((x \\in Quorums((config[s])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hfe" (is "?z_hhq == _")
     by (unfold bEx_def)
     have z_Hhq: "?z_hhq" (is "\\E x : ?z_hhs(x)")
     by (unfold z_Hhq_z_Hfe, fact z_Hfe)
     have z_Hht: "?z_hhs((CHOOSE x:((x \\in Quorums((config[s])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hhv&?z_hhw")
     by (rule zenon_ex_choose_0 [of "?z_hhs", OF z_Hhq])
     have z_Hhv: "?z_hhv"
     by (rule zenon_and_0 [OF z_Hht])
     have z_Hhw: "?z_hhw"
     by (rule zenon_and_1 [OF z_Hht])
     have z_Hhx: "~?z_hgi((CHOOSE x:((x \\in Quorums((config[s])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "~(?z_hhy&_)")
     by (rule zenon_notex_0 [of "?z_hgi" "(CHOOSE x:((x \\in Quorums((config[s])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))", OF z_Hfh])
     show FALSE
     proof (rule zenon_notand [OF z_Hhx])
      assume z_Hhz:"(~?z_hhy)"
      have z_Hia: "?z_hhp(s)" (is "_=>?z_hib")
      by (rule zenon_all_0 [of "?z_hhp" "s", OF z_Hhj])
      show FALSE
      proof (rule zenon_imply [OF z_Hia])
       assume z_Hic:"(~?z_hi)"
       show FALSE
       by (rule notE [OF z_Hic z_Hi])
      next
       assume z_Hib:"?z_hib"
       have z_Hid_z_Hib: "bAll(Quorums((config[s])), (\<lambda>zenon_Vma. (zenon_Vma \\in SUBSET(Server)))) == ?z_hib" (is "?z_hid == _")
       by (unfold subset_def)
       have z_Hid: "?z_hid"
       by (unfold z_Hid_z_Hib, fact z_Hib)
       have z_Hih_z_Hid: "(\\A x:((x \\in Quorums((config[s])))=>(x \\in SUBSET(Server)))) == ?z_hid" (is "?z_hih == _")
       by (unfold bAll_def)
       have z_Hih: "?z_hih" (is "\\A x : ?z_hij(x)")
       by (unfold z_Hih_z_Hid, fact z_Hid)
       have z_Hik: "?z_hij((CHOOSE x:((x \\in Quorums((config[s])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))"
       by (rule zenon_all_0 [of "?z_hij" "(CHOOSE x:((x \\in Quorums((config[s])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))", OF z_Hih])
       show FALSE
       proof (rule zenon_imply [OF z_Hik])
        assume z_Hil:"(~?z_hhv)"
        show FALSE
        by (rule notE [OF z_Hil z_Hhv])
       next
        assume z_Hhy:"?z_hhy"
        show FALSE
        by (rule notE [OF z_Hhz z_Hhy])
       qed
      qed
     next
      assume z_Him:"(~?z_hhw)"
      show FALSE
      by (rule notE [OF z_Him z_Hhw])
     qed
    next
     assume z_Hff:"?z_hff"
     have z_Hin_z_Hff: "(\\E x:((x \\in Quorums((config[t])))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hff" (is "?z_hin == _")
     by (unfold bEx_def)
     have z_Hin: "?z_hin" (is "\\E x : ?z_hip(x)")
     by (unfold z_Hin_z_Hff, fact z_Hff)
     have z_Hiq: "?z_hip((CHOOSE x:((x \\in Quorums((config[t])))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_his&?z_hit")
     by (rule zenon_ex_choose_0 [of "?z_hip", OF z_Hin])
     have z_His: "?z_his"
     by (rule zenon_and_0 [OF z_Hiq])
     have z_Hit: "?z_hit"
     by (rule zenon_and_1 [OF z_Hiq])
     have z_Hiu: "~?z_hhh((CHOOSE x:((x \\in Quorums((config[t])))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "~(?z_hiv&_)")
     by (rule zenon_notex_0 [of "?z_hhh" "(CHOOSE x:((x \\in Quorums((config[t])))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))", OF z_Hgk])
     show FALSE
     proof (rule zenon_notand [OF z_Hiu])
      assume z_Hiw:"(~?z_hiv)"
      have z_Hix: "?z_hhp(t)" (is "_=>?z_hiy")
      by (rule zenon_all_0 [of "?z_hhp" "t", OF z_Hhj])
      show FALSE
      proof (rule zenon_imply [OF z_Hix])
       assume z_Hiz:"(~?z_hj)"
       show FALSE
       by (rule notE [OF z_Hiz z_Hj])
      next
       assume z_Hiy:"?z_hiy"
       have z_Hja_z_Hiy: "bAll(Quorums((config[t])), (\<lambda>zenon_Vma. (zenon_Vma \\in SUBSET(Server)))) == ?z_hiy" (is "?z_hja == _")
       by (unfold subset_def)
       have z_Hja: "?z_hja"
       by (unfold z_Hja_z_Hiy, fact z_Hiy)
       have z_Hjb_z_Hja: "(\\A x:((x \\in Quorums((config[t])))=>(x \\in SUBSET(Server)))) == ?z_hja" (is "?z_hjb == _")
       by (unfold bAll_def)
       have z_Hjb: "?z_hjb" (is "\\A x : ?z_hjd(x)")
       by (unfold z_Hjb_z_Hja, fact z_Hja)
       have z_Hje: "?z_hjd((CHOOSE x:((x \\in Quorums((config[t])))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))"
       by (rule zenon_all_0 [of "?z_hjd" "(CHOOSE x:((x \\in Quorums((config[t])))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))", OF z_Hjb])
       show FALSE
       proof (rule zenon_imply [OF z_Hje])
        assume z_Hjf:"(~?z_his)"
        show FALSE
        by (rule notE [OF z_Hjf z_His])
       next
        assume z_Hiv:"?z_hiv"
        show FALSE
        by (rule notE [OF z_Hiw z_Hiv])
       qed
      qed
     next
      assume z_Hjg:"(~?z_hit)"
      show FALSE
      by (rule notE [OF z_Hjg z_Hit])
     qed
    qed
   qed
  next
   assume z_Hdo:"?z_hdo"
   show FALSE
   by (rule z_Hdo)
  qed
 next
  assume z_Hdo:"?z_hdo"
  show FALSE
  by (rule z_Hdo)
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 515"; *} qed
lemma ob'534:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'190: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'193: "(((Server) \<noteq> ({})))"
assumes v'194: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'195: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'196: "(((Primary) \<noteq> (Secondary)))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (Server))"
assumes v'230: "(\<exists> s_1 \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s_1), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
shows "(\<exists> p \<in> (Server) : (\<exists> Q \<in> ((Quorums ((fapply ((config), (p)))))) : (\<exists> nts \<in> (Term) : ((((nts) = ((arith_add ((fapply ((currentTerm), (p))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (p)))))))) & (((p) \<in> (fapply ((config), (p))))) & (((p) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (p), (nts))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (p))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (nts)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"(is "PROP ?ob'534")
proof -
ML_command {* writeln "*** TLAPS ENTER 534"; *}
show "PROP ?ob'534"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_7d7b78.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_7d7b78.znn.out
;; obligation #534
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'190" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'193" (-. (= Server
TLA.emptyset))
$hyp "v'194" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'195" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'196" (-. (= Primary
Secondary))
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t Server)
$hyp "v'230" (TLA.bEx Server ((s_1) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q) (TLA.bAll Q ((v) (CanVoteForConfig v s_1 newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q) newTerm (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$goal (TLA.bEx Server ((p) (TLA.bEx (Quorums (TLA.fapply config p)) ((Q) (TLA.bEx Term ((nts) (/\ (= nts
(arith.add (TLA.fapply currentTerm p) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config p))) (TLA.in p (TLA.fapply config p)) (TLA.in p
Q) (TLA.bAll Q ((v) (CanVoteForConfig v p nts))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 p) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm p nts)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hk:"bEx(Server, (\<lambda>s_1. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s_1]) + 1))&((Q \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s_1, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hk")
 using v'230 by blast
 assume z_Hl:"(~bEx(Server, (\<lambda>p. bEx(Quorums((config[p])), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[p]) + 1))&((Q \\in Quorums((config[p])))&((p \\in (config[p]))&((p \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, p, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=p), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, p, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "~?z_hcx")
 have z_Hel_z_Hk: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_hk" (is "?z_hel == _")
 by (unfold bEx_def)
 have z_Hel: "?z_hel" (is "\\E x : ?z_hft(x)")
 by (unfold z_Hel_z_Hk, fact z_Hk)
 have z_Hfu: "?z_hft((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hfw&?z_hfx")
 by (rule zenon_ex_choose_0 [of "?z_hft", OF z_Hel])
 have z_Hfw: "?z_hfw"
 by (rule zenon_and_0 [OF z_Hfu])
 have z_Hfx: "?z_hfx"
 by (rule zenon_and_1 [OF z_Hfu])
 have z_Hfy_z_Hfx: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hfx" (is "?z_hfy == _")
 by (unfold bEx_def)
 have z_Hfy: "?z_hfy" (is "\\E x : ?z_hhj(x)")
 by (unfold z_Hfy_z_Hfx, fact z_Hfx)
 have z_Hhk: "?z_hhj((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hhm&?z_hhn")
 by (rule zenon_ex_choose_0 [of "?z_hhj", OF z_Hfy])
 have z_Hhn: "?z_hhn"
 by (rule zenon_and_1 [OF z_Hhk])
 have z_Hho_z_Hhn: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hhn" (is "?z_hho == _")
 by (unfold bEx_def)
 have z_Hho: "?z_hho" (is "\\E x : ?z_hir(x)")
 by (unfold z_Hho_z_Hhn, fact z_Hhn)
 have z_His: "?z_hir((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hiu&?z_hiv")
 by (rule zenon_ex_choose_0 [of "?z_hir", OF z_Hho])
 have z_Hiv: "?z_hiv" (is "?z_hiw&?z_hix")
 by (rule zenon_and_1 [OF z_His])
 have z_Hix: "?z_hix" (is "?z_hhu&?z_hiy")
 by (rule zenon_and_1 [OF z_Hiv])
 have z_Hhu: "?z_hhu"
 by (rule zenon_and_0 [OF z_Hix])
 have z_Hiz_z_Hl: "(~(\\E x:((x \\in Server)&bEx(Quorums((config[x])), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))) == (~?z_hcx)" (is "?z_hiz == ?z_hl")
 by (unfold bEx_def)
 have z_Hiz: "?z_hiz" (is "~(\\E x : ?z_hjd(x))")
 by (unfold z_Hiz_z_Hl, fact z_Hl)
 have z_Hje: "~?z_hjd((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "~(_&?z_hjf)")
 by (rule zenon_notex_0 [of "?z_hjd" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))", OF z_Hiz])
 show FALSE
 proof (rule zenon_notand [OF z_Hje])
  assume z_Hjg:"(~?z_hfw)"
  show FALSE
  by (rule notE [OF z_Hjg z_Hfw])
 next
  assume z_Hjh:"(~?z_hjf)"
  have z_Hji_z_Hjh: "(~(\\E x:((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) == (~?z_hjf)" (is "?z_hji == ?z_hjh")
  by (unfold bEx_def)
  have z_Hji: "?z_hji" (is "~(\\E x : ?z_hjl(x))")
  by (unfold z_Hji_z_Hjh, fact z_Hjh)
  have z_Hjm: "~?z_hjl((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))"
  by (rule zenon_notex_0 [of "?z_hjl" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))", OF z_Hji])
  show FALSE
  proof (rule zenon_notand [OF z_Hjm])
   assume z_Hjn:"(~?z_hhu)"
   show FALSE
   by (rule notE [OF z_Hjn z_Hhu])
  next
   assume z_Hjo:"(~?z_hhn)"
   show FALSE
   by (rule notE [OF z_Hjo z_Hhn])
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 534"; *} qed
lemma ob'583:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'190: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'193: "(((Server) \<noteq> ({})))"
assumes v'194: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'195: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'196: "(((Primary) \<noteq> (Secondary)))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (Server))"
assumes v'224: "(\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nts \<in> (Term) : ((((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))"
fixes Q
assumes Q_in : "(Q \<in> ((SUBSET (Server))))"
fixes nts
assumes nts_in : "(nts \<in> (Term))"
assumes v'237: "((((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))))"
assumes v'238: "(((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0])))))))"
assumes v'239: "((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))])))"
assumes v'240: "((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))])))"
assumes v'241: "((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)])))"
assumes v'242: "((((a_confighash_primea :: c)) = (config)))"
assumes v'243: "((((a_configVersionhash_primea :: c)) = (configVersion)))"
assumes v'244: "(((TypeOK) \<Longrightarrow> (\<And> s_1 :: c. s_1 \<in> (Server) \<Longrightarrow> (\<And> Q_1 :: c. Q_1 \<in> ((Quorums ((fapply ((config), (s_1)))))) \<Longrightarrow> (\<And> nv :: c. nv \<in> (Nat) \<Longrightarrow> (((((nv) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q_1) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q_1))) & (\<forall> v \<in> (Q_1) : ((CanVoteForConfig ((v), (s_1), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q_1))), (nv), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q_1))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))) \<Longrightarrow> (((s_1) \<in> (ActiveConfigSet)))))))))"
shows "(((s) \<in> (ActiveConfigSet)))"(is "PROP ?ob'583")
proof -
ML_command {* writeln "*** TLAPS ENTER 583"; *}
show "PROP ?ob'583"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_e71947.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_e71947.znn.out
;; obligation #583
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'190" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'193" (-. (= Server
TLA.emptyset))
$hyp "v'194" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'195" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'196" (-. (= Primary
Secondary))
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t Server)
$hyp "v'224" (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nts) (/\ (= nts
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nts))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nts)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))
$hyp "Q_in" (TLA.in Q (TLA.SUBSET Server))
$hyp "nts_in" (TLA.in nts Term)
$hyp "v'237" (/\ (TLA.in Q (Quorums (TLA.fapply config s))) (TLA.in s
(TLA.fapply config s)) (TLA.in s Q) (TLA.bAll Q ((v) (CanVoteForConfig v s
nts))))
$hyp "v'238" (= nts (arith.add (TLA.fapply currentTerm s)
(TLA.fapply TLA.Succ 0)))
$hyp "v'239" (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1)))))
$hyp "v'240" (= a_statehash_primea (TLA.Fcn Server ((s_1) (TLA.cond (= s_1
s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1))))))
$hyp "v'241" (= a_configTermhash_primea
(TLA.except configTerm s nts))
$hyp "v'242" (= a_confighash_primea
config)
$hyp "v'243" (= a_configVersionhash_primea
configVersion)
$hyp "v'244" (=> TypeOK (TLA.bAll Server ((s_1) (TLA.bAll (Quorums (TLA.fapply config s_1)) ((Q_1) (TLA.bAll arith.N ((nv) (=> (/\ (= nv
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q_1
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q_1) (TLA.bAll Q_1 ((v) (CanVoteForConfig v s_1 nv)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q_1) nv (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q_1) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 nv)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion))) (TLA.in s_1
ActiveConfigSet)))))))))
$goal (TLA.in s
ActiveConfigSet)
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((TypeOK&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hw&_")
 using v'190 by blast
 have z_Ha:"(Term=Nat)"
 using v'150 by blast
 have z_Hk:"bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))" (is "?z_hk")
 using v'224 by blast
 have z_Hu:"(TypeOK=>bAll(Server, (\<lambda>s_1. bAll(Quorums((config[s_1])), (\<lambda>Q_1. bAll(Nat, (\<lambda>nv. (((nv=((currentTerm[s_1]) + 1))&((Q_1 \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, s_1, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), nv, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))=>(s_1 \\in ActiveConfigSet)))))))))" (is "_=>?z_hdo")
 using v'244 by blast
 have z_Hi:"(s \\in Server)" (is "?z_hi")
 using s_in by blast
 assume z_Hv:"(~(s \\in ActiveConfigSet))" (is "~?z_hfh")
 have z_Hw: "?z_hw" (is "_&?z_hy")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hx: "TypeOK"
 by (rule zenon_and_0 [OF z_Hw])
 have z_Hfi_z_Hk: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hk" (is "?z_hfi == _")
 by (unfold bEx_def)
 have z_Hfi: "?z_hfi" (is "\\E x : ?z_hgi(x)")
 by (unfold z_Hfi_z_Hk, fact z_Hk)
 have z_Hgj: "?z_hgi((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hgl&?z_hgm")
 by (rule zenon_ex_choose_0 [of "?z_hgi", OF z_Hfi])
 have z_Hgm: "?z_hgm"
 by (rule zenon_and_1 [OF z_Hgj])
 have z_Hgn_z_Hgm: "(\\E x:((x \\in Term)&((x=((currentTerm[s]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hgm" (is "?z_hgn == _")
 by (unfold bEx_def)
 have z_Hgn: "?z_hgn" (is "\\E x : ?z_hhq(x)")
 by (unfold z_Hgn_z_Hgm, fact z_Hgm)
 have z_Hhr: "?z_hhq((CHOOSE x:((x \\in Term)&((x=((currentTerm[s]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=((currentTerm[s]) + 1))&((x \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hht&?z_hhu")
 by (rule zenon_ex_choose_0 [of "?z_hhq", OF z_Hgn])
 have z_Hht: "?z_hht"
 by (rule zenon_and_0 [OF z_Hhr])
 have z_Hhu: "?z_hhu" (is "?z_hhv&?z_hhw")
 by (rule zenon_and_1 [OF z_Hhr])
 have z_Hhv: "?z_hhv" (is "?z_hhs=?z_hbt")
 by (rule zenon_and_0 [OF z_Hhu])
 have z_Hhw: "?z_hhw" (is "?z_hgt&?z_hhx")
 by (rule zenon_and_1 [OF z_Hhu])
 have z_Hgt: "?z_hgt"
 by (rule zenon_and_0 [OF z_Hhw])
 have z_Hhx: "?z_hhx" (is "?z_hcf&?z_hhy")
 by (rule zenon_and_1 [OF z_Hhw])
 have z_Hcf: "?z_hcf"
 by (rule zenon_and_0 [OF z_Hhx])
 have z_Hhy: "?z_hhy" (is "?z_hgw&?z_hhz")
 by (rule zenon_and_1 [OF z_Hhx])
 have z_Hgw: "?z_hgw"
 by (rule zenon_and_0 [OF z_Hhy])
 have z_Hhz: "?z_hhz" (is "?z_hia&?z_hib")
 by (rule zenon_and_1 [OF z_Hhy])
 have z_Hia: "?z_hia"
 by (rule zenon_and_0 [OF z_Hhz])
 have z_Hib: "?z_hib" (is "?z_hic&?z_hid")
 by (rule zenon_and_1 [OF z_Hhz])
 have z_Hic: "?z_hic" (is "_=?z_hie")
 by (rule zenon_and_0 [OF z_Hib])
 have z_Hid: "?z_hid" (is "?z_hhi&?z_hif")
 by (rule zenon_and_1 [OF z_Hib])
 have z_Hhi: "?z_hhi" (is "_=?z_hhj")
 by (rule zenon_and_0 [OF z_Hid])
 have z_Hif: "?z_hif" (is "?z_hig&?z_hdk")
 by (rule zenon_and_1 [OF z_Hid])
 have z_Hig: "?z_hig" (is "_=?z_hih")
 by (rule zenon_and_0 [OF z_Hif])
 have z_Hdk: "?z_hdk" (is "?z_hs&?z_ht")
 by (rule zenon_and_1 [OF z_Hif])
 have z_Hs: "?z_hs"
 by (rule zenon_and_0 [OF z_Hdk])
 have z_Ht: "?z_ht"
 by (rule zenon_and_1 [OF z_Hdk])
 show FALSE
 proof (rule zenon_imply [OF z_Hu])
  assume z_Hii:"(~TypeOK)"
  show FALSE
  by (rule notE [OF z_Hii z_Hx])
 next
  assume z_Hdo:"?z_hdo"
  have z_Hij_z_Hdo: "(\\A x:((x \\in Server)=>bAll(Quorums((config[x])), (\<lambda>Q_1. bAll(Nat, (\<lambda>nv. (((nv=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), nv, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, nv))&?z_hdk))))))))=>(x \\in ActiveConfigSet)))))))) == ?z_hdo" (is "?z_hij == _")
  by (unfold bAll_def)
  have z_Hij: "?z_hij" (is "\\A x : ?z_hjs(x)")
  by (unfold z_Hij_z_Hdo, fact z_Hdo)
  have z_Hjt: "(?z_hhs \\in Nat)" (is "?z_hjt")
  by (rule subst [where P="(\<lambda>zenon_Vjb. (?z_hhs \\in zenon_Vjb))", OF z_Ha z_Hht])
  have z_Hjx: "?z_hjs(s)" (is "_=>?z_hjy")
  by (rule zenon_all_0 [of "?z_hjs" "s", OF z_Hij])
  show FALSE
  proof (rule zenon_imply [OF z_Hjx])
   assume z_Hjz:"(~?z_hi)"
   show FALSE
   by (rule notE [OF z_Hjz z_Hi])
  next
   assume z_Hjy:"?z_hjy"
   have z_Hka_z_Hjy: "(\\A x:((x \\in Quorums((config[s])))=>bAll(Nat, (\<lambda>nv. (((nv=?z_hbt)&((x \\in Quorums((config[s])))&(?z_hcf&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), nv, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nv))&?z_hdk))))))))=>?z_hfh))))) == ?z_hjy" (is "?z_hka == _")
   by (unfold bAll_def)
   have z_Hka: "?z_hka" (is "\\A x : ?z_hky(x)")
   by (unfold z_Hka_z_Hjy, fact z_Hjy)
   have z_Hkz: "?z_hky((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=?z_hbt)&((x \\in Quorums((config[s])))&(?z_hcf&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&?z_hdk)))))))))))))" (is "_=>?z_hla")
   by (rule zenon_all_0 [of "?z_hky" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=?z_hbt)&((x \\in Quorums((config[s])))&(?z_hcf&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&?z_hdk))))))))))))", OF z_Hka])
   show FALSE
   proof (rule zenon_imply [OF z_Hkz])
    assume z_Hlb:"(~?z_hgt)"
    show FALSE
    by (rule notE [OF z_Hlb z_Hgt])
   next
    assume z_Hla:"?z_hla"
    have z_Hlc_z_Hla: "(\\A x:((x \\in Nat)=>(((x=?z_hbt)&(?z_hgt&(?z_hcf&(?z_hgw&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=?z_hbt)&((x \\in Quorums((config[s])))&(?z_hcf&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&?z_hdk)))))))))))), (\<lambda>v. CanVoteForConfig(v, s, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nts. ((nts=?z_hbt)&((x \\in Quorums((config[s])))&(?z_hcf&((s \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, s, nts)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nts, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, nts))&?z_hdk))))))))))))), x, (currentTerm[s_1])))))&(?z_hhi&((a_configTermhash_primea=except(configTerm, s, x))&?z_hdk))))))))=>?z_hfh))) == ?z_hla" (is "?z_hlc == _")
    by (unfold bAll_def)
    have z_Hlc: "?z_hlc" (is "\\A x : ?z_hlg(x)")
    by (unfold z_Hlc_z_Hla, fact z_Hla)
    have z_Hlh: "?z_hlg(?z_hhs)" (is "_=>?z_hli")
    by (rule zenon_all_0 [of "?z_hlg" "?z_hhs", OF z_Hlc])
    show FALSE
    proof (rule zenon_imply [OF z_Hlh])
     assume z_Hlj:"(~?z_hjt)"
     show FALSE
     by (rule notE [OF z_Hlj z_Hjt])
    next
     assume z_Hli:"?z_hli"
     show FALSE
     proof (rule zenon_imply [OF z_Hli])
      assume z_Hlk:"(~?z_hhu)"
      show FALSE
      proof (rule zenon_notand [OF z_Hlk])
       assume z_Hll:"(?z_hhs~=?z_hbt)"
       show FALSE
       by (rule notE [OF z_Hll z_Hhv])
      next
       assume z_Hlm:"(~?z_hhw)"
       show FALSE
       proof (rule zenon_notand [OF z_Hlm])
        assume z_Hlb:"(~?z_hgt)"
        show FALSE
        by (rule notE [OF z_Hlb z_Hgt])
       next
        assume z_Hln:"(~?z_hhx)"
        show FALSE
        proof (rule zenon_notand [OF z_Hln])
         assume z_Hlo:"(~?z_hcf)"
         show FALSE
         by (rule notE [OF z_Hlo z_Hcf])
        next
         assume z_Hlp:"(~?z_hhy)"
         show FALSE
         proof (rule zenon_notand [OF z_Hlp])
          assume z_Hlq:"(~?z_hgw)"
          show FALSE
          by (rule notE [OF z_Hlq z_Hgw])
         next
          assume z_Hlr:"(~?z_hhz)"
          show FALSE
          proof (rule zenon_notand [OF z_Hlr])
           assume z_Hls:"(~?z_hia)"
           show FALSE
           by (rule notE [OF z_Hls z_Hia])
          next
           assume z_Hlt:"(~?z_hib)"
           show FALSE
           proof (rule zenon_notand [OF z_Hlt])
            assume z_Hlu:"(a_currentTermhash_primea~=?z_hie)"
            show FALSE
            by (rule notE [OF z_Hlu z_Hic])
           next
            assume z_Hlv:"(~?z_hid)"
            show FALSE
            proof (rule zenon_notand [OF z_Hlv])
             assume z_Hlw:"(a_statehash_primea~=?z_hhj)"
             show FALSE
             by (rule notE [OF z_Hlw z_Hhi])
            next
             assume z_Hlx:"(~?z_hif)"
             show FALSE
             proof (rule zenon_notand [OF z_Hlx])
              assume z_Hly:"(a_configTermhash_primea~=?z_hih)"
              show FALSE
              by (rule notE [OF z_Hly z_Hig])
             next
              assume z_Hlz:"(~?z_hdk)"
              show FALSE
              proof (rule zenon_notand [OF z_Hlz])
               assume z_Hma:"(a_confighash_primea~=config)"
               show FALSE
               by (rule notE [OF z_Hma z_Hs])
              next
               assume z_Hmb:"(a_configVersionhash_primea~=configVersion)"
               show FALSE
               by (rule notE [OF z_Hmb z_Ht])
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hfh:"?z_hfh"
      show FALSE
      by (rule notE [OF z_Hv z_Hfh])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 583"; *} qed
lemma ob'587:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
assumes v'148: "(((Term) = (Nat)))"
assumes v'149: "(((Version) = (Nat)))"
assumes v'152: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'188: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (\<forall> Q \<in> ((Quorums ((fapply ((config), (j)))))) : (\<exists> n \<in> (Q) : ((((geq ((fapply ((currentTerm), (n))), (fapply ((configTerm), (i)))))) \<or> ((ConfigDisabled ((j)))))))))) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'191: "(((Server) \<noteq> ({})))"
assumes v'192: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'193: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'194: "(((Primary) \<noteq> (Secondary)))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (Server))"
assumes v'222: "(\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nts \<in> (Term) : ((((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))"
fixes Q
assumes Q_in : "(Q \<in> ((SUBSET (Server))))"
fixes nts
assumes nts_in : "(nts \<in> (Term))"
assumes v'236: "((((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))))"
assumes v'237: "(((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0])))))))"
assumes v'238: "((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))])))"
assumes v'239: "((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))])))"
assumes v'240: "((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)])))"
assumes v'241: "((((a_confighash_primea :: c)) = (config)))"
assumes v'242: "((((a_configVersionhash_primea :: c)) = (configVersion)))"
assumes v'243: "(((s) \<in> (subsetOf((Server), %s_1. ((~ ((ConfigDisabled ((s_1))))))))))"
shows "(\<exists> n \<in> (Q) : ((geq ((fapply ((currentTerm), (n))), (fapply ((configTerm), (t)))))))"(is "PROP ?ob'587")
proof -
ML_command {* writeln "*** TLAPS ENTER 587"; *}
show "PROP ?ob'587"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_5dd187.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_5dd187.znn.out
;; obligation #587
$hyp "v'148" (= Term arith.N)
$hyp "v'149" (= Version
arith.N)
$hyp "v'152" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'188" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (TLA.bAll (Quorums (TLA.fapply config j)) ((Q) (TLA.bEx Q ((n) (\/ (arith.le (TLA.fapply configTerm i)
(TLA.fapply currentTerm n)) (ConfigDisabled j))))))))))
a_Inv866unde_1unde_0unde_defa) Next)
$hyp "v'191" (-. (= Server
TLA.emptyset))
$hyp "v'192" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'193" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'194" (-. (= Primary
Secondary))
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t Server)
$hyp "v'222" (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nts) (/\ (= nts
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nts))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nts)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))
$hyp "Q_in" (TLA.in Q (TLA.SUBSET Server))
$hyp "nts_in" (TLA.in nts Term)
$hyp "v'236" (/\ (TLA.in Q (Quorums (TLA.fapply config s))) (TLA.in s
(TLA.fapply config s)) (TLA.in s Q) (TLA.bAll Q ((v) (CanVoteForConfig v s
nts))))
$hyp "v'237" (= nts (arith.add (TLA.fapply currentTerm s)
(TLA.fapply TLA.Succ 0)))
$hyp "v'238" (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1)))))
$hyp "v'239" (= a_statehash_primea (TLA.Fcn Server ((s_1) (TLA.cond (= s_1
s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1))))))
$hyp "v'240" (= a_configTermhash_primea
(TLA.except configTerm s nts))
$hyp "v'241" (= a_confighash_primea
config)
$hyp "v'242" (= a_configVersionhash_primea
configVersion)
$hyp "v'243" (TLA.in s
(TLA.subsetOf Server ((s_1) (-. (ConfigDisabled s_1)))))
$goal (TLA.bEx Q ((n) (arith.le (TLA.fapply configTerm t)
(TLA.fapply currentTerm n))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((TypeOK&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(bAll(Server, (\<lambda>i. bAll(Server, (\<lambda>j. bAll(Quorums((config[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((configTerm[i]) <= (currentTerm[n]))|ConfigDisabled(j))))))))))&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hw&_")
 using v'188 by blast
 have z_Hu:"(s \\in subsetOf(Server, (\<lambda>s_1. (~ConfigDisabled(s_1)))))" (is "?z_hu")
 using v'243 by blast
 have z_Hj:"(t \\in Server)" (is "?z_hj")
 using t_in by blast
 have z_Hi:"(s \\in Server)" (is "?z_hi")
 using s_in by blast
 have z_Hn:"((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, nts))))))" (is "?z_hcn&?z_hcq")
 using v'236 by blast
 assume z_Hv:"(~bEx(Q, (\<lambda>n. ((configTerm[t]) <= (currentTerm[n])))))" (is "~?z_hcz")
 have z_Hw: "?z_hw" (is "_&?z_hy")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hy: "?z_hy" (is "_&?z_hba")
 by (rule zenon_and_1 [OF z_Hw])
 have z_Hba: "?z_hba" (is "_&?z_hbc")
 by (rule zenon_and_1 [OF z_Hy])
 have z_Hbc: "?z_hbc" (is "_&?z_hbe")
 by (rule zenon_and_1 [OF z_Hba])
 have z_Hbe: "?z_hbe" (is "_&?z_hbg")
 by (rule zenon_and_1 [OF z_Hbc])
 have z_Hbg: "?z_hbg" (is "?z_hbh&_")
 by (rule zenon_and_1 [OF z_Hbe])
 have z_Hbh: "?z_hbh"
 by (rule zenon_and_0 [OF z_Hbg])
 have z_Hdd_z_Hbh: "(\\A x:((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((config[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((configTerm[x]) <= (currentTerm[n]))|ConfigDisabled(j)))))))))) == ?z_hbh" (is "?z_hdd == _")
 by (unfold bAll_def)
 have z_Hdd: "?z_hdd" (is "\\A x : ?z_hdq(x)")
 by (unfold z_Hdd_z_Hbh, fact z_Hbh)
 have z_Hcn: "?z_hcn"
 by (rule zenon_and_0 [OF z_Hn])
 have z_Hi: "?z_hi"
 by (rule zenon_in_subsetof_0 [of "s" "Server" "(\<lambda>s_1. (~ConfigDisabled(s_1)))", OF z_Hu])
 have z_Hdr: "(~ConfigDisabled(s))" (is "~?z_hds")
 by (rule zenon_in_subsetof_1 [of "s" "Server" "(\<lambda>s_1. (~ConfigDisabled(s_1)))", OF z_Hu])
 have z_Hdt_z_Hv: "(~(\\E x:((x \\in Q)&((configTerm[t]) <= (currentTerm[x]))))) == (~?z_hcz)" (is "?z_hdt == ?z_hv")
 by (unfold bEx_def)
 have z_Hdt: "?z_hdt" (is "~(\\E x : ?z_hdz(x))")
 by (unfold z_Hdt_z_Hv, fact z_Hv)
 have z_Hea: "?z_hdq(t)" (is "_=>?z_heb")
 by (rule zenon_all_0 [of "?z_hdq" "t", OF z_Hdd])
 show FALSE
 proof (rule zenon_imply [OF z_Hea])
  assume z_Hec:"(~?z_hj)"
  show FALSE
  by (rule notE [OF z_Hec z_Hj])
 next
  assume z_Heb:"?z_heb"
  have z_Hed_z_Heb: "(\\A x:((x \\in Server)=>bAll(Quorums((config[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((configTerm[t]) <= (currentTerm[n]))|ConfigDisabled(x)))))))) == ?z_heb" (is "?z_hed == _")
  by (unfold bAll_def)
  have z_Hed: "?z_hed" (is "\\A x : ?z_hen(x)")
  by (unfold z_Hed_z_Heb, fact z_Heb)
  have z_Heo: "?z_hen(s)" (is "_=>?z_hep")
  by (rule zenon_all_0 [of "?z_hen" "s", OF z_Hed])
  show FALSE
  proof (rule zenon_imply [OF z_Heo])
   assume z_Heq:"(~?z_hi)"
   show FALSE
   by (rule notE [OF z_Heq z_Hi])
  next
   assume z_Hep:"?z_hep"
   have z_Her_z_Hep: "(\\A x:((x \\in Quorums((config[s])))=>bEx(x, (\<lambda>n. (((configTerm[t]) <= (currentTerm[n]))|?z_hds))))) == ?z_hep" (is "?z_her == _")
   by (unfold bAll_def)
   have z_Her: "?z_her" (is "\\A x : ?z_hex(x)")
   by (unfold z_Her_z_Hep, fact z_Hep)
   have z_Hey: "?z_hex(Q)" (is "_=>?z_hez")
   by (rule zenon_all_0 [of "?z_hex" "Q", OF z_Her])
   show FALSE
   proof (rule zenon_imply [OF z_Hey])
    assume z_Hfa:"(~?z_hcn)"
    show FALSE
    by (rule notE [OF z_Hfa z_Hcn])
   next
    assume z_Hez:"?z_hez"
    have z_Hfb_z_Hez: "(\\E x:((x \\in Q)&(((configTerm[t]) <= (currentTerm[x]))|?z_hds))) == ?z_hez" (is "?z_hfb == _")
    by (unfold bEx_def)
    have z_Hfb: "?z_hfb" (is "\\E x : ?z_hfe(x)")
    by (unfold z_Hfb_z_Hez, fact z_Hez)
    have z_Hff: "?z_hfe((CHOOSE x:((x \\in Q)&(((configTerm[t]) <= (currentTerm[x]))|?z_hds))))" (is "?z_hfh&?z_hfi")
    by (rule zenon_ex_choose_0 [of "?z_hfe", OF z_Hfb])
    have z_Hfh: "?z_hfh"
    by (rule zenon_and_0 [OF z_Hff])
    have z_Hfi: "?z_hfi" (is "?z_hfj|_")
    by (rule zenon_and_1 [OF z_Hff])
    show FALSE
    proof (rule zenon_or [OF z_Hfi])
     assume z_Hfj:"?z_hfj"
     have z_Hfk: "~?z_hdz((CHOOSE x:((x \\in Q)&(((configTerm[t]) <= (currentTerm[x]))|?z_hds))))"
     by (rule zenon_notex_0 [of "?z_hdz" "(CHOOSE x:((x \\in Q)&(((configTerm[t]) <= (currentTerm[x]))|?z_hds)))", OF z_Hdt])
     show FALSE
     proof (rule zenon_notand [OF z_Hfk])
      assume z_Hfl:"(~?z_hfh)"
      show FALSE
      by (rule notE [OF z_Hfl z_Hfh])
     next
      assume z_Hfm:"(~?z_hfj)"
      show FALSE
      by (rule notE [OF z_Hfm z_Hfj])
     qed
    next
     assume z_Hds:"?z_hds"
     show FALSE
     by (rule notE [OF z_Hdr z_Hds])
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 587"; *} qed
lemma ob'628:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'190: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'193: "(((Server) \<noteq> ({})))"
assumes v'194: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'195: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'196: "(((Primary) \<noteq> (Secondary)))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (Server))"
assumes v'224: "(((\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nts \<in> (Term) : ((((nts) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nts))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nts), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nts)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))) \<Longrightarrow> (FALSE)))"
assumes v'225: "(\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> nt \<in> (Term) : ((((nt) = ((arith_add ((fapply ((currentTerm), (t))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (t)))))))) & (((t) \<in> (fapply ((config), (t))))) & (((t) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (t), (nt))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nt), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (t))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (nt)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))))"
fixes Q
assumes Q_in : "(Q \<in> ((SUBSET (Server))))"
fixes nt
assumes nt_in : "(nt \<in> (Term))"
assumes v'238: "((((Q) \<in> ((Quorums ((fapply ((config), (t)))))))) & (((t) \<in> (fapply ((config), (t))))) & (((t) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (t), (nt))))))"
assumes v'239: "(((nt) = ((arith_add ((fapply ((currentTerm), (t))), ((Succ[0])))))))"
assumes v'240: "((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nt), (fapply ((currentTerm), (s_1)))))])))"
assumes v'241: "((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (t))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))])))"
assumes v'242: "((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(t)] = (nt)])))"
assumes v'243: "((((a_confighash_primea :: c)) = (config)))"
assumes v'244: "((((a_configVersionhash_primea :: c)) = (configVersion)))"
assumes v'245: "(((TypeOK) \<Longrightarrow> (\<And> s_1 :: c. s_1 \<in> (Server) \<Longrightarrow> (\<And> Q_1 :: c. Q_1 \<in> ((Quorums ((fapply ((config), (s_1)))))) \<Longrightarrow> (\<And> nv :: c. nv \<in> (Nat) \<Longrightarrow> (((((nv) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q_1) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q_1))) & (\<forall> v \<in> (Q_1) : ((CanVoteForConfig ((v), (s_1), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q_1))), (nv), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q_1))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))) \<Longrightarrow> (((s_1) \<in> (ActiveConfigSet)))))))))"
shows "(((t) \<in> (ActiveConfigSet)))"(is "PROP ?ob'628")
proof -
ML_command {* writeln "*** TLAPS ENTER 628"; *}
show "PROP ?ob'628"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_138964.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_138964.znn.out
;; obligation #628
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'190" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'193" (-. (= Server
TLA.emptyset))
$hyp "v'194" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'195" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'196" (-. (= Primary
Secondary))
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t Server)
$hyp "v'224" (=> (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nts) (/\ (= nts
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nts))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nts (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nts)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))))))) F.)
$hyp "v'225" (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((nt) (/\ (= nt
(arith.add (TLA.fapply currentTerm t) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config t))) (TLA.in t (TLA.fapply config t)) (TLA.in t
Q) (TLA.bAll Q ((v) (CanVoteForConfig v t nt))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nt (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 t) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm t nt)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))
$hyp "Q_in" (TLA.in Q (TLA.SUBSET Server))
$hyp "nt_in" (TLA.in nt Term)
$hyp "v'238" (/\ (TLA.in Q (Quorums (TLA.fapply config t))) (TLA.in t
(TLA.fapply config t)) (TLA.in t Q) (TLA.bAll Q ((v) (CanVoteForConfig v t
nt))))
$hyp "v'239" (= nt (arith.add (TLA.fapply currentTerm t)
(TLA.fapply TLA.Succ 0)))
$hyp "v'240" (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nt (TLA.fapply currentTerm s_1)))))
$hyp "v'241" (= a_statehash_primea (TLA.Fcn Server ((s_1) (TLA.cond (= s_1
t) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1))))))
$hyp "v'242" (= a_configTermhash_primea
(TLA.except configTerm t nt))
$hyp "v'243" (= a_confighash_primea
config)
$hyp "v'244" (= a_configVersionhash_primea
configVersion)
$hyp "v'245" (=> TypeOK (TLA.bAll Server ((s_1) (TLA.bAll (Quorums (TLA.fapply config s_1)) ((Q_1) (TLA.bAll arith.N ((nv) (=> (/\ (= nv
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q_1
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q_1) (TLA.bAll Q_1 ((v) (CanVoteForConfig v s_1 nv)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q_1) nv (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q_1) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 nv)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion))) (TLA.in s_1
ActiveConfigSet)))))))))
$goal (TLA.in t
ActiveConfigSet)
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((TypeOK&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hx&_")
 using v'190 by blast
 have z_Ha:"(Term=Nat)"
 using v'150 by blast
 have z_Hl:"bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((Q \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))" (is "?z_hl")
 using v'225 by blast
 have z_Hv:"(TypeOK=>bAll(Server, (\<lambda>s_1. bAll(Quorums((config[s_1])), (\<lambda>Q_1. bAll(Nat, (\<lambda>nv. (((nv=((currentTerm[s_1]) + 1))&((Q_1 \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, s_1, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), nv, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))=>(s_1 \\in ActiveConfigSet)))))))))" (is "_=>?z_hdp")
 using v'245 by blast
 have z_Hj:"(t \\in Server)" (is "?z_hj")
 using t_in by blast
 assume z_Hw:"(~(t \\in ActiveConfigSet))" (is "~?z_hfi")
 have z_Hx: "?z_hx" (is "_&?z_hz")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hy: "TypeOK"
 by (rule zenon_and_0 [OF z_Hx])
 have z_Hfj_z_Hl: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hl" (is "?z_hfj == _")
 by (unfold bEx_def)
 have z_Hfj: "?z_hfj" (is "\\E x : ?z_hgj(x)")
 by (unfold z_Hfj_z_Hl, fact z_Hl)
 have z_Hgk: "?z_hgj((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hgm&?z_hgn")
 by (rule zenon_ex_choose_0 [of "?z_hgj", OF z_Hfj])
 have z_Hgn: "?z_hgn"
 by (rule zenon_and_1 [OF z_Hgk])
 have z_Hgo_z_Hgn: "(\\E x:((x \\in Term)&((x=((currentTerm[t]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, t, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hgn" (is "?z_hgo == _")
 by (unfold bEx_def)
 have z_Hgo: "?z_hgo" (is "\\E x : ?z_hhr(x)")
 by (unfold z_Hgo_z_Hgn, fact z_Hgn)
 have z_Hhs: "?z_hhr((CHOOSE x:((x \\in Term)&((x=((currentTerm[t]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, t, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=((currentTerm[t]) + 1))&((x \\in Quorums((config[t])))&((t \\in (config[t]))&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hhu&?z_hhv")
 by (rule zenon_ex_choose_0 [of "?z_hhr", OF z_Hgo])
 have z_Hhu: "?z_hhu"
 by (rule zenon_and_0 [OF z_Hhs])
 have z_Hhv: "?z_hhv" (is "?z_hhw&?z_hhx")
 by (rule zenon_and_1 [OF z_Hhs])
 have z_Hhw: "?z_hhw" (is "?z_hht=?z_hbu")
 by (rule zenon_and_0 [OF z_Hhv])
 have z_Hhx: "?z_hhx" (is "?z_hgu&?z_hhy")
 by (rule zenon_and_1 [OF z_Hhv])
 have z_Hgu: "?z_hgu"
 by (rule zenon_and_0 [OF z_Hhx])
 have z_Hhy: "?z_hhy" (is "?z_hcg&?z_hhz")
 by (rule zenon_and_1 [OF z_Hhx])
 have z_Hcg: "?z_hcg"
 by (rule zenon_and_0 [OF z_Hhy])
 have z_Hhz: "?z_hhz" (is "?z_hgx&?z_hia")
 by (rule zenon_and_1 [OF z_Hhy])
 have z_Hgx: "?z_hgx"
 by (rule zenon_and_0 [OF z_Hhz])
 have z_Hia: "?z_hia" (is "?z_hib&?z_hic")
 by (rule zenon_and_1 [OF z_Hhz])
 have z_Hib: "?z_hib"
 by (rule zenon_and_0 [OF z_Hia])
 have z_Hic: "?z_hic" (is "?z_hid&?z_hie")
 by (rule zenon_and_1 [OF z_Hia])
 have z_Hid: "?z_hid" (is "_=?z_hif")
 by (rule zenon_and_0 [OF z_Hic])
 have z_Hie: "?z_hie" (is "?z_hhj&?z_hig")
 by (rule zenon_and_1 [OF z_Hic])
 have z_Hhj: "?z_hhj" (is "_=?z_hhk")
 by (rule zenon_and_0 [OF z_Hie])
 have z_Hig: "?z_hig" (is "?z_hih&?z_hdl")
 by (rule zenon_and_1 [OF z_Hie])
 have z_Hih: "?z_hih" (is "_=?z_hii")
 by (rule zenon_and_0 [OF z_Hig])
 have z_Hdl: "?z_hdl" (is "?z_ht&?z_hu")
 by (rule zenon_and_1 [OF z_Hig])
 have z_Ht: "?z_ht"
 by (rule zenon_and_0 [OF z_Hdl])
 have z_Hu: "?z_hu"
 by (rule zenon_and_1 [OF z_Hdl])
 show FALSE
 proof (rule zenon_imply [OF z_Hv])
  assume z_Hij:"(~TypeOK)"
  show FALSE
  by (rule notE [OF z_Hij z_Hy])
 next
  assume z_Hdp:"?z_hdp"
  have z_Hik_z_Hdp: "(\\A x:((x \\in Server)=>bAll(Quorums((config[x])), (\<lambda>Q_1. bAll(Nat, (\<lambda>nv. (((nv=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), nv, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, nv))&?z_hdl))))))))=>(x \\in ActiveConfigSet)))))))) == ?z_hdp" (is "?z_hik == _")
  by (unfold bAll_def)
  have z_Hik: "?z_hik" (is "\\A x : ?z_hjt(x)")
  by (unfold z_Hik_z_Hdp, fact z_Hdp)
  have z_Hju: "(?z_hht \\in Nat)" (is "?z_hju")
  by (rule subst [where P="(\<lambda>zenon_Vkb. (?z_hht \\in zenon_Vkb))", OF z_Ha z_Hhu])
  have z_Hjy: "?z_hjt(t)" (is "_=>?z_hjz")
  by (rule zenon_all_0 [of "?z_hjt" "t", OF z_Hik])
  show FALSE
  proof (rule zenon_imply [OF z_Hjy])
   assume z_Hka:"(~?z_hj)"
   show FALSE
   by (rule notE [OF z_Hka z_Hj])
  next
   assume z_Hjz:"?z_hjz"
   have z_Hkb_z_Hjz: "(\\A x:((x \\in Quorums((config[t])))=>bAll(Nat, (\<lambda>nv. (((nv=?z_hbu)&((x \\in Quorums((config[t])))&(?z_hcg&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), nv, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nv))&?z_hdl))))))))=>?z_hfi))))) == ?z_hjz" (is "?z_hkb == _")
   by (unfold bAll_def)
   have z_Hkb: "?z_hkb" (is "\\A x : ?z_hkz(x)")
   by (unfold z_Hkb_z_Hjz, fact z_Hjz)
   have z_Hla: "?z_hkz((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=?z_hbu)&((x \\in Quorums((config[t])))&(?z_hcg&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&?z_hdl)))))))))))))" (is "_=>?z_hlb")
   by (rule zenon_all_0 [of "?z_hkz" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=?z_hbu)&((x \\in Quorums((config[t])))&(?z_hcg&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&?z_hdl))))))))))))", OF z_Hkb])
   show FALSE
   proof (rule zenon_imply [OF z_Hla])
    assume z_Hlc:"(~?z_hgu)"
    show FALSE
    by (rule notE [OF z_Hlc z_Hgu])
   next
    assume z_Hlb:"?z_hlb"
    have z_Hld_z_Hlb: "(\\A x:((x \\in Nat)=>(((x=?z_hbu)&(?z_hgu&(?z_hcg&(?z_hgx&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=?z_hbu)&((x \\in Quorums((config[t])))&(?z_hcg&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&?z_hdl)))))))))))), (\<lambda>v. CanVoteForConfig(v, t, x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>nt. ((nt=?z_hbu)&((x \\in Quorums((config[t])))&(?z_hcg&((t \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, t, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=t), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, t, nt))&?z_hdl))))))))))))), x, (currentTerm[s_1])))))&(?z_hhj&((a_configTermhash_primea=except(configTerm, t, x))&?z_hdl))))))))=>?z_hfi))) == ?z_hlb" (is "?z_hld == _")
    by (unfold bAll_def)
    have z_Hld: "?z_hld" (is "\\A x : ?z_hlh(x)")
    by (unfold z_Hld_z_Hlb, fact z_Hlb)
    have z_Hli: "?z_hlh(?z_hht)" (is "_=>?z_hlj")
    by (rule zenon_all_0 [of "?z_hlh" "?z_hht", OF z_Hld])
    show FALSE
    proof (rule zenon_imply [OF z_Hli])
     assume z_Hlk:"(~?z_hju)"
     show FALSE
     by (rule notE [OF z_Hlk z_Hju])
    next
     assume z_Hlj:"?z_hlj"
     show FALSE
     proof (rule zenon_imply [OF z_Hlj])
      assume z_Hll:"(~?z_hhv)"
      show FALSE
      proof (rule zenon_notand [OF z_Hll])
       assume z_Hlm:"(?z_hht~=?z_hbu)"
       show FALSE
       by (rule notE [OF z_Hlm z_Hhw])
      next
       assume z_Hln:"(~?z_hhx)"
       show FALSE
       proof (rule zenon_notand [OF z_Hln])
        assume z_Hlc:"(~?z_hgu)"
        show FALSE
        by (rule notE [OF z_Hlc z_Hgu])
       next
        assume z_Hlo:"(~?z_hhy)"
        show FALSE
        proof (rule zenon_notand [OF z_Hlo])
         assume z_Hlp:"(~?z_hcg)"
         show FALSE
         by (rule notE [OF z_Hlp z_Hcg])
        next
         assume z_Hlq:"(~?z_hhz)"
         show FALSE
         proof (rule zenon_notand [OF z_Hlq])
          assume z_Hlr:"(~?z_hgx)"
          show FALSE
          by (rule notE [OF z_Hlr z_Hgx])
         next
          assume z_Hls:"(~?z_hia)"
          show FALSE
          proof (rule zenon_notand [OF z_Hls])
           assume z_Hlt:"(~?z_hib)"
           show FALSE
           by (rule notE [OF z_Hlt z_Hib])
          next
           assume z_Hlu:"(~?z_hic)"
           show FALSE
           proof (rule zenon_notand [OF z_Hlu])
            assume z_Hlv:"(a_currentTermhash_primea~=?z_hif)"
            show FALSE
            by (rule notE [OF z_Hlv z_Hid])
           next
            assume z_Hlw:"(~?z_hie)"
            show FALSE
            proof (rule zenon_notand [OF z_Hlw])
             assume z_Hlx:"(a_statehash_primea~=?z_hhk)"
             show FALSE
             by (rule notE [OF z_Hlx z_Hhj])
            next
             assume z_Hly:"(~?z_hig)"
             show FALSE
             proof (rule zenon_notand [OF z_Hly])
              assume z_Hlz:"(a_configTermhash_primea~=?z_hii)"
              show FALSE
              by (rule notE [OF z_Hlz z_Hih])
             next
              assume z_Hma:"(~?z_hdl)"
              show FALSE
              proof (rule zenon_notand [OF z_Hma])
               assume z_Hmb:"(a_confighash_primea~=config)"
               show FALSE
               by (rule notE [OF z_Hmb z_Ht])
              next
               assume z_Hmc:"(a_configVersionhash_primea~=configVersion)"
               show FALSE
               by (rule notE [OF z_Hmc z_Hu])
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hfi:"?z_hfi"
      show FALSE
      by (rule notE [OF z_Hw z_Hfi])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 628"; *} qed
lemma ob'718:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition BecomeLeader suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
assumes v'148: "(((Term) = (Nat)))"
assumes v'149: "(((Version) = (Nat)))"
assumes v'152: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'188: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'191: "(((Server) \<noteq> ({})))"
assumes v'192: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'193: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | ((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'194: "(((Primary) \<noteq> (Secondary)))"
fixes u
assumes u_in : "(u \<in> (Server))"
fixes v
assumes v_in : "(v \<in> (Server))"
fixes nt
assumes nt_in : "(nt \<in> (Term))"
fixes nv
assumes nv_in : "(nv \<in> (Version))"
assumes v'218: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
assumes v'219: "(\<forall> s \<in> (subsetOf((Server), %s. ((~ (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (s)))))) : (\<exists> n \<in> (Q) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((s)) :: c))))))))))) : (\<forall> t \<in> (subsetOf((Server), %s_1. ((~ (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (s_1)))))) : (\<exists> n \<in> (Q) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((s_1)) :: c))))))))))) : (((((((s) = (v))) \<and> (((t) \<noteq> (v))))) \<Rightarrow> ((QuorumsOverlap ((fapply (((a_confighash_primea :: c)), (s))), (fapply (((a_confighash_primea :: c)), (t))))))))))"
assumes v'220: "((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) \<Longrightarrow> (\<forall> a_conf1a \<in> ((SUBSET (Server))) : (\<forall> a_conf2a \<in> ((SUBSET (Server))) : ((((QuorumsOverlap ((a_conf1a), (a_conf2a)))) \<Leftrightarrow> ((QuorumsOverlap ((a_conf2a), (a_conf1a))))))))))"
assumes v'221: "((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) \<Longrightarrow> ((Next) \<Longrightarrow> (((((a_currentTermhash_primea :: c)) \<in> ([(Server) \<rightarrow> (Nat)]))) & ((((a_statehash_primea :: c)) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & ((((a_confighash_primea :: c)) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & ((((a_configVersionhash_primea :: c)) \<in> ([(Server) \<rightarrow> (Nat)]))) & ((((a_configTermhash_primea :: c)) \<in> ([(Server) \<rightarrow> (Nat)])))))))"
shows "(\<forall> s \<in> (subsetOf((Server), %s. ((~ (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (s)))))) : (\<exists> n \<in> (Q) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((s)) :: c))))))))))) : (\<forall> t \<in> (subsetOf((Server), %s_1. ((~ (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (s_1)))))) : (\<exists> n \<in> (Q) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((s_1)) :: c))))))))))) : (((((((s) \<noteq> (v))) \<and> (((t) = (v))))) \<Rightarrow> ((QuorumsOverlap ((fapply (((a_confighash_primea :: c)), (s))), (fapply (((a_confighash_primea :: c)), (t))))))))))"(is "PROP ?ob'718")
proof -
ML_command {* writeln "*** TLAPS ENTER 718"; *}
show "PROP ?ob'718"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_3f323f.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_3f323f.znn.out
;; obligation #718
$hyp "v'148" (= Term arith.N)
$hyp "v'149" (= Version
arith.N)
$hyp "v'152" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'188" (/\ (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'191" (-. (= Server
TLA.emptyset))
$hyp "v'192" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'193" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N)) (TLA.in state
(TLA.FuncSet Server (TLA.set Secondary Primary))) (TLA.in config
(TLA.FuncSet Server (TLA.SUBSET Server))) (TLA.in configVersion
(TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'194" (-. (= Primary
Secondary))
$hyp "u_in" (TLA.in u Server)
$hyp "v_in" (TLA.in v Server)
$hyp "nt_in" (TLA.in nt Term)
$hyp "nv_in" (TLA.in nv Version)
$hyp "v'218" (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))
$hyp "v'219" (TLA.bAll (TLA.subsetOf Server ((s) (-. (TLA.bAll (Quorums (TLA.fapply a_confighash_primea s)) ((Q) (TLA.bEx Q ((n) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n)
(a_h17a541d025099e3943511403ec04a3a s))))))))) ((s) (TLA.bAll (TLA.subsetOf Server ((s_1) (-. (TLA.bAll (Quorums (TLA.fapply a_confighash_primea s_1)) ((Q) (TLA.bEx Q ((n) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n)
(a_h17a541d025099e3943511403ec04a3a s_1))))))))) ((t) (=> (/\ (= s v)
(-. (= t v))) (QuorumsOverlap (TLA.fapply a_confighash_primea s)
(TLA.fapply a_confighash_primea t)))))))
$hyp "v'220" (=> (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) (TLA.bAll (TLA.SUBSET Server) ((a_conf1a) (TLA.bAll (TLA.SUBSET Server) ((a_conf2a) (<=> (QuorumsOverlap a_conf1a
a_conf2a) (QuorumsOverlap a_conf2a
a_conf1a)))))))
$hyp "v'221" (=> (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) (=> Next (/\ (TLA.in a_currentTermhash_primea
(TLA.FuncSet Server arith.N)) (TLA.in a_statehash_primea
(TLA.FuncSet Server (TLA.set Secondary Primary))) (TLA.in a_confighash_primea
(TLA.FuncSet Server (TLA.SUBSET Server))) (TLA.in a_configVersionhash_primea
(TLA.FuncSet Server arith.N)) (TLA.in a_configTermhash_primea
(TLA.FuncSet Server arith.N)))))
$goal (TLA.bAll (TLA.subsetOf Server ((s) (-. (TLA.bAll (Quorums (TLA.fapply a_confighash_primea s)) ((Q) (TLA.bEx Q ((n) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n)
(a_h17a541d025099e3943511403ec04a3a s))))))))) ((s) (TLA.bAll (TLA.subsetOf Server ((s_1) (-. (TLA.bAll (Quorums (TLA.fapply a_confighash_primea s_1)) ((Q) (TLA.bEx Q ((n) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n)
(a_h17a541d025099e3943511403ec04a3a s_1))))))))) ((t) (=> (/\ (-. (= s v))
(= t v)) (QuorumsOverlap (TLA.fapply a_confighash_primea s)
(TLA.fapply a_confighash_primea t)))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hr&_")
 using v'188 by blast
 have z_Hn:"bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>s. bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((s=v)&(t~=v))=>QuorumsOverlap((a_confighash_primea[s]), (a_confighash_primea[t])))))))" (is "?z_hn")
 using v'219 by blast
 have z_Hp:"(((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))=>(Next=>((a_currentTermhash_primea \\in FuncSet(Server, Nat))&((a_statehash_primea \\in FuncSet(Server, {Secondary, Primary}))&((a_confighash_primea \\in FuncSet(Server, SUBSET(Server)))&((a_configVersionhash_primea \\in FuncSet(Server, Nat))&(a_configTermhash_primea \\in FuncSet(Server, Nat))))))))" (is "?z_hm=>?z_hdb")
 using v'221 by blast
 have z_Ho:"(?z_hm=>bAll(SUBSET(Server), (\<lambda>a_conf1a. bAll(SUBSET(Server), (\<lambda>a_conf2a. (QuorumsOverlap(a_conf1a, a_conf2a)<=>QuorumsOverlap(a_conf2a, a_conf1a)))))))" (is "_=>?z_hdp")
 using v'220 by blast
 assume z_Hq:"(~bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>s. bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((s~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[s]), (a_confighash_primea[t]))))))))" (is "~?z_hdy")
 have z_Hr: "?z_hr" (is "_&?z_hbo")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hbz: "Next"
 by (rule zenon_and_1 [OF z_Hd])
 have z_Hm: "?z_hm" (is "?z_hs&?z_hx")
 by (rule zenon_and_0 [OF z_Hr])
 have z_Hs: "?z_hs"
 by (rule zenon_and_0 [OF z_Hm])
 have z_Hx: "?z_hx" (is "?z_hy&?z_hbe")
 by (rule zenon_and_1 [OF z_Hm])
 have z_Hy: "?z_hy"
 by (rule zenon_and_0 [OF z_Hx])
 have z_Hbe: "?z_hbe" (is "?z_hbf&?z_hbj")
 by (rule zenon_and_1 [OF z_Hx])
 have z_Hbf: "?z_hbf"
 by (rule zenon_and_0 [OF z_Hbe])
 have z_Hbj: "?z_hbj" (is "?z_hbk&?z_hbm")
 by (rule zenon_and_1 [OF z_Hbe])
 have z_Hbk: "?z_hbk"
 by (rule zenon_and_0 [OF z_Hbj])
 have z_Hbm: "?z_hbm"
 by (rule zenon_and_1 [OF z_Hbj])
 have z_Heg_z_Hn: "(\\A x:((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x=v)&(t~=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))) == ?z_hn" (is "?z_heg == _")
 by (unfold bAll_def)
 have z_Heg: "?z_heg" (is "\\A x : ?z_her(x)")
 by (unfold z_Heg_z_Hn, fact z_Hn)
 have z_Hes_z_Hq: "(~(\\A x:((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t])))))))) == (~?z_hdy)" (is "?z_hes == ?z_hq")
 by (unfold bAll_def)
 have z_Hes: "?z_hes" (is "~(\\A x : ?z_hfa(x))")
 by (unfold z_Hes_z_Hq, fact z_Hq)
 have z_Hfb: "(\\E x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))" (is "\\E x : ?z_hfd(x)")
 by (rule zenon_notallex_0 [of "?z_hfa", OF z_Hes])
 have z_Hfe: "?z_hfd((CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t])))))))))" (is "~(?z_hfg=>?z_hfh)")
 by (rule zenon_ex_choose_0 [of "?z_hfd", OF z_Hfb])
 have z_Hfg: "?z_hfg"
 by (rule zenon_notimply_0 [OF z_Hfe])
 have z_Hfi: "(~?z_hfh)"
 by (rule zenon_notimply_1 [OF z_Hfe])
 have z_Hfj: "((CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t])))))))) \\in Server)" (is "?z_hfj")
 by (rule zenon_in_subsetof_0 [of "(CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))" "Server" "(\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))", OF z_Hfg])
 have z_Hfk_z_Hfi: "(~(\\A x:((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>((((CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))~=v)&(x=v))=>QuorumsOverlap((a_confighash_primea[(CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))]), (a_confighash_primea[x])))))) == (~?z_hfh)" (is "?z_hfk == ?z_hfi")
 by (unfold bAll_def)
 have z_Hfk: "?z_hfk" (is "~(\\A x : ?z_hfs(x))")
 by (unfold z_Hfk_z_Hfi, fact z_Hfi)
 have z_Hft: "(\\E x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>((((CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))~=v)&(x=v))=>QuorumsOverlap((a_confighash_primea[(CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))]), (a_confighash_primea[x]))))))" (is "\\E x : ?z_hfv(x)")
 by (rule zenon_notallex_0 [of "?z_hfs", OF z_Hfk])
 have z_Hfw: "?z_hfv((CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>((((CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))~=v)&(x=v))=>QuorumsOverlap((a_confighash_primea[(CHOOSE x:(~((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))), (\<lambda>t. (((x~=v)&(t=v))=>QuorumsOverlap((a_confighash_primea[x]), (a_confighash_primea[t]))))))))]), (a_confighash_primea[x])))))))" (is "~(?z_hfy=>?z_hfz)")
 by (rule zenon_ex_choose_0 [of "?z_hfv", OF z_Hft])
 have z_Hfy: "?z_hfy"
 by (rule zenon_notimply_0 [OF z_Hfw])
 have z_Hga: "(~?z_hfz)" (is "~(?z_hgb=>?z_hgc)")
 by (rule zenon_notimply_1 [OF z_Hfw])
 have z_Hgb: "?z_hgb" (is "?z_hfp&?z_hgd")
 by (rule zenon_notimply_0 [OF z_Hga])
 have z_Hge: "(~?z_hgc)"
 by (rule zenon_notimply_1 [OF z_Hga])
 have z_Hfp: "?z_hfp" (is "?z_hff~=_")
 by (rule zenon_and_0 [OF z_Hgb])
 have z_Hgd: "?z_hgd" (is "?z_hfx=_")
 by (rule zenon_and_1 [OF z_Hgb])
 have z_Hgf: "(?z_hfx \\in Server)" (is "?z_hgf")
 by (rule zenon_in_subsetof_0 [of "?z_hfx" "Server" "(\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))", OF z_Hfy])
 show FALSE
 proof (rule zenon_imply [OF z_Ho])
  assume z_Hgg:"(~?z_hm)"
  show FALSE
  proof (rule zenon_notand [OF z_Hgg])
   assume z_Hgh:"(~?z_hs)"
   show FALSE
   by (rule notE [OF z_Hgh z_Hs])
  next
   assume z_Hgi:"(~?z_hx)"
   show FALSE
   proof (rule zenon_notand [OF z_Hgi])
    assume z_Hgj:"(~?z_hy)"
    show FALSE
    by (rule notE [OF z_Hgj z_Hy])
   next
    assume z_Hgk:"(~?z_hbe)"
    show FALSE
    proof (rule zenon_notand [OF z_Hgk])
     assume z_Hgl:"(~?z_hbf)"
     show FALSE
     by (rule notE [OF z_Hgl z_Hbf])
    next
     assume z_Hgm:"(~?z_hbj)"
     show FALSE
     proof (rule zenon_notand [OF z_Hgm])
      assume z_Hgn:"(~?z_hbk)"
      show FALSE
      by (rule notE [OF z_Hgn z_Hbk])
     next
      assume z_Hgo:"(~?z_hbm)"
      show FALSE
      by (rule notE [OF z_Hgo z_Hbm])
     qed
    qed
   qed
  qed
 next
  assume z_Hdp:"?z_hdp"
  have z_Hgp_z_Hdp: "(\\A x:((x \\in SUBSET(Server))=>bAll(SUBSET(Server), (\<lambda>a_conf2a. (QuorumsOverlap(x, a_conf2a)<=>QuorumsOverlap(a_conf2a, x)))))) == ?z_hdp" (is "?z_hgp == _")
  by (unfold bAll_def)
  have z_Hgp: "?z_hgp" (is "\\A x : ?z_hgx(x)")
  by (unfold z_Hgp_z_Hdp, fact z_Hdp)
  show FALSE
  proof (rule zenon_imply [OF z_Hp])
   assume z_Hgg:"(~?z_hm)"
   show FALSE
   proof (rule zenon_notand [OF z_Hgg])
    assume z_Hgh:"(~?z_hs)"
    show FALSE
    by (rule notE [OF z_Hgh z_Hs])
   next
    assume z_Hgi:"(~?z_hx)"
    show FALSE
    proof (rule zenon_notand [OF z_Hgi])
     assume z_Hgj:"(~?z_hy)"
     show FALSE
     by (rule notE [OF z_Hgj z_Hy])
    next
     assume z_Hgk:"(~?z_hbe)"
     show FALSE
     proof (rule zenon_notand [OF z_Hgk])
      assume z_Hgl:"(~?z_hbf)"
      show FALSE
      by (rule notE [OF z_Hgl z_Hbf])
     next
      assume z_Hgm:"(~?z_hbj)"
      show FALSE
      proof (rule zenon_notand [OF z_Hgm])
       assume z_Hgn:"(~?z_hbk)"
       show FALSE
       by (rule notE [OF z_Hgn z_Hbk])
      next
       assume z_Hgo:"(~?z_hbm)"
       show FALSE
       by (rule notE [OF z_Hgo z_Hbm])
      qed
     qed
    qed
   qed
  next
   assume z_Hdb:"?z_hdb" (is "_=>?z_hdc")
   show FALSE
   proof (rule zenon_imply [OF z_Hdb])
    assume z_Hgy:"(~Next)"
    show FALSE
    by (rule notE [OF z_Hgy z_Hbz])
   next
    assume z_Hdc:"?z_hdc" (is "?z_hdd&?z_hdf")
    have z_Hdf: "?z_hdf" (is "?z_hdg&?z_hdi")
    by (rule zenon_and_1 [OF z_Hdc])
    have z_Hdi: "?z_hdi" (is "?z_hdj&?z_hdk")
    by (rule zenon_and_1 [OF z_Hdf])
    have z_Hdj: "?z_hdj"
    by (rule zenon_and_0 [OF z_Hdi])
    have z_Hgz: "?z_hgx((a_confighash_primea[?z_hff]))" (is "?z_hha=>?z_hhb")
    by (rule zenon_all_0 [of "?z_hgx" "(a_confighash_primea[?z_hff])", OF z_Hgp])
    show FALSE
    proof (rule zenon_imply [OF z_Hgz])
     assume z_Hhc:"(~?z_hha)"
     have z_Hhd: "(\\A zenon_Vsc:((zenon_Vsc \\in Server)=>((a_confighash_primea[zenon_Vsc]) \\in SUBSET(Server))))" (is "\\A x : ?z_hhj(x)")
     by (rule zenon_in_funcset_2 [of "a_confighash_primea" "Server" "SUBSET(Server)", OF z_Hdj])
     have z_Hhk: "?z_hhj(?z_hff)"
     by (rule zenon_all_0 [of "?z_hhj" "?z_hff", OF z_Hhd])
     show FALSE
     proof (rule zenon_imply [OF z_Hhk])
      assume z_Hhl:"(~?z_hfj)"
      show FALSE
      by (rule notE [OF z_Hhl z_Hfj])
     next
      assume z_Hha:"?z_hha"
      show FALSE
      by (rule notE [OF z_Hhc z_Hha])
     qed
    next
     assume z_Hhb:"?z_hhb"
     have z_Hhm_z_Hhb: "(\\A x:((x \\in SUBSET(Server))=>(QuorumsOverlap((a_confighash_primea[?z_hff]), x)<=>QuorumsOverlap(x, (a_confighash_primea[?z_hff]))))) == ?z_hhb" (is "?z_hhm == _")
     by (unfold bAll_def)
     have z_Hhm: "?z_hhm" (is "\\A x : ?z_hhr(x)")
     by (unfold z_Hhm_z_Hhb, fact z_Hhb)
     have z_Hhs: "?z_hhr((a_confighash_primea[?z_hfx]))" (is "?z_hhu=>?z_hhv")
     by (rule zenon_all_0 [of "?z_hhr" "(a_confighash_primea[?z_hfx])", OF z_Hhm])
     show FALSE
     proof (rule zenon_imply [OF z_Hhs])
      assume z_Hhw:"(~?z_hhu)"
      have z_Hhd: "(\\A zenon_Vsc:((zenon_Vsc \\in Server)=>((a_confighash_primea[zenon_Vsc]) \\in SUBSET(Server))))" (is "\\A x : ?z_hhj(x)")
      by (rule zenon_in_funcset_2 [of "a_confighash_primea" "Server" "SUBSET(Server)", OF z_Hdj])
      have z_Hhx: "?z_hhj(?z_hfx)"
      by (rule zenon_all_0 [of "?z_hhj" "?z_hfx", OF z_Hhd])
      show FALSE
      proof (rule zenon_imply [OF z_Hhx])
       assume z_Hhy:"(~?z_hgf)"
       show FALSE
       by (rule notE [OF z_Hhy z_Hgf])
      next
       assume z_Hhu:"?z_hhu"
       show FALSE
       by (rule notE [OF z_Hhw z_Hhu])
      qed
     next
      assume z_Hhv:"?z_hhv" (is "_<=>?z_hhz")
      show FALSE
      proof (rule zenon_equiv [OF z_Hhv])
       assume z_Hge:"(~?z_hgc)"
       assume z_Hia:"(~?z_hhz)"
       have z_Hib: "?z_her(?z_hfx)" (is "_=>?z_hic")
       by (rule zenon_all_0 [of "?z_her" "?z_hfx", OF z_Heg])
       show FALSE
       proof (rule zenon_imply [OF z_Hib])
        assume z_Hid:"(~?z_hfy)"
        show FALSE
        by (rule notE [OF z_Hid z_Hfy])
       next
        assume z_Hic:"?z_hic"
        have z_Hie_z_Hic: "(\\A x:((x \\in subsetOf(Server, (\<lambda>s. (~bAll(Quorums((a_confighash_primea[s])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s))))))))))=>((?z_hgd&(x~=v))=>QuorumsOverlap((a_confighash_primea[?z_hfx]), (a_confighash_primea[x]))))) == ?z_hic" (is "?z_hie == _")
        by (unfold bAll_def)
        have z_Hie: "?z_hie" (is "\\A x : ?z_hij(x)")
        by (unfold z_Hie_z_Hic, fact z_Hic)
        have z_Hik: "?z_hij(?z_hff)" (is "_=>?z_hil")
        by (rule zenon_all_0 [of "?z_hij" "?z_hff", OF z_Hie])
        show FALSE
        proof (rule zenon_imply [OF z_Hik])
         assume z_Him:"(~?z_hfg)"
         show FALSE
         by (rule notE [OF z_Him z_Hfg])
        next
         assume z_Hil:"?z_hil" (is "?z_hin=>_")
         show FALSE
         proof (rule zenon_imply [OF z_Hil])
          assume z_Hio:"(~?z_hin)"
          show FALSE
          proof (rule zenon_notand [OF z_Hio])
           assume z_Hip:"(?z_hfx~=v)"
           show FALSE
           by (rule notE [OF z_Hip z_Hgd])
          next
           assume z_Hiq:"(~?z_hfp)" (is "~~?z_hir")
           show FALSE
           by (rule notE [OF z_Hiq z_Hfp])
          qed
         next
          assume z_Hhz:"?z_hhz"
          show FALSE
          by (rule notE [OF z_Hia z_Hhz])
         qed
        qed
       qed
      next
       assume z_Hgc:"?z_hgc"
       assume z_Hhz:"?z_hhz"
       show FALSE
       by (rule notE [OF z_Hge z_Hgc])
      qed
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 718"; *} qed
lemma ob'734:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
assumes v'149: "(((Term) = (Nat)))"
assumes v'150: "(((Version) = (Nat)))"
assumes v'153: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'189: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'192: "(((Server) \<noteq> ({})))"
assumes v'193: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'194: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'195: "(((Primary) \<noteq> (Secondary)))"
assumes v'210: "(\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
assumes v'211: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<Longrightarrow> ((Next) \<Longrightarrow> (\<And> p :: c. p \<in> (Server) \<Longrightarrow> (\<And> nv :: c. nv \<in> (Term) \<Longrightarrow> ((\<exists> Q \<in> ((Quorums ((fapply ((config), (p)))))) : ((((nv) = ((arith_add ((fapply ((currentTerm), (p))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (p)))))))) & (((p) \<in> (fapply ((config), (p))))) & (((p) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (p), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s \<in> (Server)  \<mapsto> (cond((((s) \<in> (Q))), (nv), (fapply ((currentTerm), (s)))))]))) & ((((a_statehash_primea :: c)) = ([ s \<in> (Server)  \<mapsto> (cond((((s) = (p))), (Primary), (cond((((s) \<in> (Q))), (Secondary), (fapply ((state), (s)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))) \<Longrightarrow> (\<forall> s \<in> (subsetOf((Server), %s. ((~ ((hf4aa3d71993184dec7cc18c61323ff ((s)) :: c)))))) : (((s) \<in> (subsetOf((Server), %s_1. ((~ ((ConfigDisabled ((s_1)))))))))))))))))"
shows "(\<forall> s \<in> (subsetOf((Server), %s. ((~ ((hf4aa3d71993184dec7cc18c61323ff ((s)) :: c)))))) : (((s) \<in> (subsetOf((Server), %s_1. ((~ ((ConfigDisabled ((s_1)))))))))))"(is "PROP ?ob'734")
proof -
ML_command {* writeln "*** TLAPS ENTER 734"; *}
show "PROP ?ob'734"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_80ee17.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_80ee17.znn.out
;; obligation #734
$hyp "v'149" (= Term arith.N)
$hyp "v'150" (= Version
arith.N)
$hyp "v'153" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'189" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'192" (-. (= Server
TLA.emptyset))
$hyp "v'193" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'194" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'195" (-. (= Primary
Secondary))
$hyp "v'210" (TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) newTerm (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$hyp "v'211" (=> (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa
a_Inv866unde_1unde_0unde_defa) (=> Next (TLA.bAll Server ((p) (TLA.bAll Term ((nv) (=> (TLA.bEx (Quorums (TLA.fapply config p)) ((Q) (/\ (= nv
(arith.add (TLA.fapply currentTerm p) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config p))) (TLA.in p (TLA.fapply config p)) (TLA.in p
Q) (TLA.bAll Q ((v) (CanVoteForConfig v p nv))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s) (TLA.cond (TLA.in s Q) nv (TLA.fapply currentTerm s)))))
(= a_statehash_primea (TLA.Fcn Server ((s) (TLA.cond (= s
p) Primary (TLA.cond (TLA.in s Q) Secondary (TLA.fapply state s))))))
(= a_configTermhash_primea (TLA.except configTerm p nv))
(/\ (= a_confighash_primea config) (= a_configVersionhash_primea
configVersion))))) (TLA.bAll (TLA.subsetOf Server ((s) (-. (hf4aa3d71993184dec7cc18c61323ff s)))) ((s) (TLA.in s
(TLA.subsetOf Server ((s_1) (-. (ConfigDisabled s_1))))))))))))))
$goal (TLA.bAll (TLA.subsetOf Server ((s) (-. (hf4aa3d71993184dec7cc18c61323ff s)))) ((s) (TLA.in s
(TLA.subsetOf Server ((s_1) (-. (ConfigDisabled s_1)))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((TypeOK&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hl&_")
 using v'189 by blast
 have z_Ha:"(Term=Nat)"
 using v'149 by blast
 have z_Hi:"bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hi")
 using v'210 by blast
 have z_Hj:"(?z_hl=>(Next=>bAll(Server, (\<lambda>p. bAll(Term, (\<lambda>nv. (bEx(Quorums((config[p])), (\<lambda>Q. ((nv=((currentTerm[p]) + 1))&((Q \\in Quorums((config[p])))&((p \\in (config[p]))&((p \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, p, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s. cond((s \\in Q), nv, (currentTerm[s])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=p), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, p, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))=>bAll(subsetOf(Server, (\<lambda>s. (~hf4aa3d71993184dec7cc18c61323ff(s)))), (\<lambda>s. (s \\in subsetOf(Server, (\<lambda>s_1. (~ConfigDisabled(s_1))))))))))))))" (is "_=>?z_hdl")
 using v'211 by blast
 assume z_Hk:"(~bAll(subsetOf(Server, (\<lambda>s. (~hf4aa3d71993184dec7cc18c61323ff(s)))), (\<lambda>s. (s \\in subsetOf(Server, (\<lambda>s_1. (~ConfigDisabled(s_1))))))))" (is "~?z_hfb")
 have z_Hl: "?z_hl" (is "_&?z_hn")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hy: "Next"
 by (rule zenon_and_1 [OF z_Hd])
 have z_Hm: "TypeOK"
 by (rule zenon_and_0 [OF z_Hl])
 have z_Hn: "?z_hn" (is "_&?z_hp")
 by (rule zenon_and_1 [OF z_Hl])
 have z_Ho: "Safety"
 by (rule zenon_and_0 [OF z_Hn])
 have z_Hp: "?z_hp" (is "_&?z_hr")
 by (rule zenon_and_1 [OF z_Hn])
 have z_Hq: "a_Inv2973unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hp])
 have z_Hr: "?z_hr" (is "_&?z_ht")
 by (rule zenon_and_1 [OF z_Hp])
 have z_Hs: "a_Inv1758unde_1unde_0unde_defa"
 by (rule zenon_and_0 [OF z_Hr])
 have z_Ht: "?z_ht" (is "_&?z_hv")
 by (rule zenon_and_1 [OF z_Hr])
 have z_Hu: "a_Inv3915unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Ht])
 have z_Hv: "?z_hv"
 by (rule zenon_and_1 [OF z_Ht])
 have z_Hw: "a_Inv3246unde_1unde_2unde_defa"
 by (rule zenon_and_0 [OF z_Hv])
 have z_Hx: "a_Inv866unde_1unde_0unde_defa"
 by (rule zenon_and_1 [OF z_Hv])
 have z_Hfm_z_Hi: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_hi" (is "?z_hfm == _")
 by (unfold bEx_def)
 have z_Hfm: "?z_hfm" (is "\\E x : ?z_hgu(x)")
 by (unfold z_Hfm_z_Hi, fact z_Hi)
 have z_Hgv: "?z_hgu((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hgx&?z_hgy")
 by (rule zenon_ex_choose_0 [of "?z_hgu", OF z_Hfm])
 have z_Hgx: "?z_hgx"
 by (rule zenon_and_0 [OF z_Hgv])
 have z_Hgy: "?z_hgy"
 by (rule zenon_and_1 [OF z_Hgv])
 have z_Hgz_z_Hgy: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hgy" (is "?z_hgz == _")
 by (unfold bEx_def)
 have z_Hgz: "?z_hgz" (is "\\E x : ?z_hik(x)")
 by (unfold z_Hgz_z_Hgy, fact z_Hgy)
 have z_Hil: "?z_hik((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hin&?z_hio")
 by (rule zenon_ex_choose_0 [of "?z_hik", OF z_Hgz])
 have z_Hio: "?z_hio"
 by (rule zenon_and_1 [OF z_Hil])
 have z_Hip_z_Hio: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hio" (is "?z_hip == _")
 by (unfold bEx_def)
 have z_Hip: "?z_hip" (is "\\E x : ?z_hjs(x)")
 by (unfold z_Hip_z_Hio, fact z_Hio)
 have z_Hjt: "?z_hjs((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hjv&?z_hjw")
 by (rule zenon_ex_choose_0 [of "?z_hjs", OF z_Hip])
 have z_Hjv: "?z_hjv"
 by (rule zenon_and_0 [OF z_Hjt])
 have z_Hjw: "?z_hjw" (is "?z_hjx&?z_hjy")
 by (rule zenon_and_1 [OF z_Hjt])
 have z_Hjx: "?z_hjx" (is "?z_hju=?z_hhg")
 by (rule zenon_and_0 [OF z_Hjw])
 have z_Hjy: "?z_hjy" (is "?z_hiv&?z_hjz")
 by (rule zenon_and_1 [OF z_Hjw])
 have z_Hiv: "?z_hiv"
 by (rule zenon_and_0 [OF z_Hjy])
 have z_Hjz: "?z_hjz" (is "?z_hhn&?z_hka")
 by (rule zenon_and_1 [OF z_Hjy])
 have z_Hhn: "?z_hhn"
 by (rule zenon_and_0 [OF z_Hjz])
 have z_Hka: "?z_hka" (is "?z_hiy&?z_hkb")
 by (rule zenon_and_1 [OF z_Hjz])
 have z_Hiy: "?z_hiy"
 by (rule zenon_and_0 [OF z_Hka])
 have z_Hkb: "?z_hkb" (is "?z_hkc&?z_hkd")
 by (rule zenon_and_1 [OF z_Hka])
 have z_Hkc: "?z_hkc"
 by (rule zenon_and_0 [OF z_Hkb])
 have z_Hkd: "?z_hkd" (is "?z_hke&?z_hkf")
 by (rule zenon_and_1 [OF z_Hkb])
 have z_Hke: "?z_hke" (is "_=?z_hkg")
 by (rule zenon_and_0 [OF z_Hkd])
 have z_Hkf: "?z_hkf" (is "?z_hjk&?z_hkh")
 by (rule zenon_and_1 [OF z_Hkd])
 have z_Hjk: "?z_hjk" (is "_=?z_hjl")
 by (rule zenon_and_0 [OF z_Hkf])
 have z_Hkh: "?z_hkh" (is "?z_hki&?z_hdf")
 by (rule zenon_and_1 [OF z_Hkf])
 have z_Hki: "?z_hki" (is "_=?z_hkj")
 by (rule zenon_and_0 [OF z_Hkh])
 have z_Hdf: "?z_hdf" (is "?z_hdg&?z_hdi")
 by (rule zenon_and_1 [OF z_Hkh])
 have z_Hdg: "?z_hdg"
 by (rule zenon_and_0 [OF z_Hdf])
 have z_Hdi: "?z_hdi"
 by (rule zenon_and_1 [OF z_Hdf])
 show FALSE
 proof (rule zenon_imply [OF z_Hj])
  assume z_Hkk:"(~?z_hl)"
  show FALSE
  proof (rule zenon_notand [OF z_Hkk])
   assume z_Hkl:"(~TypeOK)"
   show FALSE
   by (rule notE [OF z_Hkl z_Hm])
  next
   assume z_Hkm:"(~?z_hn)"
   show FALSE
   proof (rule zenon_notand [OF z_Hkm])
    assume z_Hkn:"(~Safety)"
    show FALSE
    by (rule notE [OF z_Hkn z_Ho])
   next
    assume z_Hko:"(~?z_hp)"
    show FALSE
    proof (rule zenon_notand [OF z_Hko])
     assume z_Hkp:"(~a_Inv2973unde_1unde_1unde_defa)"
     show FALSE
     by (rule notE [OF z_Hkp z_Hq])
    next
     assume z_Hkq:"(~?z_hr)"
     show FALSE
     proof (rule zenon_notand [OF z_Hkq])
      assume z_Hkr:"(~a_Inv1758unde_1unde_0unde_defa)"
      show FALSE
      by (rule notE [OF z_Hkr z_Hs])
     next
      assume z_Hks:"(~?z_ht)"
      show FALSE
      proof (rule zenon_notand [OF z_Hks])
       assume z_Hkt:"(~a_Inv3915unde_1unde_1unde_defa)"
       show FALSE
       by (rule notE [OF z_Hkt z_Hu])
      next
       assume z_Hku:"(~?z_hv)"
       show FALSE
       proof (rule zenon_notand [OF z_Hku])
        assume z_Hkv:"(~a_Inv3246unde_1unde_2unde_defa)"
        show FALSE
        by (rule notE [OF z_Hkv z_Hw])
       next
        assume z_Hkw:"(~a_Inv866unde_1unde_0unde_defa)"
        show FALSE
        by (rule notE [OF z_Hkw z_Hx])
       qed
      qed
     qed
    qed
   qed
  qed
 next
  assume z_Hdl:"?z_hdl" (is "_=>?z_hdm")
  show FALSE
  proof (rule zenon_imply [OF z_Hdl])
   assume z_Hkx:"(~Next)"
   show FALSE
   by (rule notE [OF z_Hkx z_Hy])
  next
   assume z_Hdm:"?z_hdm"
   have z_Hky_z_Hdm: "(\\A x:((x \\in Server)=>bAll(Term, (\<lambda>nv. (bEx(Quorums((config[x])), (\<lambda>Q. ((nv=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s. cond((s \\in Q), nv, (currentTerm[s])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nv))&?z_hdf))))))))))=>?z_hfb))))) == ?z_hdm" (is "?z_hky == _")
   by (unfold bAll_def)
   have z_Hky: "?z_hky" (is "\\A x : ?z_hlt(x)")
   by (unfold z_Hky_z_Hdm, fact z_Hdm)
   have z_Hlu: "(?z_hju \\in Nat)" (is "?z_hlu")
   by (rule subst [where P="(\<lambda>zenon_Veb. (?z_hju \\in zenon_Veb))", OF z_Ha z_Hjv])
   have z_Hly: "?z_hlt((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))))" (is "_=>?z_hlz")
   by (rule zenon_all_0 [of "?z_hlt" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))", OF z_Hky])
   show FALSE
   proof (rule zenon_imply [OF z_Hly])
    assume z_Hma:"(~?z_hgx)"
    show FALSE
    by (rule notE [OF z_Hma z_Hgx])
   next
    assume z_Hlz:"?z_hlz"
    have z_Hmb: "bAll(Nat, (\<lambda>nv. (bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])), (\<lambda>Q. ((nv=?z_hhg)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hhn&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s. cond((s \\in Q), nv, (currentTerm[s])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), nv))&?z_hdf))))))))))=>?z_hfb)))" (is "?z_hmb")
    by (rule subst [where P="(\<lambda>zenon_Vjg. bAll(zenon_Vjg, (\<lambda>nv. (bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])), (\<lambda>Q. ((nv=?z_hhg)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hhn&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s. cond((s \\in Q), nv, (currentTerm[s])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), nv))&?z_hdf))))))))))=>?z_hfb))))", OF z_Ha z_Hlz])
    have z_Hnd_z_Hmb: "(\\A x:((x \\in Nat)=>(bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])), (\<lambda>Q. ((x=?z_hhg)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hhn&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s. cond((s \\in Q), x, (currentTerm[s])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), x))&?z_hdf))))))))))=>?z_hfb))) == ?z_hmb" (is "?z_hnd == _")
    by (unfold bAll_def)
    have z_Hnd: "?z_hnd" (is "\\A x : ?z_hnv(x)")
    by (unfold z_Hnd_z_Hmb, fact z_Hmb)
    have z_Hnw: "?z_hnv(?z_hju)" (is "_=>?z_hnx")
    by (rule zenon_all_0 [of "?z_hnv" "?z_hju", OF z_Hnd])
    show FALSE
    proof (rule zenon_imply [OF z_Hnw])
     assume z_Hny:"(~?z_hlu)"
     show FALSE
     by (rule notE [OF z_Hny z_Hlu])
    next
     assume z_Hnx:"?z_hnx" (is "?z_hnz=>_")
     show FALSE
     proof (rule zenon_imply [OF z_Hnx])
      assume z_Hoa:"(~?z_hnz)"
      have z_Hob_z_Hoa: "(~(\\E x:((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hjx&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hhn&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), ?z_hju)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s. cond((s \\in x), ?z_hju, (currentTerm[s])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&?z_hkh)))))))))) == (~?z_hnz)" (is "?z_hob == ?z_hoa")
      by (unfold bEx_def)
      have z_Hob: "?z_hob" (is "~(\\E x : ?z_hot(x))")
      by (unfold z_Hob_z_Hoa, fact z_Hoa)
      have z_Hou: "~?z_hot((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=?z_hhg)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hhn&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), newTerm))&?z_hdf)))))))))))))"
      by (rule zenon_notex_0 [of "?z_hot" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=?z_hhg)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))])))&(?z_hhn&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hdf)))))))))))))), newTerm))&?z_hdf))))))))))))", OF z_Hob])
      show FALSE
      proof (rule zenon_notand [OF z_Hou])
       assume z_Hov:"(~?z_hiv)"
       show FALSE
       by (rule notE [OF z_Hov z_Hiv])
      next
       assume z_How:"(~?z_hjw)"
       show FALSE
       proof (rule zenon_notand [OF z_How])
        assume z_Hox:"(?z_hju~=?z_hhg)"
        show FALSE
        by (rule notE [OF z_Hox z_Hjx])
       next
        assume z_Hoy:"(~?z_hjy)"
        show FALSE
        proof (rule zenon_notand [OF z_Hoy])
         assume z_Hov:"(~?z_hiv)"
         show FALSE
         by (rule notE [OF z_Hov z_Hiv])
        next
         assume z_Hoz:"(~?z_hjz)"
         show FALSE
         proof (rule zenon_notand [OF z_Hoz])
          assume z_Hpa:"(~?z_hhn)"
          show FALSE
          by (rule notE [OF z_Hpa z_Hhn])
         next
          assume z_Hpb:"(~?z_hka)"
          show FALSE
          proof (rule zenon_notand [OF z_Hpb])
           assume z_Hpc:"(~?z_hiy)"
           show FALSE
           by (rule notE [OF z_Hpc z_Hiy])
          next
           assume z_Hpd:"(~?z_hkb)"
           show FALSE
           proof (rule zenon_notand [OF z_Hpd])
            assume z_Hpe:"(~?z_hkc)"
            show FALSE
            by (rule notE [OF z_Hpe z_Hkc])
           next
            assume z_Hpf:"(~?z_hkd)"
            show FALSE
            proof (rule zenon_notand [OF z_Hpf])
             assume z_Hpg:"(a_currentTermhash_primea~=?z_hkg)"
             show FALSE
             by (rule notE [OF z_Hpg z_Hke])
            next
             assume z_Hph:"(~?z_hkf)"
             show FALSE
             proof (rule zenon_notand [OF z_Hph])
              assume z_Hpi:"(a_statehash_primea~=?z_hjl)"
              show FALSE
              by (rule notE [OF z_Hpi z_Hjk])
             next
              assume z_Hpj:"(~?z_hkh)"
              show FALSE
              proof (rule zenon_notand [OF z_Hpj])
               assume z_Hpk:"(a_configTermhash_primea~=?z_hkj)"
               show FALSE
               by (rule notE [OF z_Hpk z_Hki])
              next
               assume z_Hpl:"(~?z_hdf)"
               show FALSE
               proof (rule zenon_notand [OF z_Hpl])
               assume z_Hpm:"(a_confighash_primea~=config)"
               show FALSE
               by (rule notE [OF z_Hpm z_Hdg])
               next
               assume z_Hpn:"(a_configVersionhash_primea~=configVersion)"
               show FALSE
               by (rule notE [OF z_Hpn z_Hdi])
               qed
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hfb:"?z_hfb"
      show FALSE
      by (rule notE [OF z_Hk z_Hfb])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 734"; *} qed
lemma ob'761:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
assumes v'189: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'192: "(((Server) \<noteq> ({})))"
assumes v'193: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'194: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'195: "(((Primary) \<noteq> (Secondary)))"
assumes v'207: "((((TypeOK) \<Rightarrow> (((a_Inv1758unde_1unde_0unde_defa) \<Leftrightarrow> (a_Inv1758unde_1unde_0unde_defunde_restateda))))) & ((((a_hef12f5554781c2213604492856f635a :: c)) \<Rightarrow> ((((a_ha9ec9edfdc0690d88bfb68e70a9c14a :: c)) \<Leftrightarrow> ((a_hb696eca14b24a218327adb17bbd973a :: c)))))))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (Server))"
assumes v'219: "(\<exists> s_1 \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s_1), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
shows "(\<exists> p \<in> (Server) : (\<exists> nt \<in> (Term) : (\<exists> Q \<in> ((Quorums ((fapply ((config), (p)))))) : ((((nt) = ((arith_add ((fapply ((currentTerm), (p))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (p)))))))) & (((p) \<in> (fapply ((config), (p))))) & (((p) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (p), (nt))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nt), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (p))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (nt)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"(is "PROP ?ob'761")
proof -
ML_command {* writeln "*** TLAPS ENTER 761"; *}
show "PROP ?ob'761"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_badc2e.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_badc2e.znn.out
;; obligation #761
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'189" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'192" (-. (= Server
TLA.emptyset))
$hyp "v'193" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'194" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'195" (-. (= Primary Secondary))
$hyp "v'207" (/\ (=> TypeOK (<=> a_Inv1758unde_1unde_0unde_defa
a_Inv1758unde_1unde_0unde_defunde_restateda))
(=> a_hef12f5554781c2213604492856f635a
(<=> a_ha9ec9edfdc0690d88bfb68e70a9c14a
a_hb696eca14b24a218327adb17bbd973a)))
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t Server)
$hyp "v'219" (TLA.bEx Server ((s_1) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q) (TLA.bAll Q ((v) (CanVoteForConfig v s_1 newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q) newTerm (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$goal (TLA.bEx Server ((p) (TLA.bEx Term ((nt) (TLA.bEx (Quorums (TLA.fapply config p)) ((Q) (/\ (= nt
(arith.add (TLA.fapply currentTerm p) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config p))) (TLA.in p (TLA.fapply config p)) (TLA.in p
Q) (TLA.bAll Q ((v) (CanVoteForConfig v p nt))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nt (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 p) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm p nt)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Ha:"(Term=Nat)"
 using v'150 by blast
 have z_Hl:"bEx(Server, (\<lambda>s_1. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s_1]) + 1))&((Q \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s_1, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hl")
 using v'219 by blast
 assume z_Hm:"(~bEx(Server, (\<lambda>p. bEx(Term, (\<lambda>nt. bEx(Quorums((config[p])), (\<lambda>Q. ((nt=((currentTerm[p]) + 1))&((Q \\in Quorums((config[p])))&((p \\in (config[p]))&((p \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, p, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=p), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, p, nt))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "~?z_hcz")
 have z_Hen_z_Hl: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_hl" (is "?z_hen == _")
 by (unfold bEx_def)
 have z_Hen: "?z_hen" (is "\\E x : ?z_hfv(x)")
 by (unfold z_Hen_z_Hl, fact z_Hl)
 have z_Hfw: "?z_hfv((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hfy&?z_hfz")
 by (rule zenon_ex_choose_0 [of "?z_hfv", OF z_Hen])
 have z_Hfy: "?z_hfy"
 by (rule zenon_and_0 [OF z_Hfw])
 have z_Hfz: "?z_hfz"
 by (rule zenon_and_1 [OF z_Hfw])
 have z_Hga_z_Hfz: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hfz" (is "?z_hga == _")
 by (unfold bEx_def)
 have z_Hga: "?z_hga" (is "\\E x : ?z_hhm(x)")
 by (unfold z_Hga_z_Hfz, fact z_Hfz)
 have z_Hhn: "?z_hhm((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hhp&?z_hhq")
 by (rule zenon_ex_choose_0 [of "?z_hhm", OF z_Hga])
 have z_Hhq: "?z_hhq"
 by (rule zenon_and_1 [OF z_Hhn])
 have z_Hhr_z_Hhq: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hhq" (is "?z_hhr == _")
 by (unfold bEx_def)
 have z_Hhr: "?z_hhr" (is "\\E x : ?z_hiv(x)")
 by (unfold z_Hhr_z_Hhq, fact z_Hhq)
 have z_Hiw: "?z_hiv((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hiy&?z_hiz")
 by (rule zenon_ex_choose_0 [of "?z_hiv", OF z_Hhr])
 have z_Hiy: "?z_hiy"
 by (rule zenon_and_0 [OF z_Hiw])
 have z_Hiz: "?z_hiz" (is "?z_hja&?z_hjb")
 by (rule zenon_and_1 [OF z_Hiw])
 have z_Hja: "?z_hja" (is "?z_hix=?z_hgh")
 by (rule zenon_and_0 [OF z_Hiz])
 have z_Hjb: "?z_hjb" (is "?z_hhx&?z_hjc")
 by (rule zenon_and_1 [OF z_Hiz])
 have z_Hhx: "?z_hhx"
 by (rule zenon_and_0 [OF z_Hjb])
 have z_Hjc: "?z_hjc" (is "?z_hgo&?z_hjd")
 by (rule zenon_and_1 [OF z_Hjb])
 have z_Hgo: "?z_hgo"
 by (rule zenon_and_0 [OF z_Hjc])
 have z_Hjd: "?z_hjd" (is "?z_hia&?z_hje")
 by (rule zenon_and_1 [OF z_Hjc])
 have z_Hia: "?z_hia"
 by (rule zenon_and_0 [OF z_Hjd])
 have z_Hje: "?z_hje" (is "?z_hjf&?z_hjg")
 by (rule zenon_and_1 [OF z_Hjd])
 have z_Hjf: "?z_hjf"
 by (rule zenon_and_0 [OF z_Hje])
 have z_Hjg: "?z_hjg" (is "?z_hjh&?z_hji")
 by (rule zenon_and_1 [OF z_Hje])
 have z_Hjh: "?z_hjh" (is "_=?z_hjj")
 by (rule zenon_and_0 [OF z_Hjg])
 have z_Hji: "?z_hji" (is "?z_him&?z_hjk")
 by (rule zenon_and_1 [OF z_Hjg])
 have z_Him: "?z_him" (is "_=?z_hin")
 by (rule zenon_and_0 [OF z_Hji])
 have z_Hjk: "?z_hjk" (is "?z_hjl&?z_hct")
 by (rule zenon_and_1 [OF z_Hji])
 have z_Hjl: "?z_hjl" (is "_=?z_hjm")
 by (rule zenon_and_0 [OF z_Hjk])
 have z_Hct: "?z_hct" (is "?z_hcu&?z_hcw")
 by (rule zenon_and_1 [OF z_Hjk])
 have z_Hcu: "?z_hcu"
 by (rule zenon_and_0 [OF z_Hct])
 have z_Hcw: "?z_hcw"
 by (rule zenon_and_1 [OF z_Hct])
 have z_Hjn_z_Hm: "(~(\\E x:((x \\in Server)&bEx(Term, (\<lambda>nt. bEx(Quorums((config[x])), (\<lambda>Q. ((nt=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, nt))&?z_hct))))))))))))))) == (~?z_hcz)" (is "?z_hjn == ?z_hm")
 by (unfold bEx_def)
 have z_Hjn: "?z_hjn" (is "~(\\E x : ?z_hki(x))")
 by (unfold z_Hjn_z_Hm, fact z_Hm)
 have z_Hkj: "(?z_hix \\in Nat)" (is "?z_hkj")
 by (rule subst [where P="(\<lambda>zenon_Vkb. (?z_hix \\in zenon_Vkb))", OF z_Ha z_Hiy])
 have z_Hkn: "~?z_hki((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))))" (is "~(_&?z_hko)")
 by (rule zenon_notex_0 [of "?z_hki" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))", OF z_Hjn])
 show FALSE
 proof (rule zenon_notand [OF z_Hkn])
  assume z_Hkp:"(~?z_hfy)"
  show FALSE
  by (rule notE [OF z_Hkp z_Hfy])
 next
  assume z_Hkq:"(~?z_hko)"
  have z_Hkr: "(~bEx(Nat, (\<lambda>nt. bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])), (\<lambda>Q. ((nt=?z_hgh)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hgo&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), nt))&?z_hct)))))))))))))" (is "~?z_hks")
  by (rule subst [where P="(\<lambda>zenon_Veg. (~bEx(zenon_Veg, (\<lambda>nt. bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])), (\<lambda>Q. ((nt=?z_hgh)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hgo&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), nt)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nt, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), nt))&?z_hct))))))))))))))", OF z_Ha z_Hkq])
  have z_Hlu_z_Hkr: "(~(\\E x:((x \\in Nat)&bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])), (\<lambda>Q. ((x=?z_hgh)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hgo&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), x))&?z_hct))))))))))))) == (~?z_hks)" (is "?z_hlu == ?z_hkr")
  by (unfold bEx_def)
  have z_Hlu: "?z_hlu" (is "~(\\E x : ?z_hmm(x))")
  by (unfold z_Hlu_z_Hkr, fact z_Hkr)
  have z_Hmn: "~?z_hmm(?z_hix)" (is "~(_&?z_hmo)")
  by (rule zenon_notex_0 [of "?z_hmm" "?z_hix", OF z_Hlu])
  show FALSE
  proof (rule zenon_notand [OF z_Hmn])
   assume z_Hmp:"(~?z_hkj)"
   show FALSE
   by (rule notE [OF z_Hmp z_Hkj])
  next
   assume z_Hmq:"(~?z_hmo)"
   have z_Hmr_z_Hmq: "(~(\\E x:((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hja&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hgo&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), ?z_hix)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), ?z_hix, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&?z_hjk)))))))))) == (~?z_hmo)" (is "?z_hmr == ?z_hmq")
   by (unfold bEx_def)
   have z_Hmr: "?z_hmr" (is "~(\\E x : ?z_hni(x))")
   by (unfold z_Hmr_z_Hmq, fact z_Hmq)
   have z_Hnj: "~?z_hni((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=?z_hgh)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hgo&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), newTerm))&?z_hct)))))))))))))"
   by (rule zenon_notex_0 [of "?z_hni" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=?z_hgh)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))])))&(?z_hgo&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hct)))))))))))))), newTerm))&?z_hct))))))))))))", OF z_Hmr])
   show FALSE
   proof (rule zenon_notand [OF z_Hnj])
    assume z_Hnk:"(~?z_hhx)"
    show FALSE
    by (rule notE [OF z_Hnk z_Hhx])
   next
    assume z_Hnl:"(~?z_hiz)"
    show FALSE
    proof (rule zenon_notand [OF z_Hnl])
     assume z_Hnm:"(?z_hix~=?z_hgh)"
     show FALSE
     by (rule notE [OF z_Hnm z_Hja])
    next
     assume z_Hnn:"(~?z_hjb)"
     show FALSE
     proof (rule zenon_notand [OF z_Hnn])
      assume z_Hnk:"(~?z_hhx)"
      show FALSE
      by (rule notE [OF z_Hnk z_Hhx])
     next
      assume z_Hno:"(~?z_hjc)"
      show FALSE
      proof (rule zenon_notand [OF z_Hno])
       assume z_Hnp:"(~?z_hgo)"
       show FALSE
       by (rule notE [OF z_Hnp z_Hgo])
      next
       assume z_Hnq:"(~?z_hjd)"
       show FALSE
       proof (rule zenon_notand [OF z_Hnq])
        assume z_Hnr:"(~?z_hia)"
        show FALSE
        by (rule notE [OF z_Hnr z_Hia])
       next
        assume z_Hns:"(~?z_hje)"
        show FALSE
        proof (rule zenon_notand [OF z_Hns])
         assume z_Hnt:"(~?z_hjf)"
         show FALSE
         by (rule notE [OF z_Hnt z_Hjf])
        next
         assume z_Hnu:"(~?z_hjg)"
         show FALSE
         proof (rule zenon_notand [OF z_Hnu])
          assume z_Hnv:"(a_currentTermhash_primea~=?z_hjj)"
          show FALSE
          by (rule notE [OF z_Hnv z_Hjh])
         next
          assume z_Hnw:"(~?z_hji)"
          show FALSE
          proof (rule zenon_notand [OF z_Hnw])
           assume z_Hnx:"(a_statehash_primea~=?z_hin)"
           show FALSE
           by (rule notE [OF z_Hnx z_Him])
          next
           assume z_Hny:"(~?z_hjk)"
           show FALSE
           proof (rule zenon_notand [OF z_Hny])
            assume z_Hnz:"(a_configTermhash_primea~=?z_hjm)"
            show FALSE
            by (rule notE [OF z_Hnz z_Hjl])
           next
            assume z_Hoa:"(~?z_hct)"
            show FALSE
            proof (rule zenon_notand [OF z_Hoa])
             assume z_Hob:"(a_confighash_primea~=config)"
             show FALSE
             by (rule notE [OF z_Hob z_Hcu])
            next
             assume z_Hoc:"(a_configVersionhash_primea~=configVersion)"
             show FALSE
             by (rule notE [OF z_Hoc z_Hcw])
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 761"; *} qed
lemma ob'781:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'190: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'193: "(((Server) \<noteq> ({})))"
assumes v'194: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'195: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'196: "(((Primary) \<noteq> (Secondary)))"
assumes v'210: "(\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
shows "(\<exists> s \<in> (Server) : (\<exists> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (\<exists> nt \<in> (Term) : ((((nt) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (nt))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nt), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (nt)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"(is "PROP ?ob'781")
proof -
ML_command {* writeln "*** TLAPS ENTER 781"; *}
show "PROP ?ob'781"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_170271.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_170271.znn.out
;; obligation #781
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'190" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'193" (-. (= Server
TLA.emptyset))
$hyp "v'194" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'195" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'196" (-. (= Primary
Secondary))
$hyp "v'210" (TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) newTerm (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$goal (TLA.bEx Server ((s) (TLA.bEx (Quorums (TLA.fapply config s)) ((Q) (TLA.bEx Term ((nt) (/\ (= nt
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s nt))) (= a_currentTermhash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nt (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s nt)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hi:"bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hi")
 using v'210 by blast
 assume z_Hj:"(~bEx(Server, (\<lambda>s. bEx(Quorums((config[s])), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "~?z_hcv")
 have z_Hcy_z_Hi: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_hi" (is "?z_hcy == _")
 by (unfold bEx_def)
 have z_Hcy: "?z_hcy" (is "\\E x : ?z_heg(x)")
 by (unfold z_Hcy_z_Hi, fact z_Hi)
 have z_Heh: "?z_heg((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hej&?z_hek")
 by (rule zenon_ex_choose_0 [of "?z_heg", OF z_Hcy])
 have z_Hej: "?z_hej"
 by (rule zenon_and_0 [OF z_Heh])
 have z_Hek: "?z_hek"
 by (rule zenon_and_1 [OF z_Heh])
 have z_Hel_z_Hek: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hek" (is "?z_hel == _")
 by (unfold bEx_def)
 have z_Hel: "?z_hel" (is "\\E x : ?z_hfw(x)")
 by (unfold z_Hel_z_Hek, fact z_Hek)
 have z_Hfx: "?z_hfw((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hfz&?z_hga")
 by (rule zenon_ex_choose_0 [of "?z_hfw", OF z_Hel])
 have z_Hga: "?z_hga"
 by (rule zenon_and_1 [OF z_Hfx])
 have z_Hgb_z_Hga: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hga" (is "?z_hgb == _")
 by (unfold bEx_def)
 have z_Hgb: "?z_hgb" (is "\\E x : ?z_hhe(x)")
 by (unfold z_Hgb_z_Hga, fact z_Hga)
 have z_Hhf: "?z_hhe((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hhh&?z_hhi")
 by (rule zenon_ex_choose_0 [of "?z_hhe", OF z_Hgb])
 have z_Hhi: "?z_hhi" (is "?z_hhj&?z_hhk")
 by (rule zenon_and_1 [OF z_Hhf])
 have z_Hhk: "?z_hhk" (is "?z_hgh&?z_hhl")
 by (rule zenon_and_1 [OF z_Hhi])
 have z_Hgh: "?z_hgh"
 by (rule zenon_and_0 [OF z_Hhk])
 have z_Hhm_z_Hj: "(~(\\E x:((x \\in Server)&bEx(Quorums((config[x])), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))) == (~?z_hcv)" (is "?z_hhm == ?z_hj")
 by (unfold bEx_def)
 have z_Hhm: "?z_hhm" (is "~(\\E x : ?z_hhq(x))")
 by (unfold z_Hhm_z_Hj, fact z_Hj)
 have z_Hhr: "~?z_hhq((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "~(_&?z_hhs)")
 by (rule zenon_notex_0 [of "?z_hhq" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))", OF z_Hhm])
 show FALSE
 proof (rule zenon_notand [OF z_Hhr])
  assume z_Hht:"(~?z_hej)"
  show FALSE
  by (rule notE [OF z_Hht z_Hej])
 next
  assume z_Hhu:"(~?z_hhs)"
  have z_Hhv_z_Hhu: "(~(\\E x:((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))) == (~?z_hhs)" (is "?z_hhv == ?z_hhu")
  by (unfold bEx_def)
  have z_Hhv: "?z_hhv" (is "~(\\E x : ?z_hhy(x))")
  by (unfold z_Hhv_z_Hhu, fact z_Hhu)
  have z_Hhz: "~?z_hhy((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))"
  by (rule zenon_notex_0 [of "?z_hhy" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_1 \\in x), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=x), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))", OF z_Hhv])
  show FALSE
  proof (rule zenon_notand [OF z_Hhz])
   assume z_Hia:"(~?z_hgh)"
   show FALSE
   by (rule notE [OF z_Hia z_Hgh])
  next
   assume z_Hib:"(~?z_hga)"
   show FALSE
   by (rule notE [OF z_Hib z_Hga])
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 781"; *} qed
lemma ob'841:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition BecomeLeader suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'148: "(((Term) = (Nat)))"
assumes v'149: "(((Version) = (Nat)))"
assumes v'152: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'188: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'191: "(((Server) \<noteq> ({})))"
assumes v'192: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> (((subsetOf(((SUBSET (S))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((S))))))))) \<noteq> ({})))))))"
assumes v'193: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | ((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> (subsetOf(((SUBSET (fapply ((config), (s))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply ((config), (s))))))))))) : (((Q) \<noteq> ({})))))))"
assumes v'194: "(((Primary) \<noteq> (Secondary)))"
fixes p
assumes p_in : "(p \<in> (Server))"
fixes newConfig
assumes newConfig_in : "(newConfig \<in> ((SUBSET (Server))))"
fixes nv
assumes nv_in : "(nv \<in> (Version))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> ((a_he18fb8c89c2e3ba63d770a77f3b7a1a :: c)))"
fixes pQ
assumes pQ_in : "(pQ \<in> (subsetOf(((SUBSET (fapply ((config), (p))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply ((config), (p))))))))))))"
fixes tQ
assumes tQ_in : "(tQ \<in> (subsetOf(((SUBSET (fapply (((a_confighash_primea :: c)), (t))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply (((a_confighash_primea :: c)), (t))))))))))))"
fixes n
assumes n_in : "(n \<in> (tQ))"
assumes v'245: "(((ConfigQuorumCheck ((p)))) & ((TermQuorumCheck ((p)))) & (((p) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (p))))) & ((greater ((nv), (fapply ((configVersion), (p)))))))"
assumes v'246: "(((fapply ((state), (p))) = (Primary)))"
assumes v'247: "((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (p))))) \<union> (((fapply ((config), (p))) \\ (newConfig))))))))))"
assumes v'248: "((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (fapply ((currentTerm), (p)))])))"
assumes v'249: "((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(p)] = (nv)])))"
assumes v'250: "((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(p)] = (newConfig)])))"
assumes v'251: "((((a_currentTermhash_primea :: c)) = (currentTerm)))"
assumes v'252: "((((a_statehash_primea :: c)) = (state)))"
assumes v'253: "(((tQ) \<in> (subsetOf(((SUBSET (fapply ((config), (t))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply ((config), (t)))))))))))))"
assumes v'254: "(((n) \<in> (pQ)))"
assumes v'255: "((geq ((fapply ((currentTerm), (n))), (fapply ((configTerm), (s))))))"
assumes v'256: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<Longrightarrow> (\<And> s_1 :: c. s_1 \<in> (Server) \<Longrightarrow> (\<And> newConfig_1 :: c. newConfig_1 \<in> ((SUBSET (Server))) \<Longrightarrow> (\<And> nv_1 :: c. nv_1 \<in> (Nat) \<Longrightarrow> (((((fapply ((state), (s_1))) = (Primary))) & ((ConfigQuorumCheck ((s_1)))) & ((TermQuorumCheck ((s_1)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig_1) \\ (fapply ((config), (s_1))))) \<union> (((fapply ((config), (s_1))) \\ (newConfig_1)))))))))) & (((s_1) \<in> (newConfig_1))) & (((newConfig_1) \<noteq> (fapply ((config), (s_1))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (fapply ((currentTerm), (s_1)))]))) & ((greater ((nv_1), (fapply ((configVersion), (s_1)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s_1)] = (nv_1)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s_1)] = (newConfig_1)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))) \<Longrightarrow> (\<forall> t_1 \<in> (Server) : (((((fapply (((a_configTermhash_primea :: c)), (t_1))) = (fapply ((configTerm), (t_1))))) \<and> (((fapply (((a_currentTermhash_primea :: c)), (t_1))) = (fapply ((currentTerm), (t_1))))))))))))))"
shows "((geq ((fapply (((a_currentTermhash_primea :: c)), (n))), (fapply (((a_configTermhash_primea :: c)), (s))))))"(is "PROP ?ob'841")
proof -
ML_command {* writeln "*** TLAPS ENTER 841"; *}
show "PROP ?ob'841"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_192823.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_192823.znn.out
;; obligation #841
$hyp "v'148" (= Term arith.N)
$hyp "v'149" (= Version
arith.N)
$hyp "v'152" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'188" (/\ (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'191" (-. (= Server
TLA.emptyset))
$hyp "v'192" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (TLA.subsetOf (TLA.SUBSET S) ((i) (arith.lt (Cardinality S)
(arith.mul (Cardinality i) (TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0))))))
TLA.emptyset))))))
$hyp "v'193" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N)) (TLA.in state
(TLA.FuncSet Server (TLA.set Secondary Primary))) (TLA.in config
(TLA.FuncSet Server (TLA.SUBSET Server))) (TLA.in configVersion
(TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))) (TLA.bAll Server ((s) (TLA.bAll (TLA.subsetOf (TLA.SUBSET (TLA.fapply config s)) ((i) (arith.lt (Cardinality (TLA.fapply config s))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'194" (-. (= Primary
Secondary))
$hyp "p_in" (TLA.in p Server)
$hyp "newConfig_in" (TLA.in newConfig (TLA.SUBSET Server))
$hyp "nv_in" (TLA.in nv Version)
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t a_he18fb8c89c2e3ba63d770a77f3b7a1a)
$hyp "pQ_in" (TLA.in pQ (TLA.subsetOf (TLA.SUBSET (TLA.fapply config p)) ((i) (arith.lt (Cardinality (TLA.fapply config p))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))))
$hyp "tQ_in" (TLA.in tQ (TLA.subsetOf (TLA.SUBSET (TLA.fapply a_confighash_primea t)) ((i) (arith.lt (Cardinality (TLA.fapply a_confighash_primea t))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))))
$hyp "n_in" (TLA.in n tQ)
$hyp "v'245" (/\ (ConfigQuorumCheck p) (TermQuorumCheck p) (TLA.in p
newConfig) (-. (= newConfig (TLA.fapply config p)))
(arith.lt (TLA.fapply configVersion p)
nv))
$hyp "v'246" (= (TLA.fapply state p)
Primary)
$hyp "v'247" (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig (TLA.fapply config p))
(TLA.setminus (TLA.fapply config p)
newConfig))))
$hyp "v'248" (= a_configTermhash_primea
(TLA.except configTerm p (TLA.fapply currentTerm p)))
$hyp "v'249" (= a_configVersionhash_primea
(TLA.except configVersion p nv))
$hyp "v'250" (= a_confighash_primea
(TLA.except config p newConfig))
$hyp "v'251" (= a_currentTermhash_primea
currentTerm)
$hyp "v'252" (= a_statehash_primea state)
$hyp "v'253" (TLA.in tQ
(TLA.subsetOf (TLA.SUBSET (TLA.fapply config t)) ((i) (arith.lt (Cardinality (TLA.fapply config t))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))))
$hyp "v'254" (TLA.in n pQ)
$hyp "v'255" (arith.le (TLA.fapply configTerm s)
(TLA.fapply currentTerm n))
$hyp "v'256" (=> (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa
a_Inv866unde_1unde_0unde_defa) (TLA.bAll Server ((s_1) (TLA.bAll (TLA.SUBSET Server) ((newConfig_1) (TLA.bAll arith.N ((nv_1) (=> (/\ (= (TLA.fapply state s_1)
Primary) (ConfigQuorumCheck s_1) (TermQuorumCheck s_1)
(= (TLA.fapply TLA.Succ 0) (Cardinality (TLA.cup (TLA.setminus newConfig_1
(TLA.fapply config s_1)) (TLA.setminus (TLA.fapply config s_1)
newConfig_1)))) (TLA.in s_1 newConfig_1) (-. (= newConfig_1
(TLA.fapply config s_1))) (= a_configTermhash_primea
(TLA.except configTerm s_1 (TLA.fapply currentTerm s_1)))
(arith.lt (TLA.fapply configVersion s_1) nv_1) (= a_configVersionhash_primea
(TLA.except configVersion s_1 nv_1)) (= a_confighash_primea
(TLA.except config s_1 newConfig_1)) (/\ (= a_currentTermhash_primea
currentTerm) (= a_statehash_primea
state))) (TLA.bAll Server ((t_1) (/\ (= (TLA.fapply a_configTermhash_primea t_1)
(TLA.fapply configTerm t_1)) (= (TLA.fapply a_currentTermhash_primea t_1)
(TLA.fapply currentTerm t_1)))))))))))))
$goal (arith.le (TLA.fapply a_configTermhash_primea s)
(TLA.fapply a_currentTermhash_primea n))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hbd&_")
 using v'188 by blast
 have z_Hq:"(ConfigQuorumCheck(p)&(TermQuorumCheck(p)&((p \\in newConfig)&((newConfig~=(config[p]))&((configVersion[p]) < nv)))))" (is "?z_hcn&?z_hcp")
 using v'245 by blast
 have z_Hbb:"(?z_hbd=>bAll(Server, (\<lambda>s_1. bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Nat, (\<lambda>nv_1. ((((state[s_1])=Primary)&(ConfigQuorumCheck(s_1)&(TermQuorumCheck(s_1)&((1=Cardinality(((newConfig_1 \\ (config[s_1])) \\cup ((config[s_1]) \\ newConfig_1))))&((s_1 \\in newConfig_1)&((newConfig_1~=(config[s_1]))&((a_configTermhash_primea=except(configTerm, s_1, (currentTerm[s_1])))&(((configVersion[s_1]) < nv_1)&((a_configVersionhash_primea=except(configVersion, s_1, nv_1))&((a_confighash_primea=except(config, s_1, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))))))))" (is "_=>?z_hda")
 using v'256 by blast
 have z_Hb:"(Version=Nat)"
 using v'149 by blast
 have z_Hx:"(a_statehash_primea=state)"
 using v'252 by blast
 have z_Hv:"(a_confighash_primea=except(config, p, newConfig))" (is "_=?z_hfh")
 using v'250 by blast
 have z_Hu:"(a_configVersionhash_primea=except(configVersion, p, nv))" (is "_=?z_hfi")
 using v'249 by blast
 have z_Ht:"(a_configTermhash_primea=except(configTerm, p, (currentTerm[p])))" (is "_=?z_hfj")
 using v'248 by blast
 have z_Hr:"((state[p])=Primary)" (is "?z_hfl=_")
 using v'246 by blast
 have z_Hw:"(a_currentTermhash_primea=currentTerm)"
 using v'251 by blast
 have z_Hi:"(p \\in Server)" (is "?z_hi")
 using p_in by blast
 have z_Hs:"(1=Cardinality(((newConfig \\ (config[p])) \\cup ((config[p]) \\ newConfig))))" (is "?z_hdr=?z_hfm")
 using v'247 by blast
 have z_Hl:"(s \\in Server)" (is "?z_hl")
 using s_in by blast
 have z_Hba:"((configTerm[s]) <= (currentTerm[n]))" (is "?z_hba")
 using v'255 by blast
 have z_Hj:"(newConfig \\in SUBSET(Server))" (is "?z_hj")
 using newConfig_in by blast
 have z_Hk:"(nv \\in Version)" (is "?z_hk")
 using nv_in by blast
 have zenon_L1_: "(a_currentTermhash_primea=currentTerm) ==> ((currentTerm[n])~=(a_currentTermhash_primea[n])) ==> FALSE" (is "?z_hw ==> ?z_hfu ==> FALSE")
 proof -
  assume z_Hw:"?z_hw"
  assume z_Hfu:"?z_hfu" (is "?z_hfs~=?z_hfv")
  have z_Hfw: "(?z_hfs~=?z_hfs)"
  by (rule subst [where P="(\<lambda>zenon_Vet. (?z_hfs~=(zenon_Vet[n])))", OF z_Hw z_Hfu])
  show FALSE
  by (rule zenon_noteq [OF z_Hfw])
 qed
 have zenon_L2_: "(a_currentTermhash_primea=currentTerm) ==> bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1]))))) ==> ?z_hl ==> ?z_hba ==> (~((a_configTermhash_primea[s]) <= (a_currentTermhash_primea[n]))) ==> FALSE" (is "?z_hw ==> ?z_hew ==> _ ==> _ ==> ?z_hbc ==> FALSE")
 proof -
  assume z_Hw:"?z_hw"
  assume z_Hew:"?z_hew"
  assume z_Hl:"?z_hl"
  assume z_Hba:"?z_hba"
  assume z_Hbc:"?z_hbc" (is "~?z_hgb")
  have z_Hgd_z_Hew: "(\\A x:((x \\in Server)=>(((a_configTermhash_primea[x])=(configTerm[x]))&((a_currentTermhash_primea[x])=(currentTerm[x]))))) == ?z_hew" (is "?z_hgd == _")
  by (unfold bAll_def)
  have z_Hgd: "?z_hgd" (is "\\A x : ?z_hgo(x)")
  by (unfold z_Hgd_z_Hew, fact z_Hew)
  show FALSE
  proof (rule notE [OF z_Hbc])
   have z_Hgp: "((configTerm[s])=(a_configTermhash_primea[s]))" (is "?z_hfr=?z_hgc")
   proof (rule zenon_nnpp [of "(?z_hfr=?z_hgc)"])
    assume z_Hgq:"(?z_hfr~=?z_hgc)"
    have z_Hgr: "?z_hgo(s)" (is "_=>?z_hgs")
    by (rule zenon_all_0 [of "?z_hgo" "s", OF z_Hgd])
    show FALSE
    proof (rule zenon_imply [OF z_Hgr])
     assume z_Hgt:"(~?z_hl)"
     show FALSE
     by (rule notE [OF z_Hgt z_Hl])
    next
     assume z_Hgs:"?z_hgs" (is "?z_hgu&?z_hgv")
     have z_Hgu: "?z_hgu"
     by (rule zenon_and_0 [OF z_Hgs])
     show FALSE
     by (rule zenon_eqsym [OF z_Hgu z_Hgq])
    qed
   qed
   have z_Hgw: "((currentTerm[n])=(a_currentTermhash_primea[n]))" (is "?z_hfs=?z_hfv")
   proof (rule zenon_nnpp [of "(?z_hfs=?z_hfv)"])
    assume z_Hfu:"(?z_hfs~=?z_hfv)"
    show FALSE
    by (rule zenon_L1_ [OF z_Hw z_Hfu])
   qed
   have z_Hgx: "(?z_hgc <= ?z_hfs)" (is "?z_hgx")
   by (rule subst [where P="(\<lambda>zenon_Vft. (zenon_Vft <= ?z_hfs))", OF z_Hgp], fact z_Hba)
   have z_Hgb: "?z_hgb"
   by (rule subst [where P="(\<lambda>zenon_Vgt. (?z_hgc <= zenon_Vgt))", OF z_Hgw], fact z_Hgx)
   thus "?z_hgb" .
  qed
 qed
 assume z_Hbc:"(~((a_configTermhash_primea[s]) <= (a_currentTermhash_primea[n])))" (is "~?z_hgb")
 have z_Hbd: "?z_hbd" (is "?z_hbe&?z_hcb")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hbe: "?z_hbe" (is "?z_hbf&?z_hbk")
 by (rule zenon_and_0 [OF z_Hbd])
 have z_Hcb: "?z_hcb" (is "_&?z_hcd")
 by (rule zenon_and_1 [OF z_Hbd])
 have z_Hcc: "Safety"
 by (rule zenon_and_0 [OF z_Hcb])
 have z_Hcd: "?z_hcd" (is "_&?z_hcf")
 by (rule zenon_and_1 [OF z_Hcb])
 have z_Hce: "a_Inv2973unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hcd])
 have z_Hcf: "?z_hcf" (is "_&?z_hch")
 by (rule zenon_and_1 [OF z_Hcd])
 have z_Hcg: "a_Inv1758unde_1unde_0unde_defa"
 by (rule zenon_and_0 [OF z_Hcf])
 have z_Hch: "?z_hch" (is "_&?z_hcj")
 by (rule zenon_and_1 [OF z_Hcf])
 have z_Hci: "a_Inv3915unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hch])
 have z_Hcj: "?z_hcj"
 by (rule zenon_and_1 [OF z_Hch])
 have z_Hck: "a_Inv3246unde_1unde_2unde_defa"
 by (rule zenon_and_0 [OF z_Hcj])
 have z_Hcl: "a_Inv866unde_1unde_0unde_defa"
 by (rule zenon_and_1 [OF z_Hcj])
 have z_Hbf: "?z_hbf"
 by (rule zenon_and_0 [OF z_Hbe])
 have z_Hbk: "?z_hbk" (is "?z_hbl&?z_hbr")
 by (rule zenon_and_1 [OF z_Hbe])
 have z_Hbl: "?z_hbl"
 by (rule zenon_and_0 [OF z_Hbk])
 have z_Hbr: "?z_hbr" (is "?z_hbs&?z_hbw")
 by (rule zenon_and_1 [OF z_Hbk])
 have z_Hbs: "?z_hbs"
 by (rule zenon_and_0 [OF z_Hbr])
 have z_Hbw: "?z_hbw" (is "?z_hbx&?z_hbz")
 by (rule zenon_and_1 [OF z_Hbr])
 have z_Hbx: "?z_hbx"
 by (rule zenon_and_0 [OF z_Hbw])
 have z_Hbz: "?z_hbz"
 by (rule zenon_and_1 [OF z_Hbw])
 have z_Hcn: "?z_hcn"
 by (rule zenon_and_0 [OF z_Hq])
 have z_Hcp: "?z_hcp" (is "?z_hcq&?z_hcr")
 by (rule zenon_and_1 [OF z_Hq])
 have z_Hcq: "?z_hcq"
 by (rule zenon_and_0 [OF z_Hcp])
 have z_Hcr: "?z_hcr" (is "?z_hcs&?z_hcu")
 by (rule zenon_and_1 [OF z_Hcp])
 have z_Hcs: "?z_hcs"
 by (rule zenon_and_0 [OF z_Hcr])
 have z_Hcu: "?z_hcu" (is "?z_hcv&?z_hcx")
 by (rule zenon_and_1 [OF z_Hcr])
 have z_Hcv: "?z_hcv" (is "_~=?z_hcw")
 by (rule zenon_and_0 [OF z_Hcu])
 have z_Hcx: "?z_hcx"
 by (rule zenon_and_1 [OF z_Hcu])
 show FALSE
 proof (rule zenon_imply [OF z_Hbb])
  assume z_Hhe:"(~?z_hbd)"
  show FALSE
  proof (rule zenon_notand [OF z_Hhe])
   assume z_Hhf:"(~?z_hbe)"
   show FALSE
   proof (rule zenon_notand [OF z_Hhf])
    assume z_Hhg:"(~?z_hbf)"
    show FALSE
    by (rule notE [OF z_Hhg z_Hbf])
   next
    assume z_Hhh:"(~?z_hbk)"
    show FALSE
    proof (rule zenon_notand [OF z_Hhh])
     assume z_Hhi:"(~?z_hbl)"
     show FALSE
     by (rule notE [OF z_Hhi z_Hbl])
    next
     assume z_Hhj:"(~?z_hbr)"
     show FALSE
     proof (rule zenon_notand [OF z_Hhj])
      assume z_Hhk:"(~?z_hbs)"
      show FALSE
      by (rule notE [OF z_Hhk z_Hbs])
     next
      assume z_Hhl:"(~?z_hbw)"
      show FALSE
      proof (rule zenon_notand [OF z_Hhl])
       assume z_Hhm:"(~?z_hbx)"
       show FALSE
       by (rule notE [OF z_Hhm z_Hbx])
      next
       assume z_Hhn:"(~?z_hbz)"
       show FALSE
       by (rule notE [OF z_Hhn z_Hbz])
      qed
     qed
    qed
   qed
  next
   assume z_Hho:"(~?z_hcb)"
   show FALSE
   proof (rule zenon_notand [OF z_Hho])
    assume z_Hhp:"(~Safety)"
    show FALSE
    by (rule notE [OF z_Hhp z_Hcc])
   next
    assume z_Hhq:"(~?z_hcd)"
    show FALSE
    proof (rule zenon_notand [OF z_Hhq])
     assume z_Hhr:"(~a_Inv2973unde_1unde_1unde_defa)"
     show FALSE
     by (rule notE [OF z_Hhr z_Hce])
    next
     assume z_Hhs:"(~?z_hcf)"
     show FALSE
     proof (rule zenon_notand [OF z_Hhs])
      assume z_Hht:"(~a_Inv1758unde_1unde_0unde_defa)"
      show FALSE
      by (rule notE [OF z_Hht z_Hcg])
     next
      assume z_Hhu:"(~?z_hch)"
      show FALSE
      proof (rule zenon_notand [OF z_Hhu])
       assume z_Hhv:"(~a_Inv3915unde_1unde_1unde_defa)"
       show FALSE
       by (rule notE [OF z_Hhv z_Hci])
      next
       assume z_Hhw:"(~?z_hcj)"
       show FALSE
       proof (rule zenon_notand [OF z_Hhw])
        assume z_Hhx:"(~a_Inv3246unde_1unde_2unde_defa)"
        show FALSE
        by (rule notE [OF z_Hhx z_Hck])
       next
        assume z_Hhy:"(~a_Inv866unde_1unde_0unde_defa)"
        show FALSE
        by (rule notE [OF z_Hhy z_Hcl])
       qed
      qed
     qed
    qed
   qed
  qed
 next
  assume z_Hda:"?z_hda"
  have z_Hhz_z_Hda: "(\\A x:((x \\in Server)=>bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Nat, (\<lambda>nv_1. ((((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((?z_hdr=Cardinality(((newConfig_1 \\ (config[x])) \\cup ((config[x]) \\ newConfig_1))))&((x \\in newConfig_1)&((newConfig_1~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < nv_1)&((a_configVersionhash_primea=except(configVersion, x, nv_1))&((a_confighash_primea=except(config, x, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))))))) == ?z_hda" (is "?z_hhz == _")
  by (unfold bAll_def)
  have z_Hhz: "?z_hhz" (is "\\A x : ?z_hjk(x)")
  by (unfold z_Hhz_z_Hda, fact z_Hda)
  have z_Hjl: "(nv \\in Nat)" (is "?z_hjl")
  by (rule subst [where P="(\<lambda>zenon_Vws. (nv \\in zenon_Vws))", OF z_Hb z_Hk])
  have z_Hjp: "?z_hjk(p)" (is "_=>?z_hjq")
  by (rule zenon_all_0 [of "?z_hjk" "p", OF z_Hhz])
  show FALSE
  proof (rule zenon_imply [OF z_Hjp])
   assume z_Hjr:"(~?z_hi)"
   show FALSE
   by (rule notE [OF z_Hjr z_Hi])
  next
   assume z_Hjq:"?z_hjq"
   have z_Hjs_z_Hjq: "(\\A x:((x \\in SUBSET(Server))=>bAll(Nat, (\<lambda>nv_1. (((?z_hfl=Primary)&(?z_hcn&(?z_hcq&((?z_hdr=Cardinality(((x \\ ?z_hcw) \\cup (?z_hcw \\ x))))&((p \\in x)&((x~=?z_hcw)&((a_configTermhash_primea=?z_hfj)&(((configVersion[p]) < nv_1)&((a_configVersionhash_primea=except(configVersion, p, nv_1))&((a_confighash_primea=except(config, p, x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))))) == ?z_hjq" (is "?z_hjs == _")
   by (unfold bAll_def)
   have z_Hjs: "?z_hjs" (is "\\A x : ?z_hku(x)")
   by (unfold z_Hjs_z_Hjq, fact z_Hjq)
   have z_Hkv: "?z_hku(newConfig)" (is "_=>?z_hkw")
   by (rule zenon_all_0 [of "?z_hku" "newConfig", OF z_Hjs])
   show FALSE
   proof (rule zenon_imply [OF z_Hkv])
    assume z_Hkx:"(~?z_hj)"
    show FALSE
    by (rule notE [OF z_Hkx z_Hj])
   next
    assume z_Hkw:"?z_hkw"
    have z_Hky_z_Hkw: "(\\A x:((x \\in Nat)=>(((?z_hfl=Primary)&(?z_hcn&(?z_hcq&((?z_hdr=?z_hfm)&(?z_hcs&(?z_hcv&((a_configTermhash_primea=?z_hfj)&(((configVersion[p]) < x)&((a_configVersionhash_primea=except(configVersion, p, x))&((a_confighash_primea=?z_hfh)&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))) == ?z_hkw" (is "?z_hky == _")
    by (unfold bAll_def)
    have z_Hky: "?z_hky" (is "\\A x : ?z_hlp(x)")
    by (unfold z_Hky_z_Hkw, fact z_Hkw)
    have z_Hlq: "?z_hlp(nv)" (is "_=>?z_hlr")
    by (rule zenon_all_0 [of "?z_hlp" "nv", OF z_Hky])
    show FALSE
    proof (rule zenon_imply [OF z_Hlq])
     assume z_Hls:"(~?z_hjl)"
     show FALSE
     by (rule notE [OF z_Hls z_Hjl])
    next
     assume z_Hlr:"?z_hlr" (is "?z_hlt=>?z_hew")
     show FALSE
     proof (rule zenon_imply [OF z_Hlr])
      assume z_Hlu:"(~?z_hlt)" (is "~(?z_hr&?z_hlv)")
      show FALSE
      proof (rule zenon_notand [OF z_Hlu])
       assume z_Hlw:"(?z_hfl~=Primary)"
       show FALSE
       by (rule notE [OF z_Hlw z_Hr])
      next
       assume z_Hlx:"(~?z_hlv)" (is "~(_&?z_hly)")
       show FALSE
       proof (rule zenon_notand [OF z_Hlx])
        assume z_Hlz:"(~?z_hcn)"
        show FALSE
        by (rule notE [OF z_Hlz z_Hcn])
       next
        assume z_Hma:"(~?z_hly)" (is "~(_&?z_hmb)")
        show FALSE
        proof (rule zenon_notand [OF z_Hma])
         assume z_Hmc:"(~?z_hcq)"
         show FALSE
         by (rule notE [OF z_Hmc z_Hcq])
        next
         assume z_Hmd:"(~?z_hmb)" (is "~(?z_hs&?z_hme)")
         show FALSE
         proof (rule zenon_notand [OF z_Hmd])
          assume z_Hmf:"(?z_hdr~=?z_hfm)"
          show FALSE
          by (rule notE [OF z_Hmf z_Hs])
         next
          assume z_Hmg:"(~?z_hme)" (is "~(_&?z_hmh)")
          show FALSE
          proof (rule zenon_notand [OF z_Hmg])
           assume z_Hmi:"(~?z_hcs)"
           show FALSE
           by (rule notE [OF z_Hmi z_Hcs])
          next
           assume z_Hmj:"(~?z_hmh)" (is "~(_&?z_hmk)")
           show FALSE
           proof (rule zenon_notand [OF z_Hmj])
            assume z_Hml:"(~?z_hcv)" (is "~~?z_hmm")
            show FALSE
            by (rule notE [OF z_Hml z_Hcv])
           next
            assume z_Hmn:"(~?z_hmk)" (is "~(?z_ht&?z_hmo)")
            show FALSE
            proof (rule zenon_notand [OF z_Hmn])
             assume z_Hmp:"(a_configTermhash_primea~=?z_hfj)"
             show FALSE
             by (rule notE [OF z_Hmp z_Ht])
            next
             assume z_Hmq:"(~?z_hmo)" (is "~(_&?z_hmr)")
             show FALSE
             proof (rule zenon_notand [OF z_Hmq])
              assume z_Hms:"(~?z_hcx)"
              show FALSE
              by (rule notE [OF z_Hms z_Hcx])
             next
              assume z_Hmt:"(~?z_hmr)" (is "~(?z_hu&?z_hlo)")
              show FALSE
              proof (rule zenon_notand [OF z_Hmt])
               assume z_Hmu:"(a_configVersionhash_primea~=?z_hfi)"
               show FALSE
               by (rule notE [OF z_Hmu z_Hu])
              next
               assume z_Hmv:"(~?z_hlo)" (is "~(?z_hv&?z_het)")
               show FALSE
               proof (rule zenon_notand [OF z_Hmv])
               assume z_Hmw:"(a_confighash_primea~=?z_hfh)"
               show FALSE
               by (rule notE [OF z_Hmw z_Hv])
               next
               assume z_Hmx:"(~?z_het)" (is "~(?z_hw&?z_hx)")
               show FALSE
               proof (rule zenon_notand [OF z_Hmx])
               assume z_Hmy:"(a_currentTermhash_primea~=currentTerm)"
               show FALSE
               by (rule notE [OF z_Hmy z_Hw])
               next
               assume z_Hmz:"(a_statehash_primea~=state)"
               show FALSE
               by (rule notE [OF z_Hmz z_Hx])
               qed
               qed
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hew:"?z_hew"
      show FALSE
      by (rule zenon_L2_ [OF z_Hw z_Hew z_Hl z_Hba z_Hbc])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 841"; *} qed
lemma ob'881:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition BecomeLeader suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'147: "(((Term) = (Nat)))"
assumes v'148: "(((Version) = (Nat)))"
assumes v'151: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'187: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'190: "(((Server) \<noteq> ({})))"
assumes v'191: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> (((subsetOf(((SUBSET (S))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((S))))))))) \<noteq> ({})))))))"
assumes v'192: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | ((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> (subsetOf(((SUBSET (fapply ((config), (s))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply ((config), (s))))))))))) : (((Q) \<noteq> ({})))))))"
assumes v'193: "(((Primary) \<noteq> (Secondary)))"
fixes p
assumes p_in : "(p \<in> (Server))"
fixes newConfig
assumes newConfig_in : "(newConfig \<in> ((SUBSET (Server))))"
fixes nv
assumes nv_in : "(nv \<in> (Version))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> ((a_he18fb8c89c2e3ba63d770a77f3b7a1a :: c)))"
fixes pQ
assumes pQ_in : "(pQ \<in> (subsetOf(((SUBSET (fapply ((config), (p))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply ((config), (p))))))))))))"
fixes tQ
assumes tQ_in : "(tQ \<in> (subsetOf(((SUBSET (fapply (((a_confighash_primea :: c)), (t))))), %i. ((greater (((mult (((Cardinality ((i)))), ((Succ[Succ[0]]))))), ((Cardinality ((fapply (((a_confighash_primea :: c)), (t))))))))))))"
fixes n
assumes n_in : "(n \<in> (tQ))"
assumes v'244: "(((ConfigQuorumCheck ((p)))) & ((TermQuorumCheck ((p)))) & (((p) \<in> (newConfig))) & (((newConfig) \<noteq> (fapply ((config), (p))))) & ((greater ((nv), (fapply ((configVersion), (p)))))))"
assumes v'245: "(((fapply ((state), (p))) = (Primary)))"
assumes v'246: "((((Succ[0])) = ((Cardinality ((((((newConfig) \\ (fapply ((config), (p))))) \<union> (((fapply ((config), (p))) \\ (newConfig))))))))))"
assumes v'247: "((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (fapply ((currentTerm), (p)))])))"
assumes v'248: "((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(p)] = (nv)])))"
assumes v'249: "((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(p)] = (newConfig)])))"
assumes v'250: "((((a_currentTermhash_primea :: c)) = (currentTerm)))"
assumes v'251: "((((a_statehash_primea :: c)) = (state)))"
assumes v'252: "(((n) \<in> (pQ)))"
assumes v'253: "((geq ((fapply ((currentTerm), (n))), (fapply ((configTerm), (s))))))"
assumes v'254: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<Longrightarrow> (\<And> s_1 :: c. s_1 \<in> (Server) \<Longrightarrow> (\<And> newConfig_1 :: c. newConfig_1 \<in> ((SUBSET (Server))) \<Longrightarrow> (\<And> nv_1 :: c. nv_1 \<in> (Nat) \<Longrightarrow> (((((fapply ((state), (s_1))) = (Primary))) & ((ConfigQuorumCheck ((s_1)))) & ((TermQuorumCheck ((s_1)))) & ((((Succ[0])) = ((Cardinality ((((((newConfig_1) \\ (fapply ((config), (s_1))))) \<union> (((fapply ((config), (s_1))) \\ (newConfig_1)))))))))) & (((s_1) \<in> (newConfig_1))) & (((newConfig_1) \<noteq> (fapply ((config), (s_1))))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (fapply ((currentTerm), (s_1)))]))) & ((greater ((nv_1), (fapply ((configVersion), (s_1)))))) & ((((a_configVersionhash_primea :: c)) = ([(configVersion) EXCEPT ![(s_1)] = (nv_1)]))) & ((((a_confighash_primea :: c)) = ([(config) EXCEPT ![(s_1)] = (newConfig_1)]))) & (((((a_currentTermhash_primea :: c)) = (currentTerm))) & ((((a_statehash_primea :: c)) = (state))))) \<Longrightarrow> (\<forall> t_1 \<in> (Server) : (((((fapply (((a_configTermhash_primea :: c)), (t_1))) = (fapply ((configTerm), (t_1))))) \<and> (((fapply (((a_currentTermhash_primea :: c)), (t_1))) = (fapply ((currentTerm), (t_1))))))))))))))"
shows "((geq ((fapply (((a_currentTermhash_primea :: c)), (n))), (fapply (((a_configTermhash_primea :: c)), (s))))))"(is "PROP ?ob'881")
proof -
ML_command {* writeln "*** TLAPS ENTER 881"; *}
show "PROP ?ob'881"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_883344.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_883344.znn.out
;; obligation #881
$hyp "v'147" (= Term arith.N)
$hyp "v'148" (= Version
arith.N)
$hyp "v'151" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'187" (/\ (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'190" (-. (= Server
TLA.emptyset))
$hyp "v'191" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (TLA.subsetOf (TLA.SUBSET S) ((i) (arith.lt (Cardinality S)
(arith.mul (Cardinality i) (TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0))))))
TLA.emptyset))))))
$hyp "v'192" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N)) (TLA.in state
(TLA.FuncSet Server (TLA.set Secondary Primary))) (TLA.in config
(TLA.FuncSet Server (TLA.SUBSET Server))) (TLA.in configVersion
(TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))) (TLA.bAll Server ((s) (TLA.bAll (TLA.subsetOf (TLA.SUBSET (TLA.fapply config s)) ((i) (arith.lt (Cardinality (TLA.fapply config s))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'193" (-. (= Primary
Secondary))
$hyp "p_in" (TLA.in p Server)
$hyp "newConfig_in" (TLA.in newConfig (TLA.SUBSET Server))
$hyp "nv_in" (TLA.in nv Version)
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t a_he18fb8c89c2e3ba63d770a77f3b7a1a)
$hyp "pQ_in" (TLA.in pQ (TLA.subsetOf (TLA.SUBSET (TLA.fapply config p)) ((i) (arith.lt (Cardinality (TLA.fapply config p))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))))
$hyp "tQ_in" (TLA.in tQ (TLA.subsetOf (TLA.SUBSET (TLA.fapply a_confighash_primea t)) ((i) (arith.lt (Cardinality (TLA.fapply a_confighash_primea t))
(arith.mul (Cardinality i)
(TLA.fapply TLA.Succ (TLA.fapply TLA.Succ 0)))))))
$hyp "n_in" (TLA.in n tQ)
$hyp "v'244" (/\ (ConfigQuorumCheck p) (TermQuorumCheck p) (TLA.in p
newConfig) (-. (= newConfig (TLA.fapply config p)))
(arith.lt (TLA.fapply configVersion p)
nv))
$hyp "v'245" (= (TLA.fapply state p)
Primary)
$hyp "v'246" (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus newConfig (TLA.fapply config p))
(TLA.setminus (TLA.fapply config p)
newConfig))))
$hyp "v'247" (= a_configTermhash_primea
(TLA.except configTerm p (TLA.fapply currentTerm p)))
$hyp "v'248" (= a_configVersionhash_primea
(TLA.except configVersion p nv))
$hyp "v'249" (= a_confighash_primea
(TLA.except config p newConfig))
$hyp "v'250" (= a_currentTermhash_primea
currentTerm)
$hyp "v'251" (= a_statehash_primea state)
$hyp "v'252" (TLA.in n pQ)
$hyp "v'253" (arith.le (TLA.fapply configTerm s)
(TLA.fapply currentTerm n))
$hyp "v'254" (=> (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa
a_Inv866unde_1unde_0unde_defa) (TLA.bAll Server ((s_1) (TLA.bAll (TLA.SUBSET Server) ((newConfig_1) (TLA.bAll arith.N ((nv_1) (=> (/\ (= (TLA.fapply state s_1)
Primary) (ConfigQuorumCheck s_1) (TermQuorumCheck s_1)
(= (TLA.fapply TLA.Succ 0) (Cardinality (TLA.cup (TLA.setminus newConfig_1
(TLA.fapply config s_1)) (TLA.setminus (TLA.fapply config s_1)
newConfig_1)))) (TLA.in s_1 newConfig_1) (-. (= newConfig_1
(TLA.fapply config s_1))) (= a_configTermhash_primea
(TLA.except configTerm s_1 (TLA.fapply currentTerm s_1)))
(arith.lt (TLA.fapply configVersion s_1) nv_1) (= a_configVersionhash_primea
(TLA.except configVersion s_1 nv_1)) (= a_confighash_primea
(TLA.except config s_1 newConfig_1)) (/\ (= a_currentTermhash_primea
currentTerm) (= a_statehash_primea
state))) (TLA.bAll Server ((t_1) (/\ (= (TLA.fapply a_configTermhash_primea t_1)
(TLA.fapply configTerm t_1)) (= (TLA.fapply a_currentTermhash_primea t_1)
(TLA.fapply currentTerm t_1)))))))))))))
$goal (arith.le (TLA.fapply a_configTermhash_primea s)
(TLA.fapply a_currentTermhash_primea n))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hbc&_")
 using v'187 by blast
 have z_Hq:"(ConfigQuorumCheck(p)&(TermQuorumCheck(p)&((p \\in newConfig)&((newConfig~=(config[p]))&((configVersion[p]) < nv)))))" (is "?z_hcm&?z_hco")
 using v'244 by blast
 have z_Hba:"(?z_hbc=>bAll(Server, (\<lambda>s_1. bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Nat, (\<lambda>nv_1. ((((state[s_1])=Primary)&(ConfigQuorumCheck(s_1)&(TermQuorumCheck(s_1)&((1=Cardinality(((newConfig_1 \\ (config[s_1])) \\cup ((config[s_1]) \\ newConfig_1))))&((s_1 \\in newConfig_1)&((newConfig_1~=(config[s_1]))&((a_configTermhash_primea=except(configTerm, s_1, (currentTerm[s_1])))&(((configVersion[s_1]) < nv_1)&((a_configVersionhash_primea=except(configVersion, s_1, nv_1))&((a_confighash_primea=except(config, s_1, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))))))))" (is "_=>?z_hcz")
 using v'254 by blast
 have z_Hb:"(Version=Nat)"
 using v'148 by blast
 have z_Hx:"(a_statehash_primea=state)"
 using v'251 by blast
 have z_Hv:"(a_confighash_primea=except(config, p, newConfig))" (is "_=?z_hfg")
 using v'249 by blast
 have z_Hu:"(a_configVersionhash_primea=except(configVersion, p, nv))" (is "_=?z_hfh")
 using v'248 by blast
 have z_Ht:"(a_configTermhash_primea=except(configTerm, p, (currentTerm[p])))" (is "_=?z_hfi")
 using v'247 by blast
 have z_Hr:"((state[p])=Primary)" (is "?z_hfk=_")
 using v'245 by blast
 have z_Hw:"(a_currentTermhash_primea=currentTerm)"
 using v'250 by blast
 have z_Hi:"(p \\in Server)" (is "?z_hi")
 using p_in by blast
 have z_Hs:"(1=Cardinality(((newConfig \\ (config[p])) \\cup ((config[p]) \\ newConfig))))" (is "?z_hdq=?z_hfl")
 using v'246 by blast
 have z_Hl:"(s \\in Server)" (is "?z_hl")
 using s_in by blast
 have z_Hz:"((configTerm[s]) <= (currentTerm[n]))" (is "?z_hz")
 using v'253 by blast
 have z_Hj:"(newConfig \\in SUBSET(Server))" (is "?z_hj")
 using newConfig_in by blast
 have z_Hk:"(nv \\in Version)" (is "?z_hk")
 using nv_in by blast
 have zenon_L1_: "(a_currentTermhash_primea=currentTerm) ==> ((currentTerm[n])~=(a_currentTermhash_primea[n])) ==> FALSE" (is "?z_hw ==> ?z_hft ==> FALSE")
 proof -
  assume z_Hw:"?z_hw"
  assume z_Hft:"?z_hft" (is "?z_hfr~=?z_hfu")
  have z_Hfv: "(?z_hfr~=?z_hfr)"
  by (rule subst [where P="(\<lambda>zenon_Vis. (?z_hfr~=(zenon_Vis[n])))", OF z_Hw z_Hft])
  show FALSE
  by (rule zenon_noteq [OF z_Hfv])
 qed
 have zenon_L2_: "(a_currentTermhash_primea=currentTerm) ==> bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1]))))) ==> ?z_hl ==> ?z_hz ==> (~((a_configTermhash_primea[s]) <= (a_currentTermhash_primea[n]))) ==> FALSE" (is "?z_hw ==> ?z_hev ==> _ ==> _ ==> ?z_hbb ==> FALSE")
 proof -
  assume z_Hw:"?z_hw"
  assume z_Hev:"?z_hev"
  assume z_Hl:"?z_hl"
  assume z_Hz:"?z_hz"
  assume z_Hbb:"?z_hbb" (is "~?z_hga")
  have z_Hgc_z_Hev: "(\\A x:((x \\in Server)=>(((a_configTermhash_primea[x])=(configTerm[x]))&((a_currentTermhash_primea[x])=(currentTerm[x]))))) == ?z_hev" (is "?z_hgc == _")
  by (unfold bAll_def)
  have z_Hgc: "?z_hgc" (is "\\A x : ?z_hgn(x)")
  by (unfold z_Hgc_z_Hev, fact z_Hev)
  show FALSE
  proof (rule notE [OF z_Hbb])
   have z_Hgo: "((configTerm[s])=(a_configTermhash_primea[s]))" (is "?z_hfq=?z_hgb")
   proof (rule zenon_nnpp [of "(?z_hfq=?z_hgb)"])
    assume z_Hgp:"(?z_hfq~=?z_hgb)"
    have z_Hgq: "?z_hgn(s)" (is "_=>?z_hgr")
    by (rule zenon_all_0 [of "?z_hgn" "s", OF z_Hgc])
    show FALSE
    proof (rule zenon_imply [OF z_Hgq])
     assume z_Hgs:"(~?z_hl)"
     show FALSE
     by (rule notE [OF z_Hgs z_Hl])
    next
     assume z_Hgr:"?z_hgr" (is "?z_hgt&?z_hgu")
     have z_Hgt: "?z_hgt"
     by (rule zenon_and_0 [OF z_Hgr])
     show FALSE
     by (rule zenon_eqsym [OF z_Hgt z_Hgp])
    qed
   qed
   have z_Hgv: "((currentTerm[n])=(a_currentTermhash_primea[n]))" (is "?z_hfr=?z_hfu")
   proof (rule zenon_nnpp [of "(?z_hfr=?z_hfu)"])
    assume z_Hft:"(?z_hfr~=?z_hfu)"
    show FALSE
    by (rule zenon_L1_ [OF z_Hw z_Hft])
   qed
   have z_Hgw: "(?z_hgb <= ?z_hfr)" (is "?z_hgw")
   by (rule subst [where P="(\<lambda>zenon_Vjs. (zenon_Vjs <= ?z_hfr))", OF z_Hgo], fact z_Hz)
   have z_Hga: "?z_hga"
   by (rule subst [where P="(\<lambda>zenon_Vks. (?z_hgb <= zenon_Vks))", OF z_Hgv], fact z_Hgw)
   thus "?z_hga" .
  qed
 qed
 assume z_Hbb:"(~((a_configTermhash_primea[s]) <= (a_currentTermhash_primea[n])))" (is "~?z_hga")
 have z_Hbc: "?z_hbc" (is "?z_hbd&?z_hca")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hbd: "?z_hbd" (is "?z_hbe&?z_hbj")
 by (rule zenon_and_0 [OF z_Hbc])
 have z_Hca: "?z_hca" (is "_&?z_hcc")
 by (rule zenon_and_1 [OF z_Hbc])
 have z_Hcb: "Safety"
 by (rule zenon_and_0 [OF z_Hca])
 have z_Hcc: "?z_hcc" (is "_&?z_hce")
 by (rule zenon_and_1 [OF z_Hca])
 have z_Hcd: "a_Inv2973unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hcc])
 have z_Hce: "?z_hce" (is "_&?z_hcg")
 by (rule zenon_and_1 [OF z_Hcc])
 have z_Hcf: "a_Inv1758unde_1unde_0unde_defa"
 by (rule zenon_and_0 [OF z_Hce])
 have z_Hcg: "?z_hcg" (is "_&?z_hci")
 by (rule zenon_and_1 [OF z_Hce])
 have z_Hch: "a_Inv3915unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hcg])
 have z_Hci: "?z_hci"
 by (rule zenon_and_1 [OF z_Hcg])
 have z_Hcj: "a_Inv3246unde_1unde_2unde_defa"
 by (rule zenon_and_0 [OF z_Hci])
 have z_Hck: "a_Inv866unde_1unde_0unde_defa"
 by (rule zenon_and_1 [OF z_Hci])
 have z_Hbe: "?z_hbe"
 by (rule zenon_and_0 [OF z_Hbd])
 have z_Hbj: "?z_hbj" (is "?z_hbk&?z_hbq")
 by (rule zenon_and_1 [OF z_Hbd])
 have z_Hbk: "?z_hbk"
 by (rule zenon_and_0 [OF z_Hbj])
 have z_Hbq: "?z_hbq" (is "?z_hbr&?z_hbv")
 by (rule zenon_and_1 [OF z_Hbj])
 have z_Hbr: "?z_hbr"
 by (rule zenon_and_0 [OF z_Hbq])
 have z_Hbv: "?z_hbv" (is "?z_hbw&?z_hby")
 by (rule zenon_and_1 [OF z_Hbq])
 have z_Hbw: "?z_hbw"
 by (rule zenon_and_0 [OF z_Hbv])
 have z_Hby: "?z_hby"
 by (rule zenon_and_1 [OF z_Hbv])
 have z_Hcm: "?z_hcm"
 by (rule zenon_and_0 [OF z_Hq])
 have z_Hco: "?z_hco" (is "?z_hcp&?z_hcq")
 by (rule zenon_and_1 [OF z_Hq])
 have z_Hcp: "?z_hcp"
 by (rule zenon_and_0 [OF z_Hco])
 have z_Hcq: "?z_hcq" (is "?z_hcr&?z_hct")
 by (rule zenon_and_1 [OF z_Hco])
 have z_Hcr: "?z_hcr"
 by (rule zenon_and_0 [OF z_Hcq])
 have z_Hct: "?z_hct" (is "?z_hcu&?z_hcw")
 by (rule zenon_and_1 [OF z_Hcq])
 have z_Hcu: "?z_hcu" (is "_~=?z_hcv")
 by (rule zenon_and_0 [OF z_Hct])
 have z_Hcw: "?z_hcw"
 by (rule zenon_and_1 [OF z_Hct])
 show FALSE
 proof (rule zenon_imply [OF z_Hba])
  assume z_Hhd:"(~?z_hbc)"
  show FALSE
  proof (rule zenon_notand [OF z_Hhd])
   assume z_Hhe:"(~?z_hbd)"
   show FALSE
   proof (rule zenon_notand [OF z_Hhe])
    assume z_Hhf:"(~?z_hbe)"
    show FALSE
    by (rule notE [OF z_Hhf z_Hbe])
   next
    assume z_Hhg:"(~?z_hbj)"
    show FALSE
    proof (rule zenon_notand [OF z_Hhg])
     assume z_Hhh:"(~?z_hbk)"
     show FALSE
     by (rule notE [OF z_Hhh z_Hbk])
    next
     assume z_Hhi:"(~?z_hbq)"
     show FALSE
     proof (rule zenon_notand [OF z_Hhi])
      assume z_Hhj:"(~?z_hbr)"
      show FALSE
      by (rule notE [OF z_Hhj z_Hbr])
     next
      assume z_Hhk:"(~?z_hbv)"
      show FALSE
      proof (rule zenon_notand [OF z_Hhk])
       assume z_Hhl:"(~?z_hbw)"
       show FALSE
       by (rule notE [OF z_Hhl z_Hbw])
      next
       assume z_Hhm:"(~?z_hby)"
       show FALSE
       by (rule notE [OF z_Hhm z_Hby])
      qed
     qed
    qed
   qed
  next
   assume z_Hhn:"(~?z_hca)"
   show FALSE
   proof (rule zenon_notand [OF z_Hhn])
    assume z_Hho:"(~Safety)"
    show FALSE
    by (rule notE [OF z_Hho z_Hcb])
   next
    assume z_Hhp:"(~?z_hcc)"
    show FALSE
    proof (rule zenon_notand [OF z_Hhp])
     assume z_Hhq:"(~a_Inv2973unde_1unde_1unde_defa)"
     show FALSE
     by (rule notE [OF z_Hhq z_Hcd])
    next
     assume z_Hhr:"(~?z_hce)"
     show FALSE
     proof (rule zenon_notand [OF z_Hhr])
      assume z_Hhs:"(~a_Inv1758unde_1unde_0unde_defa)"
      show FALSE
      by (rule notE [OF z_Hhs z_Hcf])
     next
      assume z_Hht:"(~?z_hcg)"
      show FALSE
      proof (rule zenon_notand [OF z_Hht])
       assume z_Hhu:"(~a_Inv3915unde_1unde_1unde_defa)"
       show FALSE
       by (rule notE [OF z_Hhu z_Hch])
      next
       assume z_Hhv:"(~?z_hci)"
       show FALSE
       proof (rule zenon_notand [OF z_Hhv])
        assume z_Hhw:"(~a_Inv3246unde_1unde_2unde_defa)"
        show FALSE
        by (rule notE [OF z_Hhw z_Hcj])
       next
        assume z_Hhx:"(~a_Inv866unde_1unde_0unde_defa)"
        show FALSE
        by (rule notE [OF z_Hhx z_Hck])
       qed
      qed
     qed
    qed
   qed
  qed
 next
  assume z_Hcz:"?z_hcz"
  have z_Hhy_z_Hcz: "(\\A x:((x \\in Server)=>bAll(SUBSET(Server), (\<lambda>newConfig_1. bAll(Nat, (\<lambda>nv_1. ((((state[x])=Primary)&(ConfigQuorumCheck(x)&(TermQuorumCheck(x)&((?z_hdq=Cardinality(((newConfig_1 \\ (config[x])) \\cup ((config[x]) \\ newConfig_1))))&((x \\in newConfig_1)&((newConfig_1~=(config[x]))&((a_configTermhash_primea=except(configTerm, x, (currentTerm[x])))&(((configVersion[x]) < nv_1)&((a_configVersionhash_primea=except(configVersion, x, nv_1))&((a_confighash_primea=except(config, x, newConfig_1))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))))))) == ?z_hcz" (is "?z_hhy == _")
  by (unfold bAll_def)
  have z_Hhy: "?z_hhy" (is "\\A x : ?z_hjj(x)")
  by (unfold z_Hhy_z_Hcz, fact z_Hcz)
  have z_Hjk: "(nv \\in Nat)" (is "?z_hjk")
  by (rule subst [where P="(\<lambda>zenon_Vas. (nv \\in zenon_Vas))", OF z_Hb z_Hk])
  have z_Hjo: "?z_hjj(p)" (is "_=>?z_hjp")
  by (rule zenon_all_0 [of "?z_hjj" "p", OF z_Hhy])
  show FALSE
  proof (rule zenon_imply [OF z_Hjo])
   assume z_Hjq:"(~?z_hi)"
   show FALSE
   by (rule notE [OF z_Hjq z_Hi])
  next
   assume z_Hjp:"?z_hjp"
   have z_Hjr_z_Hjp: "(\\A x:((x \\in SUBSET(Server))=>bAll(Nat, (\<lambda>nv_1. (((?z_hfk=Primary)&(?z_hcm&(?z_hcp&((?z_hdq=Cardinality(((x \\ ?z_hcv) \\cup (?z_hcv \\ x))))&((p \\in x)&((x~=?z_hcv)&((a_configTermhash_primea=?z_hfi)&(((configVersion[p]) < nv_1)&((a_configVersionhash_primea=except(configVersion, p, nv_1))&((a_confighash_primea=except(config, p, x))&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))))) == ?z_hjp" (is "?z_hjr == _")
   by (unfold bAll_def)
   have z_Hjr: "?z_hjr" (is "\\A x : ?z_hkt(x)")
   by (unfold z_Hjr_z_Hjp, fact z_Hjp)
   have z_Hku: "?z_hkt(newConfig)" (is "_=>?z_hkv")
   by (rule zenon_all_0 [of "?z_hkt" "newConfig", OF z_Hjr])
   show FALSE
   proof (rule zenon_imply [OF z_Hku])
    assume z_Hkw:"(~?z_hj)"
    show FALSE
    by (rule notE [OF z_Hkw z_Hj])
   next
    assume z_Hkv:"?z_hkv"
    have z_Hkx_z_Hkv: "(\\A x:((x \\in Nat)=>(((?z_hfk=Primary)&(?z_hcm&(?z_hcp&((?z_hdq=?z_hfl)&(?z_hcr&(?z_hcu&((a_configTermhash_primea=?z_hfi)&(((configVersion[p]) < x)&((a_configVersionhash_primea=except(configVersion, p, x))&((a_confighash_primea=?z_hfg)&((a_currentTermhash_primea=currentTerm)&(a_statehash_primea=state))))))))))))=>bAll(Server, (\<lambda>t_1. (((a_configTermhash_primea[t_1])=(configTerm[t_1]))&((a_currentTermhash_primea[t_1])=(currentTerm[t_1])))))))) == ?z_hkv" (is "?z_hkx == _")
    by (unfold bAll_def)
    have z_Hkx: "?z_hkx" (is "\\A x : ?z_hlo(x)")
    by (unfold z_Hkx_z_Hkv, fact z_Hkv)
    have z_Hlp: "?z_hlo(nv)" (is "_=>?z_hlq")
    by (rule zenon_all_0 [of "?z_hlo" "nv", OF z_Hkx])
    show FALSE
    proof (rule zenon_imply [OF z_Hlp])
     assume z_Hlr:"(~?z_hjk)"
     show FALSE
     by (rule notE [OF z_Hlr z_Hjk])
    next
     assume z_Hlq:"?z_hlq" (is "?z_hls=>?z_hev")
     show FALSE
     proof (rule zenon_imply [OF z_Hlq])
      assume z_Hlt:"(~?z_hls)" (is "~(?z_hr&?z_hlu)")
      show FALSE
      proof (rule zenon_notand [OF z_Hlt])
       assume z_Hlv:"(?z_hfk~=Primary)"
       show FALSE
       by (rule notE [OF z_Hlv z_Hr])
      next
       assume z_Hlw:"(~?z_hlu)" (is "~(_&?z_hlx)")
       show FALSE
       proof (rule zenon_notand [OF z_Hlw])
        assume z_Hly:"(~?z_hcm)"
        show FALSE
        by (rule notE [OF z_Hly z_Hcm])
       next
        assume z_Hlz:"(~?z_hlx)" (is "~(_&?z_hma)")
        show FALSE
        proof (rule zenon_notand [OF z_Hlz])
         assume z_Hmb:"(~?z_hcp)"
         show FALSE
         by (rule notE [OF z_Hmb z_Hcp])
        next
         assume z_Hmc:"(~?z_hma)" (is "~(?z_hs&?z_hmd)")
         show FALSE
         proof (rule zenon_notand [OF z_Hmc])
          assume z_Hme:"(?z_hdq~=?z_hfl)"
          show FALSE
          by (rule notE [OF z_Hme z_Hs])
         next
          assume z_Hmf:"(~?z_hmd)" (is "~(_&?z_hmg)")
          show FALSE
          proof (rule zenon_notand [OF z_Hmf])
           assume z_Hmh:"(~?z_hcr)"
           show FALSE
           by (rule notE [OF z_Hmh z_Hcr])
          next
           assume z_Hmi:"(~?z_hmg)" (is "~(_&?z_hmj)")
           show FALSE
           proof (rule zenon_notand [OF z_Hmi])
            assume z_Hmk:"(~?z_hcu)" (is "~~?z_hml")
            show FALSE
            by (rule notE [OF z_Hmk z_Hcu])
           next
            assume z_Hmm:"(~?z_hmj)" (is "~(?z_ht&?z_hmn)")
            show FALSE
            proof (rule zenon_notand [OF z_Hmm])
             assume z_Hmo:"(a_configTermhash_primea~=?z_hfi)"
             show FALSE
             by (rule notE [OF z_Hmo z_Ht])
            next
             assume z_Hmp:"(~?z_hmn)" (is "~(_&?z_hmq)")
             show FALSE
             proof (rule zenon_notand [OF z_Hmp])
              assume z_Hmr:"(~?z_hcw)"
              show FALSE
              by (rule notE [OF z_Hmr z_Hcw])
             next
              assume z_Hms:"(~?z_hmq)" (is "~(?z_hu&?z_hln)")
              show FALSE
              proof (rule zenon_notand [OF z_Hms])
               assume z_Hmt:"(a_configVersionhash_primea~=?z_hfh)"
               show FALSE
               by (rule notE [OF z_Hmt z_Hu])
              next
               assume z_Hmu:"(~?z_hln)" (is "~(?z_hv&?z_hes)")
               show FALSE
               proof (rule zenon_notand [OF z_Hmu])
               assume z_Hmv:"(a_confighash_primea~=?z_hfg)"
               show FALSE
               by (rule notE [OF z_Hmv z_Hv])
               next
               assume z_Hmw:"(~?z_hes)" (is "~(?z_hw&?z_hx)")
               show FALSE
               proof (rule zenon_notand [OF z_Hmw])
               assume z_Hmx:"(a_currentTermhash_primea~=currentTerm)"
               show FALSE
               by (rule notE [OF z_Hmx z_Hw])
               next
               assume z_Hmy:"(a_statehash_primea~=state)"
               show FALSE
               by (rule notE [OF z_Hmy z_Hx])
               qed
               qed
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hev:"?z_hev"
      show FALSE
      by (rule zenon_L2_ [OF z_Hw z_Hev z_Hl z_Hz z_Hbb])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 881"; *} qed
lemma ob'894:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition BecomeLeader suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
assumes v'147: "(((Term) = (Nat)))"
assumes v'148: "(((Version) = (Nat)))"
assumes v'151: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'187: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (\<forall> Q \<in> ((Quorums ((fapply ((config), (j)))))) : (\<exists> n \<in> (Q) : ((((geq ((fapply ((currentTerm), (n))), (fapply ((configTerm), (i)))))) \<or> (\<forall> Q_1 \<in> ((Quorums ((fapply ((config), (j)))))) : (\<exists> n_1 \<in> (Q_1) : ((NewerConfig (((CV ((n_1)))), ((CV ((j))))))))))))))) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'190: "(((Server) \<noteq> ({})))"
assumes v'191: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'192: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | ((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'193: "(((Primary) \<noteq> (Secondary)))"
fixes u
assumes u_in : "(u \<in> (Server))"
fixes v
assumes v_in : "(v \<in> (Server))"
fixes nv
assumes nv_in : "(nv \<in> (Version))"
fixes nt
assumes nt_in : "(nt \<in> (Term))"
assumes v'214: "(((TRUE) \<Longrightarrow> (\<forall> s \<in> (Server) : (\<forall> t \<in> (subsetOf((Server), %s_1. ((~ (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (s_1)))))) : (\<exists> n \<in> (Q) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((s_1)) :: c))))))))))) : (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (t)))))) : (\<exists> n \<in> (Q) : ((geq ((fapply (((a_currentTermhash_primea :: c)), (n))), (fapply (((a_configTermhash_primea :: c)), (s))))))))))))"
assumes v'215: "((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))"
shows "(\<forall> i \<in> (Server) : (\<forall> j \<in> (Server) : (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (j)))))) : (\<exists> n \<in> (Q) : ((((geq ((fapply (((a_currentTermhash_primea :: c)), (n))), (fapply (((a_configTermhash_primea :: c)), (i)))))) \<or> (\<forall> Q_1 \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (j)))))) : (\<exists> n_1 \<in> (Q_1) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n_1)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((j)) :: c)))))))))))))"(is "PROP ?ob'894")
proof -
ML_command {* writeln "*** TLAPS ENTER 894"; *}
show "PROP ?ob'894"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_7402dc.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_7402dc.znn.out
;; obligation #894
$hyp "v'147" (= Term arith.N)
$hyp "v'148" (= Version
arith.N)
$hyp "v'151" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'187" (/\ (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
(TLA.bAll Server ((i) (TLA.bAll Server ((j) (TLA.bAll (Quorums (TLA.fapply config j)) ((Q) (TLA.bEx Q ((n) (\/ (arith.le (TLA.fapply configTerm i)
(TLA.fapply currentTerm n))
(TLA.bAll (Quorums (TLA.fapply config j)) ((Q_1) (TLA.bEx Q_1 ((n_1) (NewerConfig (CV n_1)
(CV j))))))))))))))) a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'190" (-. (= Server
TLA.emptyset))
$hyp "v'191" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'192" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N)) (TLA.in state
(TLA.FuncSet Server (TLA.set Secondary Primary))) (TLA.in config
(TLA.FuncSet Server (TLA.SUBSET Server))) (TLA.in configVersion
(TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'193" (-. (= Primary
Secondary))
$hyp "u_in" (TLA.in u Server)
$hyp "v_in" (TLA.in v Server)
$hyp "nv_in" (TLA.in nv Version)
$hyp "nt_in" (TLA.in nt Term)
$hyp "v'214" (=> T. (TLA.bAll Server ((s) (TLA.bAll (TLA.subsetOf Server ((s_1) (-. (TLA.bAll (Quorums (TLA.fapply a_confighash_primea s_1)) ((Q) (TLA.bEx Q ((n) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n)
(a_h17a541d025099e3943511403ec04a3a s_1))))))))) ((t) (TLA.bAll (Quorums (TLA.fapply a_confighash_primea t)) ((Q) (TLA.bEx Q ((n) (arith.le (TLA.fapply a_configTermhash_primea s)
(TLA.fapply a_currentTermhash_primea n)))))))))))
$hyp "v'215" (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))
$goal (TLA.bAll Server ((i) (TLA.bAll Server ((j) (TLA.bAll (Quorums (TLA.fapply a_confighash_primea j)) ((Q) (TLA.bEx Q ((n) (\/ (arith.le (TLA.fapply a_configTermhash_primea i)
(TLA.fapply a_currentTermhash_primea n))
(TLA.bAll (Quorums (TLA.fapply a_confighash_primea j)) ((Q_1) (TLA.bEx Q_1 ((n_1) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n_1)
(a_h17a541d025099e3943511403ec04a3a j)))))))))))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hm:"(TRUE=>bAll(Server, (\<lambda>s. bAll(subsetOf(Server, (\<lambda>s_1. (~bAll(Quorums((a_confighash_primea[s_1])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s_1))))))))), (\<lambda>t. bAll(Quorums((a_confighash_primea[t])), (\<lambda>Q. bEx(Q, (\<lambda>n. ((a_configTermhash_primea[s]) <= (a_currentTermhash_primea[n])))))))))))" (is "?z_hp=>?z_hq")
 using v'214 by blast
 have zenon_L1_: "(~((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))) \\in subsetOf(Server, (\<lambda>s_1. (~bAll(Quorums((a_confighash_primea[s_1])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s_1))))))))))) ==> (~(\\E x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&(((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))) ==> ((CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))) \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))]))) ==> ((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))) \\in Server) ==> FALSE" (is "?z_hby ==> ?z_hds ==> ?z_heo ==> ?z_hep ==> FALSE")
 proof -
  assume z_Hby:"?z_hby" (is "~?z_hbz")
  assume z_Hds:"?z_hds" (is "~(\\E x : ?z_heq(x))")
  assume z_Heo:"?z_heo"
  assume z_Hep:"?z_hep"
  show FALSE
  proof (rule zenon_notin_subsetof [of "(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))" "Server" "(\<lambda>s_1. (~bAll(Quorums((a_confighash_primea[s_1])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s_1))))))))", OF z_Hby])
   assume z_Her:"(~?z_hep)"
   show FALSE
   by (rule notE [OF z_Her z_Hep])
  next
   assume z_Hes:"(~(~bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))))))))))" (is "~~?z_hef")
   have z_Hef: "?z_hef"
   by (rule zenon_notnot_0 [OF z_Hes])
   have z_Heu_z_Hef: "(\\A x:((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))) == ?z_hef" (is "?z_heu == _")
   by (unfold bAll_def)
   have z_Heu: "?z_heu" (is "\\A x : ?z_hex(x)")
   by (unfold z_Heu_z_Hef, fact z_Hef)
   have z_Hey: "?z_hex((CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|?z_hef)))))))" (is "_=>?z_hez")
   by (rule zenon_all_0 [of "?z_hex" "(CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|?z_hef))))))", OF z_Heu])
   show FALSE
   proof (rule zenon_imply [OF z_Hey])
    assume z_Hfa:"(~?z_heo)"
    show FALSE
    by (rule notE [OF z_Hfa z_Heo])
   next
    assume z_Hez:"?z_hez"
    have z_Hfb_z_Hez: "(\\E x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|?z_hef)))))))&NewerConfig(a_h17a541d025099e3943511403ec04a3a(x), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))) == ?z_hez" (is "?z_hfb == _")
    by (unfold bEx_def)
    have z_Hfb: "?z_hfb" (is "\\E x : ?z_hfe(x)")
    by (unfold z_Hfb_z_Hez, fact z_Hez)
    have z_Hff: "?z_hfe((CHOOSE x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|?z_hef)))))))&NewerConfig(a_h17a541d025099e3943511403ec04a3a(x), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))" (is "?z_hfh&?z_hfi")
    by (rule zenon_ex_choose_0 [of "?z_hfe", OF z_Hfb])
    have z_Hfh: "?z_hfh"
    by (rule zenon_and_0 [OF z_Hff])
    have z_Hfj: "~?z_heq((CHOOSE x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|?z_hef)))))))&NewerConfig(a_h17a541d025099e3943511403ec04a3a(x), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))" (is "~(_&?z_hfk)")
    by (rule zenon_notex_0 [of "?z_heq" "(CHOOSE x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|?z_hef)))))))&NewerConfig(a_h17a541d025099e3943511403ec04a3a(x), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))))))", OF z_Hds])
    show FALSE
    proof (rule zenon_notand [OF z_Hfj])
     assume z_Hfl:"(~?z_hfh)"
     show FALSE
     by (rule notE [OF z_Hfl z_Hfh])
    next
     assume z_Hfm:"(~?z_hfk)" (is "~(?z_hfn|_)")
     have z_Het: "(~?z_hef)"
     by (rule zenon_notor_1 [OF z_Hfm])
     show FALSE
     by (rule notE [OF z_Het z_Hef])
    qed
   qed
  qed
 qed
 have zenon_L2_: "bEx((CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))), (\<lambda>n. ((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n])))) ==> (~(\\E x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&(((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))) ==> FALSE" (is "?z_hfo ==> ?z_hds ==> FALSE")
 proof -
  assume z_Hfo:"?z_hfo"
  assume z_Hds:"?z_hds" (is "~(\\E x : ?z_heq(x))")
  have z_Hfq_z_Hfo: "(\\E x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x])))) == ?z_hfo" (is "?z_hfq == _")
  by (unfold bEx_def)
  have z_Hfq: "?z_hfq" (is "\\E x : ?z_hfs(x)")
  by (unfold z_Hfq_z_Hfo, fact z_Hfo)
  have z_Hft: "?z_hfs((CHOOSE x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x])))))" (is "?z_hfv&?z_hfw")
  by (rule zenon_ex_choose_0 [of "?z_hfs", OF z_Hfq])
  have z_Hfv: "?z_hfv"
  by (rule zenon_and_0 [OF z_Hft])
  have z_Hfw: "?z_hfw"
  by (rule zenon_and_1 [OF z_Hft])
  have z_Hfx: "~?z_heq((CHOOSE x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x])))))" (is "~(_&?z_hfy)")
  by (rule zenon_notex_0 [of "?z_heq" "(CHOOSE x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x]))))", OF z_Hds])
  show FALSE
  proof (rule zenon_notand [OF z_Hfx])
   assume z_Hfz:"(~?z_hfv)"
   show FALSE
   by (rule notE [OF z_Hfz z_Hfv])
  next
   assume z_Hga:"(~?z_hfy)" (is "~(_|?z_hef)")
   have z_Hgb: "(~?z_hfw)"
   by (rule zenon_notor_0 [OF z_Hga])
   show FALSE
   by (rule notE [OF z_Hgb z_Hfw])
  qed
 qed
 have zenon_L3_: "bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q. bEx(Q, (\<lambda>n. ((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n])))))) ==> (~(\\E x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&(((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))) ==> ((CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))) \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))]))) ==> FALSE" (is "?z_hgc ==> ?z_hds ==> ?z_heo ==> FALSE")
 proof -
  assume z_Hgc:"?z_hgc"
  assume z_Hds:"?z_hds" (is "~(\\E x : ?z_heq(x))")
  assume z_Heo:"?z_heo"
  have z_Hgf_z_Hgc: "(\\A x:((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. ((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n])))))) == ?z_hgc" (is "?z_hgf == _")
  by (unfold bAll_def)
  have z_Hgf: "?z_hgf" (is "\\A x : ?z_hgi(x)")
  by (unfold z_Hgf_z_Hgc, fact z_Hgc)
  have z_Hgj: "?z_hgi((CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))" (is "_=>?z_hfo")
  by (rule zenon_all_0 [of "?z_hgi" "(CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))))))))))))))", OF z_Hgf])
  show FALSE
  proof (rule zenon_imply [OF z_Hgj])
   assume z_Hfa:"(~?z_heo)"
   show FALSE
   by (rule notE [OF z_Hfa z_Heo])
  next
   assume z_Hfo:"?z_hfo"
   show FALSE
   by (rule zenon_L2_ [OF z_Hfo z_Hds])
  qed
 qed
 assume z_Ho:"(~bAll(Server, (\<lambda>i. bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[i]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))" (is "~?z_hgk")
 have z_Hgw_z_Ho: "(~(\\A x:((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j)))))))))))))))) == (~?z_hgk)" (is "?z_hgw == ?z_ho")
 by (unfold bAll_def)
 have z_Hgw: "?z_hgw" (is "~(\\A x : ?z_hgy(x))")
 by (unfold z_Hgw_z_Ho, fact z_Ho)
 have z_Hgz: "(\\E x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))" (is "\\E x : ?z_hha(x)")
 by (rule zenon_notallex_0 [of "?z_hgy", OF z_Hgw])
 have z_Hhb: "?z_hha((CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j)))))))))))))))))" (is "~(?z_hhc=>?z_hhd)")
 by (rule zenon_ex_choose_0 [of "?z_hha", OF z_Hgz])
 have z_Hhc: "?z_hhc"
 by (rule zenon_notimply_0 [OF z_Hhb])
 have z_Hhe: "(~?z_hhd)"
 by (rule zenon_notimply_1 [OF z_Hhb])
 have z_Hhf_z_Hhe: "(~(\\A x:((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))) == (~?z_hhd)" (is "?z_hhf == ?z_hhe")
 by (unfold bAll_def)
 have z_Hhf: "?z_hhf" (is "~(\\A x : ?z_hhh(x))")
 by (unfold z_Hhf_z_Hhe, fact z_Hhe)
 have z_Hhi: "(\\E x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))" (is "\\E x : ?z_hhj(x)")
 by (rule zenon_notallex_0 [of "?z_hhh", OF z_Hhf])
 have z_Hhk: "?z_hhj((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))" (is "~(?z_hep=>?z_hhl)")
 by (rule zenon_ex_choose_0 [of "?z_hhj", OF z_Hhi])
 have z_Hep: "?z_hep"
 by (rule zenon_notimply_0 [OF z_Hhk])
 have z_Hhm: "(~?z_hhl)"
 by (rule zenon_notimply_1 [OF z_Hhk])
 have z_Hhn_z_Hhm: "(~(\\A x:((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))) == (~?z_hhl)" (is "?z_hhn == ?z_hhm")
 by (unfold bAll_def)
 have z_Hhn: "?z_hhn" (is "~(\\A x : ?z_hhp(x))")
 by (unfold z_Hhn_z_Hhm, fact z_Hhm)
 have z_Hhq: "(\\E x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))))))))))))))" (is "\\E x : ?z_hhr(x)")
 by (rule zenon_notallex_0 [of "?z_hhp", OF z_Hhn])
 have z_Hhs: "?z_hhr((CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))" (is "~(?z_heo=>?z_hht)")
 by (rule zenon_ex_choose_0 [of "?z_hhr", OF z_Hhq])
 have z_Heo: "?z_heo"
 by (rule zenon_notimply_0 [OF z_Hhs])
 have z_Hhu: "(~?z_hht)"
 by (rule zenon_notimply_1 [OF z_Hhs])
 have z_Hds_z_Hhu: "(~(\\E x:((x \\in (CHOOSE x:(~((x \\in Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])))=>bEx(x, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))))))&(((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[x]))|bAll(Quorums((a_confighash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))))))))))) == (~?z_hht)" (is "?z_hds == ?z_hhu")
 by (unfold bEx_def)
 have z_Hds: "?z_hds" (is "~(\\E x : ?z_heq(x))")
 by (unfold z_Hds_z_Hhu, fact z_Hhu)
 show FALSE
 proof (rule zenon_imply [OF z_Hm])
  assume z_Hhv:"(~?z_hp)"
  show FALSE
  by (rule zenon_nottrue [OF z_Hhv])
 next
  assume z_Hq:"?z_hq"
  have z_Hhw_z_Hq: "(\\A x:((x \\in Server)=>bAll(subsetOf(Server, (\<lambda>s_1. (~bAll(Quorums((a_confighash_primea[s_1])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s_1))))))))), (\<lambda>t. bAll(Quorums((a_confighash_primea[t])), (\<lambda>Q. bEx(Q, (\<lambda>n. ((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n])))))))))) == ?z_hq" (is "?z_hhw == _")
  by (unfold bAll_def)
  have z_Hhw: "?z_hhw" (is "\\A x : ?z_hie(x)")
  by (unfold z_Hhw_z_Hq, fact z_Hq)
  have z_Hif: "?z_hie((CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j)))))))))))))))))" (is "_=>?z_hig")
  by (rule zenon_all_0 [of "?z_hie" "(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))", OF z_Hhw])
  show FALSE
  proof (rule zenon_imply [OF z_Hif])
   assume z_Hih:"(~?z_hhc)"
   show FALSE
   by (rule notE [OF z_Hih z_Hhc])
  next
   assume z_Hig:"?z_hig"
   have z_Hii_z_Hig: "(\\A x:((x \\in subsetOf(Server, (\<lambda>s_1. (~bAll(Quorums((a_confighash_primea[s_1])), (\<lambda>Q. bEx(Q, (\<lambda>n. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n), a_h17a541d025099e3943511403ec04a3a(s_1))))))))))=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. ((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n])))))))) == ?z_hig" (is "?z_hii == _")
   by (unfold bAll_def)
   have z_Hii: "?z_hii" (is "\\A x : ?z_him(x)")
   by (unfold z_Hii_z_Hig, fact z_Hig)
   have z_Hin: "?z_him((CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x)))))))))))))))" (is "?z_hbz=>?z_hgc")
   by (rule zenon_all_0 [of "?z_him" "(CHOOSE x:(~((x \\in Server)=>bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[(CHOOSE x:(~((x \\in Server)=>bAll(Server, (\<lambda>j. bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q. bEx(Q, (\<lambda>n. (((a_configTermhash_primea[x]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[j])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(j))))))))))))))))]) <= (a_currentTermhash_primea[n]))|bAll(Quorums((a_confighash_primea[x])), (\<lambda>Q_1. bEx(Q_1, (\<lambda>n_1. NewerConfig(a_h17a541d025099e3943511403ec04a3a(n_1), a_h17a541d025099e3943511403ec04a3a(x))))))))))))))", OF z_Hii])
   show FALSE
   proof (rule zenon_imply [OF z_Hin])
    assume z_Hby:"(~?z_hbz)"
    show FALSE
    by (rule zenon_L1_ [OF z_Hby z_Hds z_Heo z_Hep])
   next
    assume z_Hgc:"?z_hgc"
    show FALSE
    by (rule zenon_L3_ [OF z_Hgc z_Hds z_Heo])
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 894"; *} qed
lemma ob'969:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'150: "(((Term) = (Nat)))"
assumes v'151: "(((Version) = (Nat)))"
assumes v'154: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'190: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'193: "(((Server) \<noteq> ({})))"
assumes v'194: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'195: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'196: "(((Primary) \<noteq> (Secondary)))"
assumes v'212: "(\<exists> s \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm \<in> (Term) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (s))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s)))))))) & (((s) \<in> (fapply ((config), (s))))) & (((s) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (s))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
shows "(\<exists> p \<in> (Server) : (\<exists> newTerm \<in> (Term) : (\<exists> Q \<in> ((Quorums ((fapply ((config), (p)))))) : ((((newTerm) = ((arith_add ((fapply ((currentTerm), (p))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (p)))))))) & (((p) \<in> (fapply ((config), (p))))) & (((p) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (p), (newTerm))))) & ((((a_currentTermhash_primea :: c)) = ([ s \<in> (Server)  \<mapsto> (cond((((s) \<in> (Q))), (newTerm), (fapply ((currentTerm), (s)))))]))) & ((((a_statehash_primea :: c)) = ([ s \<in> (Server)  \<mapsto> (cond((((s) = (p))), (Primary), (cond((((s) \<in> (Q))), (Secondary), (fapply ((state), (s)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p)] = (newTerm)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"(is "PROP ?ob'969")
proof -
ML_command {* writeln "*** TLAPS ENTER 969"; *}
show "PROP ?ob'969"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_e46d07.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_e46d07.znn.out
;; obligation #969
$hyp "v'150" (= Term arith.N)
$hyp "v'151" (= Version
arith.N)
$hyp "v'154" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'190" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'193" (-. (= Server
TLA.emptyset))
$hyp "v'194" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'195" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'196" (-. (= Primary
Secondary))
$hyp "v'212" (TLA.bEx Server ((s) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm s) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s))) (TLA.in s (TLA.fapply config s)) (TLA.in s
Q) (TLA.bAll Q ((v) (CanVoteForConfig v s newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) newTerm (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 s) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm s newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$goal (TLA.bEx Server ((p) (TLA.bEx Term ((newTerm) (TLA.bEx (Quorums (TLA.fapply config p)) ((Q) (/\ (= newTerm
(arith.add (TLA.fapply currentTerm p) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config p))) (TLA.in p (TLA.fapply config p)) (TLA.in p
Q) (TLA.bAll Q ((v) (CanVoteForConfig v p newTerm)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s) (TLA.cond (TLA.in s
Q) newTerm (TLA.fapply currentTerm s))))) (= a_statehash_primea
(TLA.Fcn Server ((s) (TLA.cond (= s p) Primary (TLA.cond (TLA.in s
Q) Secondary (TLA.fapply state s)))))) (= a_configTermhash_primea
(TLA.except configTerm p newTerm)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Ha:"(Term=Nat)"
 using v'150 by blast
 have z_Hi:"bEx(Server, (\<lambda>s. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[s]) + 1))&((Q \\in Quorums((config[s])))&((s \\in (config[s]))&((s \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=s), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, s, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hi")
 using v'212 by blast
 assume z_Hj:"(~bEx(Server, (\<lambda>p. bEx(Term, (\<lambda>newTerm. bEx(Quorums((config[p])), (\<lambda>Q. ((newTerm=((currentTerm[p]) + 1))&((Q \\in Quorums((config[p])))&((p \\in (config[p]))&((p \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, p, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=p), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, p, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "~?z_hcw")
 have z_Hef_z_Hi: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_hi" (is "?z_hef == _")
 by (unfold bEx_def)
 have z_Hef: "?z_hef" (is "\\E x : ?z_hfn(x)")
 by (unfold z_Hef_z_Hi, fact z_Hi)
 have z_Hfo: "?z_hfn((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hfq&?z_hfr")
 by (rule zenon_ex_choose_0 [of "?z_hfn", OF z_Hef])
 have z_Hfq: "?z_hfq"
 by (rule zenon_and_0 [OF z_Hfo])
 have z_Hfr: "?z_hfr"
 by (rule zenon_and_1 [OF z_Hfo])
 have z_Hfs_z_Hfr: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hfr" (is "?z_hfs == _")
 by (unfold bEx_def)
 have z_Hfs: "?z_hfs" (is "\\E x : ?z_hhe(x)")
 by (unfold z_Hfs_z_Hfr, fact z_Hfr)
 have z_Hhf: "?z_hhe((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hhh&?z_hhi")
 by (rule zenon_ex_choose_0 [of "?z_hhe", OF z_Hfs])
 have z_Hhi: "?z_hhi"
 by (rule zenon_and_1 [OF z_Hhf])
 have z_Hhj_z_Hhi: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hhi" (is "?z_hhj == _")
 by (unfold bEx_def)
 have z_Hhj: "?z_hhj" (is "\\E x : ?z_hin(x)")
 by (unfold z_Hhj_z_Hhi, fact z_Hhi)
 have z_Hio: "?z_hin((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hiq&?z_hir")
 by (rule zenon_ex_choose_0 [of "?z_hin", OF z_Hhj])
 have z_Hiq: "?z_hiq"
 by (rule zenon_and_0 [OF z_Hio])
 have z_Hir: "?z_hir" (is "?z_his&?z_hit")
 by (rule zenon_and_1 [OF z_Hio])
 have z_His: "?z_his" (is "?z_hip=?z_hfz")
 by (rule zenon_and_0 [OF z_Hir])
 have z_Hit: "?z_hit" (is "?z_hhp&?z_hiu")
 by (rule zenon_and_1 [OF z_Hir])
 have z_Hhp: "?z_hhp"
 by (rule zenon_and_0 [OF z_Hit])
 have z_Hiu: "?z_hiu" (is "?z_hgg&?z_hiv")
 by (rule zenon_and_1 [OF z_Hit])
 have z_Hgg: "?z_hgg"
 by (rule zenon_and_0 [OF z_Hiu])
 have z_Hiv: "?z_hiv" (is "?z_hhs&?z_hiw")
 by (rule zenon_and_1 [OF z_Hiu])
 have z_Hhs: "?z_hhs"
 by (rule zenon_and_0 [OF z_Hiv])
 have z_Hiw: "?z_hiw" (is "?z_hix&?z_hiy")
 by (rule zenon_and_1 [OF z_Hiv])
 have z_Hix: "?z_hix"
 by (rule zenon_and_0 [OF z_Hiw])
 have z_Hiy: "?z_hiy" (is "?z_hiz&?z_hja")
 by (rule zenon_and_1 [OF z_Hiw])
 have z_Hiz: "?z_hiz" (is "_=?z_hjb")
 by (rule zenon_and_0 [OF z_Hiy])
 have z_Hja: "?z_hja" (is "?z_hie&?z_hjc")
 by (rule zenon_and_1 [OF z_Hiy])
 have z_Hie: "?z_hie" (is "_=?z_hif")
 by (rule zenon_and_0 [OF z_Hja])
 have z_Hjc: "?z_hjc" (is "?z_hjd&?z_hcq")
 by (rule zenon_and_1 [OF z_Hja])
 have z_Hjd: "?z_hjd" (is "_=?z_hje")
 by (rule zenon_and_0 [OF z_Hjc])
 have z_Hcq: "?z_hcq" (is "?z_hcr&?z_hct")
 by (rule zenon_and_1 [OF z_Hjc])
 have z_Hcr: "?z_hcr"
 by (rule zenon_and_0 [OF z_Hcq])
 have z_Hct: "?z_hct"
 by (rule zenon_and_1 [OF z_Hcq])
 have z_Hjf_z_Hj: "(~(\\E x:((x \\in Server)&bEx(Term, (\<lambda>newTerm. bEx(Quorums((config[x])), (\<lambda>Q. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))) == (~?z_hcw)" (is "?z_hjf == ?z_hj")
 by (unfold bEx_def)
 have z_Hjf: "?z_hjf" (is "~(\\E x : ?z_hjm(x))")
 by (unfold z_Hjf_z_Hj, fact z_Hj)
 have z_Hjn: "(?z_hip \\in Nat)" (is "?z_hjn")
 by (rule subst [where P="(\<lambda>zenon_Vdb. (?z_hip \\in zenon_Vdb))", OF z_Ha z_Hiq])
 have z_Hjr: "~?z_hjm((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))))" (is "~(_&?z_hjs)")
 by (rule zenon_notex_0 [of "?z_hjm" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))", OF z_Hjf])
 show FALSE
 proof (rule zenon_notand [OF z_Hjr])
  assume z_Hjt:"(~?z_hfq)"
  show FALSE
  by (rule notE [OF z_Hjt z_Hfq])
 next
  assume z_Hju:"(~?z_hjs)"
  have z_Hjv: "(~bEx(Nat, (\<lambda>newTerm. bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])), (\<lambda>Q. ((newTerm=?z_hfz)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_hgg&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm))&?z_hcq)))))))))))))" (is "~?z_hjw")
  by (rule subst [where P="(\<lambda>zenon_Vsf. (~bEx(zenon_Vsf, (\<lambda>newTerm. bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])), (\<lambda>Q. ((newTerm=?z_hfz)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_hgg&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm))&?z_hcq))))))))))))))", OF z_Ha z_Hju])
  have z_Hks_z_Hjv: "(~(\\E x:((x \\in Nat)&bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])), (\<lambda>Q. ((x=?z_hfz)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_hgg&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), x))&?z_hcq))))))))))))) == (~?z_hjw)" (is "?z_hks == ?z_hjv")
  by (unfold bEx_def)
  have z_Hks: "?z_hks" (is "~(\\E x : ?z_hlk(x))")
  by (unfold z_Hks_z_Hjv, fact z_Hjv)
  have z_Hll: "~?z_hlk(?z_hip)" (is "~(_&?z_hlm)")
  by (rule zenon_notex_0 [of "?z_hlk" "?z_hip", OF z_Hks])
  show FALSE
  proof (rule zenon_notand [OF z_Hll])
   assume z_Hln:"(~?z_hjn)"
   show FALSE
   by (rule notE [OF z_Hln z_Hjn])
  next
   assume z_Hlo:"(~?z_hlm)"
   have z_Hlp_z_Hlo: "(~(\\E x:((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_his&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_hgg&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), ?z_hip)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), ?z_hip, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&?z_hjc)))))))))) == (~?z_hlm)" (is "?z_hlp == ?z_hlo")
   by (unfold bEx_def)
   have z_Hlp: "?z_hlp" (is "~(\\E x : ?z_hmg(x))")
   by (unfold z_Hlp_z_Hlo, fact z_Hlo)
   have z_Hmh: "~?z_hmg((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=?z_hfz)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_hgg&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm))&?z_hcq)))))))))))))"
   by (rule zenon_notex_0 [of "?z_hmg" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm. ((newTerm=?z_hfz)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))])))&(?z_hgg&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq))))))))))))))), Primary, cond((s \\in x), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm. ((newTerm=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), newTerm, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s. cond((s=x), Primary, cond((s \\in Q), Secondary, (state[s]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm))&?z_hcq)))))))))))))), newTerm))&?z_hcq))))))))))))", OF z_Hlp])
   show FALSE
   proof (rule zenon_notand [OF z_Hmh])
    assume z_Hmi:"(~?z_hhp)"
    show FALSE
    by (rule notE [OF z_Hmi z_Hhp])
   next
    assume z_Hmj:"(~?z_hir)"
    show FALSE
    proof (rule zenon_notand [OF z_Hmj])
     assume z_Hmk:"(?z_hip~=?z_hfz)"
     show FALSE
     by (rule notE [OF z_Hmk z_His])
    next
     assume z_Hml:"(~?z_hit)"
     show FALSE
     proof (rule zenon_notand [OF z_Hml])
      assume z_Hmi:"(~?z_hhp)"
      show FALSE
      by (rule notE [OF z_Hmi z_Hhp])
     next
      assume z_Hmm:"(~?z_hiu)"
      show FALSE
      proof (rule zenon_notand [OF z_Hmm])
       assume z_Hmn:"(~?z_hgg)"
       show FALSE
       by (rule notE [OF z_Hmn z_Hgg])
      next
       assume z_Hmo:"(~?z_hiv)"
       show FALSE
       proof (rule zenon_notand [OF z_Hmo])
        assume z_Hmp:"(~?z_hhs)"
        show FALSE
        by (rule notE [OF z_Hmp z_Hhs])
       next
        assume z_Hmq:"(~?z_hiw)"
        show FALSE
        proof (rule zenon_notand [OF z_Hmq])
         assume z_Hmr:"(~?z_hix)"
         show FALSE
         by (rule notE [OF z_Hmr z_Hix])
        next
         assume z_Hms:"(~?z_hiy)"
         show FALSE
         proof (rule zenon_notand [OF z_Hms])
          assume z_Hmt:"(a_currentTermhash_primea~=?z_hjb)"
          show FALSE
          by (rule notE [OF z_Hmt z_Hiz])
         next
          assume z_Hmu:"(~?z_hja)"
          show FALSE
          proof (rule zenon_notand [OF z_Hmu])
           assume z_Hmv:"(a_statehash_primea~=?z_hif)"
           show FALSE
           by (rule notE [OF z_Hmv z_Hie])
          next
           assume z_Hmw:"(~?z_hjc)"
           show FALSE
           proof (rule zenon_notand [OF z_Hmw])
            assume z_Hmx:"(a_configTermhash_primea~=?z_hje)"
            show FALSE
            by (rule notE [OF z_Hmx z_Hjd])
           next
            assume z_Hmy:"(~?z_hcq)"
            show FALSE
            proof (rule zenon_notand [OF z_Hmy])
             assume z_Hmz:"(a_confighash_primea~=config)"
             show FALSE
             by (rule notE [OF z_Hmz z_Hcr])
            next
             assume z_Hna:"(a_configVersionhash_primea~=configVersion)"
             show FALSE
             by (rule notE [OF z_Hna z_Hct])
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 969"; *} qed
lemma ob'978:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition CV suppressed *)
(* usable definition ConfigDisabled suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
(* usable definition ActiveConfigSet suppressed *)
assumes v'149: "(((Term) = (Nat)))"
assumes v'150: "(((Version) = (Nat)))"
assumes v'153: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'189: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'192: "(((Server) \<noteq> ({})))"
assumes v'193: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'194: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | ((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)]))))) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'195: "(((Primary) \<noteq> (Secondary)))"
fixes p
assumes p_in : "(p \<in> (Server))"
fixes newTerm
assumes newTerm_in : "(newTerm \<in> (Term))"
fixes pQ
assumes pQ_in : "(pQ \<in> ((Quorums ((fapply ((config), (p)))))))"
fixes a_nt2a
assumes a_nt2a_in : "(a_nt2a \<in> (Term))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> ((a_he18fb8c89c2e3ba63d770a77f3b7a1a :: c)))"
assumes v'232: "(\<exists> s_1 \<in> (Server) : (\<exists> Q \<in> ((SUBSET (Server))) : (\<exists> newTerm_1 \<in> (Term) : ((((newTerm_1) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (s_1), (newTerm_1))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q))), (newTerm_1), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (newTerm_1)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
assumes v'233: "(((((((currentTerm) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((state) \<in> ([(Server) \<rightarrow> ({(Secondary), (Primary)})]))) & (((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) & (((configVersion) \<in> ([(Server) \<rightarrow> (Nat)]))) & (((configTerm) \<in> ([(Server) \<rightarrow> (Nat)])))) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<Longrightarrow> ((Next) \<Longrightarrow> (\<And> p_1 :: c. p_1 \<in> (Server) \<Longrightarrow> (\<And> nv :: c. nv \<in> (Term) \<Longrightarrow> ((\<exists> Q \<in> ((Quorums ((fapply ((config), (p_1)))))) : ((((nv) = ((arith_add ((fapply ((currentTerm), (p_1))), ((Succ[0]))))))) & (((Q) \<in> ((Quorums ((fapply ((config), (p_1)))))))) & (((p_1) \<in> (fapply ((config), (p_1))))) & (((p_1) \<in> (Q))) & (\<forall> v \<in> (Q) : ((CanVoteForConfig ((v), (p_1), (nv))))) & ((((a_currentTermhash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) \<in> (Q))), (nv), (fapply ((currentTerm), (s_1)))))]))) & ((((a_statehash_primea :: c)) = ([ s_1 \<in> (Server)  \<mapsto> (cond((((s_1) = (p_1))), (Primary), (cond((((s_1) \<in> (Q))), (Secondary), (fapply ((state), (s_1)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(p_1)] = (nv)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion)))))) \<Longrightarrow> (\<forall> s_1 \<in> ((a_he18fb8c89c2e3ba63d770a77f3b7a1a :: c)) : (((s_1) \<in> (ActiveConfigSet))))))))))"
shows "(((t) \<in> (ActiveConfigSet)))"(is "PROP ?ob'978")
proof -
ML_command {* writeln "*** TLAPS ENTER 978"; *}
show "PROP ?ob'978"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_9d2f49.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_9d2f49.znn.out
;; obligation #978
$hyp "v'149" (= Term arith.N)
$hyp "v'150" (= Version
arith.N)
$hyp "v'153" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a
a_c2a))))))
$hyp "v'189" (/\ (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'192" (-. (= Server
TLA.emptyset))
$hyp "v'193" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'194" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N)) (TLA.in state
(TLA.FuncSet Server (TLA.set Secondary Primary))) (TLA.in config
(TLA.FuncSet Server (TLA.SUBSET Server))) (TLA.in configVersion
(TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N)))) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'195" (-. (= Primary
Secondary))
$hyp "p_in" (TLA.in p Server)
$hyp "newTerm_in" (TLA.in newTerm Term)
$hyp "pQ_in" (TLA.in pQ (Quorums (TLA.fapply config p)))
$hyp "a_nt2a_in" (TLA.in a_nt2a Term)
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t a_he18fb8c89c2e3ba63d770a77f3b7a1a)
$hyp "v'232" (TLA.bEx Server ((s_1) (TLA.bEx (TLA.SUBSET Server) ((Q) (TLA.bEx Term ((newTerm_1) (/\ (= newTerm_1
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q) (TLA.bAll Q ((v) (CanVoteForConfig v s_1 newTerm_1)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q) newTerm_1 (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 newTerm_1)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion)))))))))
$hyp "v'233" (=> (/\ (/\ (TLA.in currentTerm (TLA.FuncSet Server arith.N))
(TLA.in state (TLA.FuncSet Server (TLA.set Secondary Primary)))
(TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
(TLA.in configVersion (TLA.FuncSet Server arith.N)) (TLA.in configTerm
(TLA.FuncSet Server arith.N))) Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa
a_Inv866unde_1unde_0unde_defa) (=> Next (TLA.bAll Server ((p_1) (TLA.bAll Term ((nv) (=> (TLA.bEx (Quorums (TLA.fapply config p_1)) ((Q) (/\ (= nv
(arith.add (TLA.fapply currentTerm p_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q
(Quorums (TLA.fapply config p_1))) (TLA.in p_1 (TLA.fapply config p_1))
(TLA.in p_1 Q) (TLA.bAll Q ((v) (CanVoteForConfig v p_1 nv)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_1) (TLA.cond (TLA.in s_1
Q) nv (TLA.fapply currentTerm s_1))))) (= a_statehash_primea
(TLA.Fcn Server ((s_1) (TLA.cond (= s_1 p_1) Primary (TLA.cond (TLA.in s_1
Q) Secondary (TLA.fapply state s_1)))))) (= a_configTermhash_primea
(TLA.except configTerm p_1 nv)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea
configVersion))))) (TLA.bAll a_he18fb8c89c2e3ba63d770a77f3b7a1a ((s_1) (TLA.in s_1
ActiveConfigSet))))))))))
$goal (TLA.in t
ActiveConfigSet)
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hd:"((((currentTerm \\in FuncSet(Server, Nat))&((state \\in FuncSet(Server, {Secondary, Primary}))&((config \\in FuncSet(Server, SUBSET(Server)))&((configVersion \\in FuncSet(Server, Nat))&(configTerm \\in FuncSet(Server, Nat))))))&(Safety&(a_Inv2973unde_1unde_1unde_defa&(a_Inv1758unde_1unde_0unde_defa&(a_Inv3915unde_1unde_1unde_defa&(a_Inv3246unde_1unde_2unde_defa&a_Inv866unde_1unde_0unde_defa))))))&Next)" (is "?z_hr&_")
 using v'189 by blast
 have z_Ha:"(Term=Nat)"
 using v'149 by blast
 have z_Ho:"bEx(Server, (\<lambda>s_1. bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[s_1]) + 1))&((Q \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, s_1, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_ho")
 using v'232 by blast
 have z_Hn:"(t \\in a_he18fb8c89c2e3ba63d770a77f3b7a1a)" (is "?z_hn")
 using t_in by blast
 have z_Hp:"(?z_hr=>(Next=>bAll(Server, (\<lambda>p_1. bAll(Term, (\<lambda>nv. (bEx(Quorums((config[p_1])), (\<lambda>Q. ((nv=((currentTerm[p_1]) + 1))&((Q \\in Quorums((config[p_1])))&((p_1 \\in (config[p_1]))&((p_1 \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, p_1, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1=p_1), Primary, cond((s_1 \\in Q), Secondary, (state[s_1]))))))&((a_configTermhash_primea=except(configTerm, p_1, nv))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))=>bAll(a_he18fb8c89c2e3ba63d770a77f3b7a1a, (\<lambda>s_1. (s_1 \\in ActiveConfigSet))))))))))" (is "_=>?z_hef")
 using v'233 by blast
 have zenon_L1_: "bAll(a_he18fb8c89c2e3ba63d770a77f3b7a1a, (\<lambda>s_1. (s_1 \\in ActiveConfigSet))) ==> (~(t \\in ActiveConfigSet)) ==> ?z_hn ==> FALSE" (is "?z_hfv ==> ?z_hq ==> _ ==> FALSE")
 proof -
  assume z_Hfv:"?z_hfv"
  assume z_Hq:"?z_hq" (is "~?z_hfz")
  assume z_Hn:"?z_hn"
  have z_Hga_z_Hfv: "(\\A x:((x \\in a_he18fb8c89c2e3ba63d770a77f3b7a1a)=>(x \\in ActiveConfigSet))) == ?z_hfv" (is "?z_hga == _")
  by (unfold bAll_def)
  have z_Hga: "?z_hga" (is "\\A x : ?z_hgf(x)")
  by (unfold z_Hga_z_Hfv, fact z_Hfv)
  have z_Hgg: "?z_hgf(t)"
  by (rule zenon_all_0 [of "?z_hgf" "t", OF z_Hga])
  show FALSE
  proof (rule zenon_imply [OF z_Hgg])
   assume z_Hgh:"(~?z_hn)"
   show FALSE
   by (rule notE [OF z_Hgh z_Hn])
  next
   assume z_Hfz:"?z_hfz"
   show FALSE
   by (rule notE [OF z_Hq z_Hfz])
  qed
 qed
 assume z_Hq:"(~(t \\in ActiveConfigSet))" (is "~?z_hfz")
 have z_Hr: "?z_hr" (is "?z_hs&?z_hbp")
 by (rule zenon_and_0 [OF z_Hd])
 have z_Hca: "Next"
 by (rule zenon_and_1 [OF z_Hd])
 have z_Hs: "?z_hs" (is "?z_ht&?z_hy")
 by (rule zenon_and_0 [OF z_Hr])
 have z_Hbp: "?z_hbp" (is "_&?z_hbr")
 by (rule zenon_and_1 [OF z_Hr])
 have z_Hbq: "Safety"
 by (rule zenon_and_0 [OF z_Hbp])
 have z_Hbr: "?z_hbr" (is "_&?z_hbt")
 by (rule zenon_and_1 [OF z_Hbp])
 have z_Hbs: "a_Inv2973unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hbr])
 have z_Hbt: "?z_hbt" (is "_&?z_hbv")
 by (rule zenon_and_1 [OF z_Hbr])
 have z_Hbu: "a_Inv1758unde_1unde_0unde_defa"
 by (rule zenon_and_0 [OF z_Hbt])
 have z_Hbv: "?z_hbv" (is "_&?z_hbx")
 by (rule zenon_and_1 [OF z_Hbt])
 have z_Hbw: "a_Inv3915unde_1unde_1unde_defa"
 by (rule zenon_and_0 [OF z_Hbv])
 have z_Hbx: "?z_hbx"
 by (rule zenon_and_1 [OF z_Hbv])
 have z_Hby: "a_Inv3246unde_1unde_2unde_defa"
 by (rule zenon_and_0 [OF z_Hbx])
 have z_Hbz: "a_Inv866unde_1unde_0unde_defa"
 by (rule zenon_and_1 [OF z_Hbx])
 have z_Ht: "?z_ht"
 by (rule zenon_and_0 [OF z_Hs])
 have z_Hy: "?z_hy" (is "?z_hz&?z_hbf")
 by (rule zenon_and_1 [OF z_Hs])
 have z_Hz: "?z_hz"
 by (rule zenon_and_0 [OF z_Hy])
 have z_Hbf: "?z_hbf" (is "?z_hbg&?z_hbk")
 by (rule zenon_and_1 [OF z_Hy])
 have z_Hbg: "?z_hbg"
 by (rule zenon_and_0 [OF z_Hbf])
 have z_Hbk: "?z_hbk" (is "?z_hbl&?z_hbn")
 by (rule zenon_and_1 [OF z_Hbf])
 have z_Hbl: "?z_hbl"
 by (rule zenon_and_0 [OF z_Hbk])
 have z_Hbn: "?z_hbn"
 by (rule zenon_and_1 [OF z_Hbk])
 have z_Hgi_z_Ho: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_ho" (is "?z_hgi == _")
 by (unfold bEx_def)
 have z_Hgi: "?z_hgi" (is "\\E x : ?z_hhp(x)")
 by (unfold z_Hgi_z_Ho, fact z_Ho)
 have z_Hhq: "?z_hhp((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hhs&?z_hht")
 by (rule zenon_ex_choose_0 [of "?z_hhp", OF z_Hgi])
 have z_Hhs: "?z_hhs"
 by (rule zenon_and_0 [OF z_Hhq])
 have z_Hht: "?z_hht"
 by (rule zenon_and_1 [OF z_Hhq])
 have z_Hhu_z_Hht: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hht" (is "?z_hhu == _")
 by (unfold bEx_def)
 have z_Hhu: "?z_hhu" (is "\\E x : ?z_hjf(x)")
 by (unfold z_Hhu_z_Hht, fact z_Hht)
 have z_Hjg: "?z_hjf((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hji&?z_hjj")
 by (rule zenon_ex_choose_0 [of "?z_hjf", OF z_Hhu])
 have z_Hjj: "?z_hjj"
 by (rule zenon_and_1 [OF z_Hjg])
 have z_Hjk_z_Hjj: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hjj" (is "?z_hjk == _")
 by (unfold bEx_def)
 have z_Hjk: "?z_hjk" (is "\\E x : ?z_hkn(x)")
 by (unfold z_Hjk_z_Hjj, fact z_Hjj)
 have z_Hko: "?z_hkn((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hkq&?z_hkr")
 by (rule zenon_ex_choose_0 [of "?z_hkn", OF z_Hjk])
 have z_Hkq: "?z_hkq"
 by (rule zenon_and_0 [OF z_Hko])
 have z_Hkr: "?z_hkr" (is "?z_hks&?z_hkt")
 by (rule zenon_and_1 [OF z_Hko])
 have z_Hks: "?z_hks" (is "?z_hkp=?z_hib")
 by (rule zenon_and_0 [OF z_Hkr])
 have z_Hkt: "?z_hkt" (is "?z_hjq&?z_hku")
 by (rule zenon_and_1 [OF z_Hkr])
 have z_Hjq: "?z_hjq"
 by (rule zenon_and_0 [OF z_Hkt])
 have z_Hku: "?z_hku" (is "?z_hii&?z_hkv")
 by (rule zenon_and_1 [OF z_Hkt])
 have z_Hii: "?z_hii"
 by (rule zenon_and_0 [OF z_Hku])
 have z_Hkv: "?z_hkv" (is "?z_hjt&?z_hkw")
 by (rule zenon_and_1 [OF z_Hku])
 have z_Hjt: "?z_hjt"
 by (rule zenon_and_0 [OF z_Hkv])
 have z_Hkw: "?z_hkw" (is "?z_hkx&?z_hky")
 by (rule zenon_and_1 [OF z_Hkv])
 have z_Hkx: "?z_hkx"
 by (rule zenon_and_0 [OF z_Hkw])
 have z_Hky: "?z_hky" (is "?z_hkz&?z_hla")
 by (rule zenon_and_1 [OF z_Hkw])
 have z_Hkz: "?z_hkz" (is "_=?z_hlb")
 by (rule zenon_and_0 [OF z_Hky])
 have z_Hla: "?z_hla" (is "?z_hkf&?z_hlc")
 by (rule zenon_and_1 [OF z_Hky])
 have z_Hkf: "?z_hkf" (is "_=?z_hkg")
 by (rule zenon_and_0 [OF z_Hla])
 have z_Hlc: "?z_hlc" (is "?z_hld&?z_hdy")
 by (rule zenon_and_1 [OF z_Hla])
 have z_Hld: "?z_hld" (is "_=?z_hle")
 by (rule zenon_and_0 [OF z_Hlc])
 have z_Hdy: "?z_hdy" (is "?z_hdz&?z_heb")
 by (rule zenon_and_1 [OF z_Hlc])
 have z_Hdz: "?z_hdz"
 by (rule zenon_and_0 [OF z_Hdy])
 have z_Heb: "?z_heb"
 by (rule zenon_and_1 [OF z_Hdy])
 show FALSE
 proof (rule zenon_imply [OF z_Hp])
  assume z_Hlf:"(~?z_hr)"
  show FALSE
  proof (rule zenon_notand [OF z_Hlf])
   assume z_Hlg:"(~?z_hs)"
   show FALSE
   proof (rule zenon_notand [OF z_Hlg])
    assume z_Hlh:"(~?z_ht)"
    show FALSE
    by (rule notE [OF z_Hlh z_Ht])
   next
    assume z_Hli:"(~?z_hy)"
    show FALSE
    proof (rule zenon_notand [OF z_Hli])
     assume z_Hlj:"(~?z_hz)"
     show FALSE
     by (rule notE [OF z_Hlj z_Hz])
    next
     assume z_Hlk:"(~?z_hbf)"
     show FALSE
     proof (rule zenon_notand [OF z_Hlk])
      assume z_Hll:"(~?z_hbg)"
      show FALSE
      by (rule notE [OF z_Hll z_Hbg])
     next
      assume z_Hlm:"(~?z_hbk)"
      show FALSE
      proof (rule zenon_notand [OF z_Hlm])
       assume z_Hln:"(~?z_hbl)"
       show FALSE
       by (rule notE [OF z_Hln z_Hbl])
      next
       assume z_Hlo:"(~?z_hbn)"
       show FALSE
       by (rule notE [OF z_Hlo z_Hbn])
      qed
     qed
    qed
   qed
  next
   assume z_Hlp:"(~?z_hbp)"
   show FALSE
   proof (rule zenon_notand [OF z_Hlp])
    assume z_Hlq:"(~Safety)"
    show FALSE
    by (rule notE [OF z_Hlq z_Hbq])
   next
    assume z_Hlr:"(~?z_hbr)"
    show FALSE
    proof (rule zenon_notand [OF z_Hlr])
     assume z_Hls:"(~a_Inv2973unde_1unde_1unde_defa)"
     show FALSE
     by (rule notE [OF z_Hls z_Hbs])
    next
     assume z_Hlt:"(~?z_hbt)"
     show FALSE
     proof (rule zenon_notand [OF z_Hlt])
      assume z_Hlu:"(~a_Inv1758unde_1unde_0unde_defa)"
      show FALSE
      by (rule notE [OF z_Hlu z_Hbu])
     next
      assume z_Hlv:"(~?z_hbv)"
      show FALSE
      proof (rule zenon_notand [OF z_Hlv])
       assume z_Hlw:"(~a_Inv3915unde_1unde_1unde_defa)"
       show FALSE
       by (rule notE [OF z_Hlw z_Hbw])
      next
       assume z_Hlx:"(~?z_hbx)"
       show FALSE
       proof (rule zenon_notand [OF z_Hlx])
        assume z_Hly:"(~a_Inv3246unde_1unde_2unde_defa)"
        show FALSE
        by (rule notE [OF z_Hly z_Hby])
       next
        assume z_Hlz:"(~a_Inv866unde_1unde_0unde_defa)"
        show FALSE
        by (rule notE [OF z_Hlz z_Hbz])
       qed
      qed
     qed
    qed
   qed
  qed
 next
  assume z_Hef:"?z_hef" (is "_=>?z_heg")
  show FALSE
  proof (rule zenon_imply [OF z_Hef])
   assume z_Hma:"(~Next)"
   show FALSE
   by (rule notE [OF z_Hma z_Hca])
  next
   assume z_Heg:"?z_heg"
   have z_Hmb_z_Heg: "(\\A x:((x \\in Server)=>bAll(Term, (\<lambda>nv. (bEx(Quorums((config[x])), (\<lambda>Q. ((nv=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, nv))&?z_hdy))))))))))=>bAll(a_he18fb8c89c2e3ba63d770a77f3b7a1a, (\<lambda>s_1. (s_1 \\in ActiveConfigSet)))))))) == ?z_heg" (is "?z_hmb == _")
   by (unfold bAll_def)
   have z_Hmb: "?z_hmb" (is "\\A x : ?z_hmw(x)")
   by (unfold z_Hmb_z_Heg, fact z_Heg)
   have z_Hmx: "(?z_hkp \\in Nat)" (is "?z_hmx")
   by (rule subst [where P="(\<lambda>zenon_Vfo. (?z_hkp \\in zenon_Vfo))", OF z_Ha z_Hkq])
   have z_Hnb: "?z_hmw((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))))" (is "_=>?z_hnc")
   by (rule zenon_all_0 [of "?z_hmw" "(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))", OF z_Hmb])
   show FALSE
   proof (rule zenon_imply [OF z_Hnb])
    assume z_Hnd:"(~?z_hhs)"
    show FALSE
    by (rule notE [OF z_Hnd z_Hhs])
   next
    assume z_Hnc:"?z_hnc"
    have z_Hne: "bAll(Nat, (\<lambda>nv. (bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])), (\<lambda>Q. ((nv=?z_hib)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hii&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), nv))&?z_hdy))))))))))=>bAll(a_he18fb8c89c2e3ba63d770a77f3b7a1a, (\<lambda>s_1. (s_1 \\in ActiveConfigSet))))))" (is "?z_hne")
    by (rule subst [where P="(\<lambda>zenon_Vho. bAll(zenon_Vho, (\<lambda>nv. (bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])), (\<lambda>Q. ((nv=?z_hib)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hii&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), nv)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), nv, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), nv))&?z_hdy))))))))))=>bAll(a_he18fb8c89c2e3ba63d770a77f3b7a1a, (\<lambda>s_1. (s_1 \\in ActiveConfigSet)))))))", OF z_Ha z_Hnc])
    have z_Hog_z_Hne: "(\\A x:((x \\in Nat)=>(bEx(Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])), (\<lambda>Q. ((x=?z_hib)&((Q \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hii&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))) \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in Q), x, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), x))&?z_hdy))))))))))=>bAll(a_he18fb8c89c2e3ba63d770a77f3b7a1a, (\<lambda>s_1. (s_1 \\in ActiveConfigSet)))))) == ?z_hne" (is "?z_hog == _")
    by (unfold bAll_def)
    have z_Hog: "?z_hog" (is "\\A x : ?z_hoy(x)")
    by (unfold z_Hog_z_Hne, fact z_Hne)
    have z_Hoz: "?z_hoy(?z_hkp)" (is "_=>?z_hpa")
    by (rule zenon_all_0 [of "?z_hoy" "?z_hkp", OF z_Hog])
    show FALSE
    proof (rule zenon_imply [OF z_Hoz])
     assume z_Hpb:"(~?z_hmx)"
     show FALSE
     by (rule notE [OF z_Hpb z_Hmx])
    next
     assume z_Hpa:"?z_hpa" (is "?z_hpc=>?z_hfv")
     show FALSE
     proof (rule zenon_imply [OF z_Hpa])
      assume z_Hpd:"(~?z_hpc)"
      have z_Hpe_z_Hpd: "(~(\\E x:((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hks&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hii&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), ?z_hkp)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_1. cond((s_1 \\in x), ?z_hkp, (currentTerm[s_1])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&?z_hlc)))))))))) == (~?z_hpc)" (is "?z_hpe == ?z_hpd")
      by (unfold bEx_def)
      have z_Hpe: "?z_hpe" (is "~(\\E x : ?z_hpw(x))")
      by (unfold z_Hpe_z_Hpd, fact z_Hpd)
      have z_Hpx: "~?z_hpw((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=?z_hib)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hii&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), newTerm_1))&?z_hdy)))))))))))))"
      by (rule zenon_notex_0 [of "?z_hpw" "(CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=?z_hib)&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))])))&(?z_hii&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q)&(bAll(Q, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&?z_hdy)))))))))))))), newTerm_1))&?z_hdy))))))))))))", OF z_Hpe])
      show FALSE
      proof (rule zenon_notand [OF z_Hpx])
       assume z_Hpy:"(~?z_hjq)"
       show FALSE
       by (rule notE [OF z_Hpy z_Hjq])
      next
       assume z_Hpz:"(~?z_hkr)"
       show FALSE
       proof (rule zenon_notand [OF z_Hpz])
        assume z_Hqa:"(?z_hkp~=?z_hib)"
        show FALSE
        by (rule notE [OF z_Hqa z_Hks])
       next
        assume z_Hqb:"(~?z_hkt)"
        show FALSE
        proof (rule zenon_notand [OF z_Hqb])
         assume z_Hpy:"(~?z_hjq)"
         show FALSE
         by (rule notE [OF z_Hpy z_Hjq])
        next
         assume z_Hqc:"(~?z_hku)"
         show FALSE
         proof (rule zenon_notand [OF z_Hqc])
          assume z_Hqd:"(~?z_hii)"
          show FALSE
          by (rule notE [OF z_Hqd z_Hii])
         next
          assume z_Hqe:"(~?z_hkv)"
          show FALSE
          proof (rule zenon_notand [OF z_Hqe])
           assume z_Hqf:"(~?z_hjt)"
           show FALSE
           by (rule notE [OF z_Hqf z_Hjt])
          next
           assume z_Hqg:"(~?z_hkw)"
           show FALSE
           proof (rule zenon_notand [OF z_Hqg])
            assume z_Hqh:"(~?z_hkx)"
            show FALSE
            by (rule notE [OF z_Hqh z_Hkx])
           next
            assume z_Hqi:"(~?z_hky)"
            show FALSE
            proof (rule zenon_notand [OF z_Hqi])
             assume z_Hqj:"(a_currentTermhash_primea~=?z_hlb)"
             show FALSE
             by (rule notE [OF z_Hqj z_Hkz])
            next
             assume z_Hqk:"(~?z_hla)"
             show FALSE
             proof (rule zenon_notand [OF z_Hqk])
              assume z_Hql:"(a_statehash_primea~=?z_hkg)"
              show FALSE
              by (rule notE [OF z_Hql z_Hkf])
             next
              assume z_Hqm:"(~?z_hlc)"
              show FALSE
              proof (rule zenon_notand [OF z_Hqm])
               assume z_Hqn:"(a_configTermhash_primea~=?z_hle)"
               show FALSE
               by (rule notE [OF z_Hqn z_Hld])
              next
               assume z_Hqo:"(~?z_hdy)"
               show FALSE
               proof (rule zenon_notand [OF z_Hqo])
               assume z_Hqp:"(a_confighash_primea~=config)"
               show FALSE
               by (rule notE [OF z_Hqp z_Hdz])
               next
               assume z_Hqq:"(a_configVersionhash_primea~=configVersion)"
               show FALSE
               by (rule notE [OF z_Hqq z_Heb])
               qed
              qed
             qed
            qed
           qed
          qed
         qed
        qed
       qed
      qed
     next
      assume z_Hfv:"?z_hfv"
      show FALSE
      by (rule zenon_L1_ [OF z_Hfv z_Hq z_Hn])
     qed
    qed
   qed
  qed
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 978"; *} qed
lemma ob'984:
(* usable definition IsFiniteSet suppressed *)
(* usable definition Cardinality suppressed *)
fixes MaxTerm
fixes MaxConfigVersion
fixes Server
fixes Secondary
fixes Primary
(* usable definition Term suppressed *)
(* usable definition Version suppressed *)
fixes currentTerm currentTerm'
fixes state state'
fixes configVersion configVersion'
fixes configTerm configTerm'
fixes config config'
(* usable definition vars suppressed *)
(* usable definition Quorums suppressed *)
(* usable definition QuorumsOverlap suppressed *)
(* usable definition Min suppressed *)
(* usable definition Max suppressed *)
(* usable definition Empty suppressed *)
(* usable definition IsNewerConfig suppressed *)
(* usable definition IsNewerOrEqualConfig suppressed *)
(* usable definition NewerConfig suppressed *)
(* usable definition NewerOrEqualConfig suppressed *)
(* usable definition CanVoteForConfig suppressed *)
(* usable definition ConfigQuorumCheck suppressed *)
(* usable definition TermQuorumCheck suppressed *)
(* usable definition SymmDiff suppressed *)
(* usable definition UpdateTerms suppressed *)
(* usable definition Reconfig suppressed *)
(* usable definition SendConfig suppressed *)
(* usable definition termination suppressed *)
(* usable definition Termination suppressed *)
(* usable definition Init suppressed *)
(* usable definition Next suppressed *)
(* usable definition Safety suppressed *)
(* usable definition Temporal suppressed *)
(* usable definition Liveness suppressed *)
(* usable definition Spec suppressed *)
(* usable definition ServerSymmetry suppressed *)
(* usable definition Restrict suppressed *)
(* usable definition Range suppressed *)
(* usable definition Inverse suppressed *)
(* usable definition Injection suppressed *)
(* usable definition Surjection suppressed *)
(* usable definition Bijection suppressed *)
(* usable definition ExistsInjection suppressed *)
(* usable definition ExistsSurjection suppressed *)
(* usable definition ExistsBijection suppressed *)
(* usable definition NatInductiveDefHypothesis suppressed *)
(* usable definition NatInductiveDefConclusion suppressed *)
(* usable definition FiniteNatInductiveDefHypothesis suppressed *)
(* usable definition FiniteNatInductiveDefConclusion suppressed *)
(* usable definition IsTransitivelyClosedOn suppressed *)
(* usable definition IsWellFoundedOn suppressed *)
(* usable definition SetLessThan suppressed *)
(* usable definition WFDefOn suppressed *)
(* usable definition OpDefinesFcn suppressed *)
(* usable definition WFInductiveDefines suppressed *)
(* usable definition WFInductiveUnique suppressed *)
(* usable definition TransitiveClosureOn suppressed *)
(* usable definition OpToRel suppressed *)
(* usable definition PreImage suppressed *)
(* usable definition LexPairOrdering suppressed *)
(* usable definition LexProductOrdering suppressed *)
(* usable definition FiniteSubsetsOf suppressed *)
(* usable definition StrictSubsetOrdering suppressed *)
(* usable definition QuorumsAt suppressed *)
(* usable definition ConfigIsCommitted suppressed *)
(* usable definition TypeOK suppressed *)
(* usable definition CV suppressed *)
(* usable definition Inv2973_1_1_def suppressed *)
(* usable definition Inv1758_1_0_def suppressed *)
(* usable definition Inv3915_1_1_def suppressed *)
(* usable definition Inv3246_1_2_def suppressed *)
(* usable definition Inv866_1_0_def suppressed *)
assumes v'148: "(((Term) = (Nat)))"
assumes v'149: "(((Version) = (Nat)))"
assumes v'152: "(\<forall> a_c1a \<in> ((SUBSET (Server))) : (\<forall> a_c2a \<in> ((SUBSET (Server))) : ((((((Succ[0])) = ((Cardinality ((((((a_c1a) \\ (a_c2a))) \<union> (((a_c2a) \\ (a_c1a)))))))))) \<Rightarrow> ((QuorumsOverlap ((a_c1a), (a_c2a))))))))"
(* usable definition InitTermType suppressed *)
(* usable definition Inv1758_1_0_def_restated suppressed *)
(* usable definition Equiv3Expr suppressed *)
assumes v'188: "((((TypeOK) & (Safety) & (a_Inv2973unde_1unde_1unde_defa) & (a_Inv1758unde_1unde_0unde_defa) & (a_Inv3915unde_1unde_1unde_defa) & (a_Inv3246unde_1unde_2unde_defa) & (a_Inv866unde_1unde_0unde_defa)) \<and> (Next)))"
assumes v'191: "(((Server) \<noteq> ({})))"
assumes v'192: "((\<And> S :: c. (((IsFiniteSet ((S)))) \<Longrightarrow> ((((S) \<noteq> ({}))) \<Longrightarrow> ((((Quorums ((S)))) \<noteq> ({})))))))"
assumes v'193: "((((((config) \<in> ([(Server) \<rightarrow> ((SUBSET (Server)))]))) | (TypeOK)) \<Longrightarrow> (\<And> s :: c. s \<in> (Server) \<Longrightarrow> (\<forall> Q \<in> ((Quorums ((fapply ((config), (s)))))) : (((Q) \<noteq> ({})))))))"
assumes v'194: "(((Primary) \<noteq> (Secondary)))"
fixes p
assumes p_in : "(p \<in> (Server))"
fixes newTerm
assumes newTerm_in : "(newTerm \<in> (Term))"
fixes pQ
assumes pQ_in : "(pQ \<in> ((Quorums ((fapply ((config), (p)))))))"
fixes a_nt2a
assumes a_nt2a_in : "(a_nt2a \<in> (Term))"
fixes s
assumes s_in : "(s \<in> (Server))"
fixes t
assumes t_in : "(t \<in> (subsetOf((Server), %s_1. ((~ (\<forall> Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (s_1)))))) : (\<exists> n \<in> (Q) : ((NewerConfig (((a_h17a541d025099e3943511403ec04a3a ((n)) :: c)), ((a_h17a541d025099e3943511403ec04a3a ((s_1)) :: c))))))))))))"
fixes Q
assumes Q_in : "(Q \<in> ((Quorums ((fapply (((a_confighash_primea :: c)), (t)))))))"
assumes v'235: "(\<exists> s_1 \<in> (Server) : (\<exists> Q_1 \<in> ((SUBSET (Server))) : (\<exists> newTerm_1 \<in> (Term) : ((((newTerm_1) = ((arith_add ((fapply ((currentTerm), (s_1))), ((Succ[0]))))))) & (((Q_1) \<in> ((Quorums ((fapply ((config), (s_1)))))))) & (((s_1) \<in> (fapply ((config), (s_1))))) & (((s_1) \<in> (Q_1))) & (\<forall> v \<in> (Q_1) : ((CanVoteForConfig ((v), (s_1), (newTerm_1))))) & ((((a_currentTermhash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) \<in> (Q_1))), (newTerm_1), (fapply ((currentTerm), (s_2)))))]))) & ((((a_statehash_primea :: c)) = ([ s_2 \<in> (Server)  \<mapsto> (cond((((s_2) = (s_1))), (Primary), (cond((((s_2) \<in> (Q_1))), (Secondary), (fapply ((state), (s_2)))))))]))) & ((((a_configTermhash_primea :: c)) = ([(configTerm) EXCEPT ![(s_1)] = (newTerm_1)]))) & (((((a_confighash_primea :: c)) = (config))) & ((((a_configVersionhash_primea :: c)) = (configVersion))))))))"
assumes v'236: "(((t) \<in> (subsetOf((Server), %s_1. ((~ (\<forall> Q_1 \<in> ((Quorums ((fapply ((config), (s_1)))))) : (\<exists> n \<in> (Q_1) : ((NewerConfig (((CV ((n)))), ((CV ((s_1)))))))))))))))"
shows "(((Q) \<in> ((Quorums ((fapply ((config), (t))))))))"(is "PROP ?ob'984")
proof -
ML_command {* writeln "*** TLAPS ENTER 984"; *}
show "PROP ?ob'984"

(* BEGIN ZENON INPUT
;; file=mldr_sm_IndProofs.tlaps/tlapm_ab5c8e.znn; PATH='/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/home/egolf/mambaforge/bin:/home/egolf/mambaforge/condabin:/home/egolf/.opam/4.07.1/bin:/home/egolf/.local/bin:/home/egolf/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/home/egolf/.local/bin/gurobi952/linux64/bin:/home/egolf/Projects/apalache/bin:/home/egolf/opt/foxitsoftware/foxitreader:/usr/local/bin:/usr/local/lib/tlaps/bin'; zenon -p0 -x tla -oisar -max-time 1d "$file" >mldr_sm_IndProofs.tlaps/tlapm_ab5c8e.znn.out
;; obligation #984
$hyp "v'148" (= Term arith.N)
$hyp "v'149" (= Version
arith.N)
$hyp "v'152" (TLA.bAll (TLA.SUBSET Server) ((a_c1a) (TLA.bAll (TLA.SUBSET Server) ((a_c2a) (=> (= (TLA.fapply TLA.Succ 0)
(Cardinality (TLA.cup (TLA.setminus a_c1a a_c2a) (TLA.setminus a_c2a
a_c1a)))) (QuorumsOverlap a_c1a a_c2a))))))
$hyp "v'188" (/\ (/\ TypeOK Safety a_Inv2973unde_1unde_1unde_defa
a_Inv1758unde_1unde_0unde_defa a_Inv3915unde_1unde_1unde_defa
a_Inv3246unde_1unde_2unde_defa a_Inv866unde_1unde_0unde_defa)
Next)
$hyp "v'191" (-. (= Server
TLA.emptyset))
$hyp "v'192" (A. ((S) (=> (IsFiniteSet S) (=> (-. (= S
TLA.emptyset)) (-. (= (Quorums S)
TLA.emptyset))))))
$hyp "v'193" (=> (\/ (TLA.in config (TLA.FuncSet Server (TLA.SUBSET Server)))
TypeOK) (TLA.bAll Server ((s) (TLA.bAll (Quorums (TLA.fapply config s)) ((Q) (-. (= Q
TLA.emptyset)))))))
$hyp "v'194" (-. (= Primary
Secondary))
$hyp "p_in" (TLA.in p Server)
$hyp "newTerm_in" (TLA.in newTerm Term)
$hyp "pQ_in" (TLA.in pQ (Quorums (TLA.fapply config p)))
$hyp "a_nt2a_in" (TLA.in a_nt2a Term)
$hyp "s_in" (TLA.in s Server)
$hyp "t_in" (TLA.in t (TLA.subsetOf Server ((s_1) (-. (TLA.bAll (Quorums (TLA.fapply a_confighash_primea s_1)) ((Q) (TLA.bEx Q ((n) (NewerConfig (a_h17a541d025099e3943511403ec04a3a n)
(a_h17a541d025099e3943511403ec04a3a s_1))))))))))
$hyp "Q_in" (TLA.in Q (Quorums (TLA.fapply a_confighash_primea t)))
$hyp "v'235" (TLA.bEx Server ((s_1) (TLA.bEx (TLA.SUBSET Server) ((Q_1) (TLA.bEx Term ((newTerm_1) (/\ (= newTerm_1
(arith.add (TLA.fapply currentTerm s_1) (TLA.fapply TLA.Succ 0))) (TLA.in Q_1
(Quorums (TLA.fapply config s_1))) (TLA.in s_1 (TLA.fapply config s_1))
(TLA.in s_1 Q_1) (TLA.bAll Q_1 ((v) (CanVoteForConfig v s_1 newTerm_1)))
(= a_currentTermhash_primea (TLA.Fcn Server ((s_2) (TLA.cond (TLA.in s_2
Q_1) newTerm_1 (TLA.fapply currentTerm s_2))))) (= a_statehash_primea
(TLA.Fcn Server ((s_2) (TLA.cond (= s_2 s_1) Primary (TLA.cond (TLA.in s_2
Q_1) Secondary (TLA.fapply state s_2)))))) (= a_configTermhash_primea
(TLA.except configTerm s_1 newTerm_1)) (/\ (= a_confighash_primea config)
(= a_configVersionhash_primea configVersion)))))))))
$hyp "v'236" (TLA.in t
(TLA.subsetOf Server ((s_1) (-. (TLA.bAll (Quorums (TLA.fapply config s_1)) ((Q_1) (TLA.bEx Q_1 ((n) (NewerConfig (CV n)
(CV s_1))))))))))
$goal (TLA.in Q
(Quorums (TLA.fapply config t)))
END ZENON  INPUT *)
(* PROOF-FOUND *)
(* BEGIN-PROOF *)
proof (rule zenon_nnpp)
 have z_Hp:"bEx(Server, (\<lambda>s_1. bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[s_1]) + 1))&((Q_1 \\in Quorums((config[s_1])))&((s_1 \\in (config[s_1]))&((s_1 \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, s_1, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=s_1), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, s_1, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))" (is "?z_hp")
 using v'235 by blast
 have z_Ho:"(Q \\in Quorums((a_confighash_primea[t])))" (is "?z_ho")
 using Q_in by blast
 assume z_Hr:"(~(Q \\in Quorums((config[t]))))" (is "~?z_hdh")
 have z_Hdk_z_Hp: "(\\E x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) == ?z_hp" (is "?z_hdk == _")
 by (unfold bEx_def)
 have z_Hdk: "?z_hdk" (is "\\E x : ?z_hes(x)")
 by (unfold z_Hdk_z_Hp, fact z_Hp)
 have z_Het: "?z_hes((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))))" (is "?z_hev&?z_hew")
 by (rule zenon_ex_choose_0 [of "?z_hes", OF z_Hdk])
 have z_Hew: "?z_hew"
 by (rule zenon_and_1 [OF z_Het])
 have z_Hex_z_Hew: "(\\E x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) == ?z_hew" (is "?z_hex == _")
 by (unfold bEx_def)
 have z_Hex: "?z_hex" (is "\\E x : ?z_hgi(x)")
 by (unfold z_Hex_z_Hew, fact z_Hew)
 have z_Hgj: "?z_hgi((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))" (is "?z_hgl&?z_hgm")
 by (rule zenon_ex_choose_0 [of "?z_hgi", OF z_Hex])
 have z_Hgm: "?z_hgm"
 by (rule zenon_and_1 [OF z_Hgj])
 have z_Hgn_z_Hgm: "(\\E x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))) == ?z_hgm" (is "?z_hgn == _")
 by (unfold bEx_def)
 have z_Hgn: "?z_hgn" (is "\\E x : ?z_hhq(x)")
 by (unfold z_Hgn_z_Hgm, fact z_Hgm)
 have z_Hhr: "?z_hhq((CHOOSE x:((x \\in Term)&((x=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&(((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))) \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))&(bAll((CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))), (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), x, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in (CHOOSE x:((x \\in SUBSET(Server))&bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]) + 1))&((x \\in Quorums((config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))])))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in (config[(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))]))&(((CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))) \\in x)&(bAll(x, (\<lambda>v. CanVoteForConfig(v, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in x), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=(CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))))), Primary, cond((s_2 \\in x), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion))))))))))))))), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, (CHOOSE x:((x \\in Server)&bEx(SUBSET(Server), (\<lambda>Q_1. bEx(Term, (\<lambda>newTerm_1. ((newTerm_1=((currentTerm[x]) + 1))&((Q_1 \\in Quorums((config[x])))&((x \\in (config[x]))&((x \\in Q_1)&(bAll(Q_1, (\<lambda>v. CanVoteForConfig(v, x, newTerm_1)))&((a_currentTermhash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2 \\in Q_1), newTerm_1, (currentTerm[s_2])))))&((a_statehash_primea=Fcn(Server, (\<lambda>s_2. cond((s_2=x), Primary, cond((s_2 \\in Q_1), Secondary, (state[s_2]))))))&((a_configTermhash_primea=except(configTerm, x, newTerm_1))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))))), x))&((a_confighash_primea=config)&(a_configVersionhash_primea=configVersion)))))))))))))" (is "?z_hht&?z_hhu")
 by (rule zenon_ex_choose_0 [of "?z_hhq", OF z_Hgn])
 have z_Hhu: "?z_hhu" (is "?z_hhv&?z_hhw")
 by (rule zenon_and_1 [OF z_Hhr])
 have z_Hhw: "?z_hhw" (is "?z_hgt&?z_hhx")
 by (rule zenon_and_1 [OF z_Hhu])
 have z_Hhx: "?z_hhx" (is "?z_hfl&?z_hhy")
 by (rule zenon_and_1 [OF z_Hhw])
 have z_Hhy: "?z_hhy" (is "?z_hgw&?z_hhz")
 by (rule zenon_and_1 [OF z_Hhx])
 have z_Hhz: "?z_hhz" (is "?z_hia&?z_hib")
 by (rule zenon_and_1 [OF z_Hhy])
 have z_Hib: "?z_hib" (is "?z_hic&?z_hid")
 by (rule zenon_and_1 [OF z_Hhz])
 have z_Hid: "?z_hid" (is "?z_hhi&?z_hie")
 by (rule zenon_and_1 [OF z_Hib])
 have z_Hie: "?z_hie" (is "?z_hif&?z_hcx")
 by (rule zenon_and_1 [OF z_Hid])
 have z_Hcx: "?z_hcx" (is "?z_hcy&?z_hda")
 by (rule zenon_and_1 [OF z_Hie])
 have z_Hcy: "?z_hcy"
 by (rule zenon_and_0 [OF z_Hcx])
 show FALSE
 proof (rule notE [OF z_Hr])
  have z_Hig: "(Quorums((a_confighash_primea[t]))=Quorums((config[t])))" (is "?z_hde=?z_hdi")
  proof (rule zenon_nnpp [of "(?z_hde=?z_hdi)"])
   assume z_Hih:"(?z_hde~=?z_hdi)"
   show FALSE
   proof (rule zenon_noteq [of "?z_hdi"])
    have z_Hii: "((a_confighash_primea[t])=(config[t]))" (is "?z_hdf=?z_hdj")
    proof (rule zenon_nnpp [of "(?z_hdf=?z_hdj)"])
     assume z_Hij:"(?z_hdf~=?z_hdj)"
     show FALSE
     proof (rule zenon_noteq [of "?z_hdj"])
      have z_Hik: "(?z_hdj~=?z_hdj)"
      by (rule subst [where P="(\<lambda>zenon_Vke. ((zenon_Vke[t])~=?z_hdj))", OF z_Hcy], fact z_Hij)
      thus "(?z_hdj~=?z_hdj)" .
     qed
    qed
    have z_Hip: "(?z_hdi~=?z_hdi)"
    by (rule subst [where P="(\<lambda>zenon_Vle. (Quorums(zenon_Vle)~=?z_hdi))", OF z_Hii], fact z_Hih)
    thus "(?z_hdi~=?z_hdi)" .
   qed
  qed
  have z_Hdh: "?z_hdh"
  by (rule subst [where P="(\<lambda>zenon_Vme. (Q \\in zenon_Vme))", OF z_Hig], fact z_Ho)
  thus "?z_hdh" .
 qed
qed
(* END-PROOF *)
ML_command {* writeln "*** TLAPS EXIT 984"; *} qed
end
